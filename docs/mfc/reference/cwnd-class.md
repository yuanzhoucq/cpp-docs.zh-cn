---
title: CWnd 类
ms.date: 11/19/2018
f1_keywords:
- CWnd
- AFXWIN/CWnd
- AFXWIN/CWnd::CWnd
- AFXWIN/CWnd::accDoDefaultAction
- AFXWIN/CWnd::accHitTest
- AFXWIN/CWnd::accLocation
- AFXWIN/CWnd::accNavigate
- AFXWIN/CWnd::accSelect
- AFXWIN/CWnd::AnimateWindow
- AFXWIN/CWnd::ArrangeIconicWindows
- AFXWIN/CWnd::Attach
- AFXWIN/CWnd::BeginModalState
- AFXWIN/CWnd::BeginPaint
- AFXWIN/CWnd::BindDefaultProperty
- AFXWIN/CWnd::BindProperty
- AFXWIN/CWnd::BringWindowToTop
- AFXWIN/CWnd::CalcWindowRect
- AFXWIN/CWnd::CancelToolTips
- AFXWIN/CWnd::CenterWindow
- AFXWIN/CWnd::ChangeClipboardChain
- AFXWIN/CWnd::CheckDlgButton
- AFXWIN/CWnd::CheckRadioButton
- AFXWIN/CWnd::ChildWindowFromPoint
- AFXWIN/CWnd::ClientToScreen
- AFXWIN/CWnd::CloseWindow
- AFXWIN/CWnd::ContinueModal
- AFXWIN/CWnd::Create
- AFXWIN/CWnd::CreateAccessibleProxy
- AFXWIN/CWnd::CreateCaret
- AFXWIN/CWnd::CreateControl
- AFXWIN/CWnd::CreateEx
- AFXWIN/CWnd::CreateGrayCaret
- AFXWIN/CWnd::CreateSolidCaret
- AFXWIN/CWnd::DeleteTempMap
- AFXWIN/CWnd::DestroyWindow
- AFXWIN/CWnd::Detach
- AFXWIN/CWnd::DlgDirList
- AFXWIN/CWnd::DlgDirListComboBox
- AFXWIN/CWnd::DlgDirSelect
- AFXWIN/CWnd::DlgDirSelectComboBox
- AFXWIN/CWnd::DragAcceptFiles
- AFXWIN/CWnd::DragDetect
- AFXWIN/CWnd::DrawAnimatedRects
- AFXWIN/CWnd::DrawCaption
- AFXWIN/CWnd::DrawMenuBar
- AFXWIN/CWnd::EnableActiveAccessibility
- AFXWIN/CWnd::EnableDynamicLayout
- AFXWIN/CWnd::EnableD2DSupport
- AFXWIN/CWnd::EnableScrollBar
- AFXWIN/CWnd::EnableScrollBarCtrl
- AFXWIN/CWnd::EnableToolTips
- AFXWIN/CWnd::EnableTrackingToolTips
- AFXWIN/CWnd::EnableWindow
- AFXWIN/CWnd::EndModalLoop
- AFXWIN/CWnd::EndModalState
- AFXWIN/CWnd::EndPaint
- AFXWIN/CWnd::ExecuteDlgInit
- AFXWIN/CWnd::FilterToolTipMessage
- AFXWIN/CWnd::FindWindow
- AFXWIN/CWnd::FindWindowEx
- AFXWIN/CWnd::FlashWindow
- AFXWIN/CWnd::FlashWindowEx
- AFXWIN/CWnd::FromHandle
- AFXWIN/CWnd::FromHandlePermanent
- AFXWIN/CWnd::get_accChild
- AFXWIN/CWnd::get_accChildCount
- AFXWIN/CWnd::get_accDefaultAction
- AFXWIN/CWnd::get_accDescription
- AFXWIN/CWnd::get_accFocus
- AFXWIN/CWnd::get_accHelp
- AFXWIN/CWnd::get_accHelpTopic
- AFXWIN/CWnd::get_accKeyboardShortcut
- AFXWIN/CWnd::get_accName
- AFXWIN/CWnd::get_accParent
- AFXWIN/CWnd::get_accRole
- AFXWIN/CWnd::get_accSelection
- AFXWIN/CWnd::get_accState
- AFXWIN/CWnd::get_accValue
- AFXWIN/CWnd::GetActiveWindow
- AFXWIN/CWnd::GetAncestor
- AFXWIN/CWnd::GetCapture
- AFXWIN/CWnd::GetCaretPos
- AFXWIN/CWnd::GetCheckedRadioButton
- AFXWIN/CWnd::GetClientRect
- AFXWIN/CWnd::GetClipboardOwner
- AFXWIN/CWnd::GetClipboardViewer
- AFXWIN/CWnd::GetControlUnknown
- AFXWIN/CWnd::GetDC
- AFXWIN/CWnd::GetDCEx
- AFXWIN/CWnd::GetDCRenderTarget
- AFXWIN/CWnd::GetDescendantWindow
- AFXWIN/CWnd::GetDesktopWindow
- AFXWIN/CWnd::GetDlgCtrlID
- AFXWIN/CWnd::GetDlgItem
- AFXWIN/CWnd::GetDlgItemInt
- AFXWIN/CWnd::GetDlgItemText
- AFXWIN/CWnd::GetDSCCursor
- AFXWIN/CWnd::GetDynamicLayout
- AFXWIN/CWnd::GetExStyle
- AFXWIN/CWnd::GetFocus
- AFXWIN/CWnd::GetFont
- AFXWIN/CWnd::GetForegroundWindow
- AFXWIN/CWnd::GetIcon
- AFXWIN/CWnd::GetLastActivePopup
- AFXWIN/CWnd::GetLayeredWindowAttributes
- AFXWIN/CWnd::GetMenu
- AFXWIN/CWnd::GetNextDlgGroupItem
- AFXWIN/CWnd::GetNextDlgTabItem
- AFXWIN/CWnd::GetNextWindow
- AFXWIN/CWnd::GetOleControlSite
- AFXWIN/CWnd::GetOpenClipboardWindow
- AFXWIN/CWnd::GetOwner
- AFXWIN/CWnd::GetParent
- AFXWIN/CWnd::GetParentFrame
- AFXWIN/CWnd::GetParentOwner
- AFXWIN/CWnd::GetProperty
- AFXWIN/CWnd::GetRenderTarget
- AFXWIN/CWnd::GetSafeHwnd
- AFXWIN/CWnd::GetSafeOwner
- AFXWIN/CWnd::GetScrollBarCtrl
- AFXWIN/CWnd::GetScrollBarInfo
- AFXWIN/CWnd::GetScrollInfo
- AFXWIN/CWnd::GetScrollLimit
- AFXWIN/CWnd::GetScrollPos
- AFXWIN/CWnd::GetScrollRange
- AFXWIN/CWnd::GetStyle
- AFXWIN/CWnd::GetSystemMenu
- AFXWIN/CWnd::GetTitleBarInfo
- AFXWIN/CWnd::GetTopLevelFrame
- AFXWIN/CWnd::GetTopLevelOwner
- AFXWIN/CWnd::GetTopLevelParent
- AFXWIN/CWnd::GetTopWindow
- AFXWIN/CWnd::GetUpdateRect
- AFXWIN/CWnd::GetUpdateRgn
- AFXWIN/CWnd::GetWindow
- AFXWIN/CWnd::GetWindowContextHelpId
- AFXWIN/CWnd::GetWindowDC
- AFXWIN/CWnd::GetWindowedChildCount
- AFXWIN/CWnd::GetWindowInfo
- AFXWIN/CWnd::GetWindowlessChildCount
- AFXWIN/CWnd::GetWindowPlacement
- AFXWIN/CWnd::GetWindowRect
- AFXWIN/CWnd::GetWindowRgn
- AFXWIN/CWnd::GetWindowText
- AFXWIN/CWnd::GetWindowTextLength
- AFXWIN/CWnd::HideCaret
- AFXWIN/CWnd::HiliteMenuItem
- AFXWIN/CWnd::HtmlHelp
- AFXWIN/CWnd::Invalidate
- AFXWIN/CWnd::InvalidateRect
- AFXWIN/CWnd::InvalidateRgn
- AFXWIN/CWnd::InvokeHelper
- AFXWIN/CWnd::IsChild
- AFXWIN/CWnd::IsD2DSupportEnabled
- AFXWIN/CWnd::IsDialogMessage
- AFXWIN/CWnd::IsDlgButtonChecked
- AFXWIN/CWnd::IsDynamicLayoutEnabled
- AFXWIN/CWnd::IsIconic
- AFXWIN/CWnd::IsTouchWindow
- AFXWIN/CWnd::IsWindowEnabled
- AFXWIN/CWnd::IsWindowVisible
- AFXWIN/CWnd::IsZoomed
- AFXWIN/CWnd::KillTimer
- AFXWIN/CWnd::LockWindowUpdate
- AFXWIN/CWnd::MapWindowPoints
- AFXWIN/CWnd::MessageBox
- AFXWIN/CWnd::ModifyStyle
- AFXWIN/CWnd::ModifyStyleEx
- AFXWIN/CWnd::MoveWindow
- AFXWIN/CWnd::NotifyWinEvent
- AFXWIN/CWnd::OnAmbientProperty
- AFXWIN/CWnd::OnDrawIconicThumbnailOrLivePreview
- AFXWIN/CWnd::OnHelp
- AFXWIN/CWnd::OnHelpFinder
- AFXWIN/CWnd::OnHelpIndex
- AFXWIN/CWnd::OnHelpUsing
- AFXWIN/CWnd::OnToolHitTest
- AFXWIN/CWnd::OpenClipboard
- AFXWIN/CWnd::PaintWindowlessControls
- AFXWIN/CWnd::PostMessage
- AFXWIN/CWnd::PreCreateWindow
- AFXWIN/CWnd::PreSubclassWindow
- AFXWIN/CWnd::PreTranslateMessage
- AFXWIN/CWnd::Print
- AFXWIN/CWnd::PrintClient
- AFXWIN/CWnd::PrintWindow
- AFXWIN/CWnd::RedrawWindow
- AFXWIN/CWnd::RegisterTouchWindow
- AFXWIN/CWnd::ReleaseDC
- AFXWIN/CWnd::RepositionBars
- AFXWIN/CWnd::RunModalLoop
- AFXWIN/CWnd::ScreenToClient
- AFXWIN/CWnd::ScrollWindow
- AFXWIN/CWnd::ScrollWindowEx
- AFXWIN/CWnd::SendChildNotifyLastMsg
- AFXWIN/CWnd::SendDlgItemMessage
- AFXWIN/CWnd::SendMessage
- AFXWIN/CWnd::SendMessageToDescendants
- AFXWIN/CWnd::SendNotifyMessage
- AFXWIN/CWnd::SetActiveWindow
- AFXWIN/CWnd::SetCapture
- AFXWIN/CWnd::SetCaretPos
- AFXWIN/CWnd::SetClipboardViewer
- AFXWIN/CWnd::SetDlgCtrlID
- AFXWIN/CWnd::SetDlgItemInt
- AFXWIN/CWnd::SetDlgItemText
- AFXWIN/CWnd::SetFocus
- AFXWIN/CWnd::SetFont
- AFXWIN/CWnd::SetForegroundWindow
- AFXWIN/CWnd::SetIcon
- AFXWIN/CWnd::SetLayeredWindowAttributes
- AFXWIN/CWnd::SetMenu
- AFXWIN/CWnd::SetOwner
- AFXWIN/CWnd::SetParent
- AFXWIN/CWnd::SetProperty
- AFXWIN/CWnd::SetRedraw
- AFXWIN/CWnd::SetScrollInfo
- AFXWIN/CWnd::SetScrollPos
- AFXWIN/CWnd::SetScrollRange
- AFXWIN/CWnd::SetTimer
- AFXWIN/CWnd::SetWindowContextHelpId
- AFXWIN/CWnd::SetWindowPlacement
- AFXWIN/CWnd::SetWindowPos
- AFXWIN/CWnd::SetWindowRgn
- AFXWIN/CWnd::SetWindowText
- AFXWIN/CWnd::ShowCaret
- AFXWIN/CWnd::ShowOwnedPopups
- AFXWIN/CWnd::ShowScrollBar
- AFXWIN/CWnd::ShowWindow
- AFXWIN/CWnd::SubclassDlgItem
- AFXWIN/CWnd::SubclassWindow
- AFXWIN/CWnd::UnlockWindowUpdate
- AFXWIN/CWnd::UnsubclassWindow
- AFXWIN/CWnd::UpdateData
- AFXWIN/CWnd::UpdateDialogControls
- AFXWIN/CWnd::UpdateLayeredWindow
- AFXWIN/CWnd::UpdateWindow
- AFXWIN/CWnd::ValidateRect
- AFXWIN/CWnd::ValidateRgn
- AFXWIN/CWnd::WindowFromPoint
- AFXWIN/CWnd::WinHelp
- AFXWIN/CWnd::Default
- AFXWIN/CWnd::DefWindowProc
- AFXWIN/CWnd::DoDataExchange
- AFXWIN/CWnd::GetCurrentMessage
- AFXWIN/CWnd::InitDynamicLayout
- AFXWIN/CWnd::LoadDynamicLayoutResource
- AFXWIN/CWnd::OnActivate
- AFXWIN/CWnd::OnActivateApp
- AFXWIN/CWnd::OnAppCommand
- AFXWIN/CWnd::OnAskCbFormatName
- AFXWIN/CWnd::OnCancelMode
- AFXWIN/CWnd::OnCaptureChanged
- AFXWIN/CWnd::OnChangeCbChain
- AFXWIN/CWnd::OnChangeUIState
- AFXWIN/CWnd::OnChar
- AFXWIN/CWnd::OnCharToItem
- AFXWIN/CWnd::OnChildActivate
- AFXWIN/CWnd::OnChildNotify
- AFXWIN/CWnd::OnClipboardUpdate
- AFXWIN/CWnd::OnClose
- AFXWIN/CWnd::OnColorizationColorChanged
- AFXWIN/CWnd::OnCommand
- AFXWIN/CWnd::OnCompacting
- AFXWIN/CWnd::OnCompareItem
- AFXWIN/CWnd::OnCompositionChanged
- AFXWIN/CWnd::OnContextMenu
- AFXWIN/CWnd::OnCopyData
- AFXWIN/CWnd::OnCreate
- AFXWIN/CWnd::OnCtlColor
- AFXWIN/CWnd::OnDeadChar
- AFXWIN/CWnd::OnDeleteItem
- AFXWIN/CWnd::OnDestroy
- AFXWIN/CWnd::OnDestroyClipboard
- AFXWIN/CWnd::OnDeviceChange
- AFXWIN/CWnd::OnDevModeChange
- AFXWIN/CWnd::OnDrawClipboard
- AFXWIN/CWnd::OnDrawItem
- AFXWIN/CWnd::OnDropFiles
- AFXWIN/CWnd::OnEnable
- AFXWIN/CWnd::OnEndSession
- AFXWIN/CWnd::OnEnterIdle
- AFXWIN/CWnd::OnEnterMenuLoop
- AFXWIN/CWnd::OnEnterSizeMove
- AFXWIN/CWnd::OnEraseBkgnd
- AFXWIN/CWnd::OnExitMenuLoop
- AFXWIN/CWnd::OnExitSizeMove
- AFXWIN/CWnd::OnFontChange
- AFXWIN/CWnd::OnGetDlgCode
- AFXWIN/CWnd::OnGetMinMaxInfo
- AFXWIN/CWnd::OnHelpInfo
- AFXWIN/CWnd::OnHotKey
- AFXWIN/CWnd::OnHScroll
- AFXWIN/CWnd::OnHScrollClipboard
- AFXWIN/CWnd::OnIconEraseBkgnd
- AFXWIN/CWnd::OnInitMenu
- AFXWIN/CWnd::OnInitMenuPopup
- AFXWIN/CWnd::OnInputDeviceChange
- AFXWIN/CWnd::OnInputLangChange
- AFXWIN/CWnd::OnInputLangChangeRequest
- AFXWIN/CWnd::OnKeyDown
- AFXWIN/CWnd::OnKeyUp
- AFXWIN/CWnd::OnKillFocus
- AFXWIN/CWnd::OnLButtonDblClk
- AFXWIN/CWnd::OnLButtonDown
- AFXWIN/CWnd::OnLButtonUp
- AFXWIN/CWnd::OnMButtonDblClk
- AFXWIN/CWnd::OnMButtonDown
- AFXWIN/CWnd::OnMButtonUp
- AFXWIN/CWnd::OnMDIActivate
- AFXWIN/CWnd::OnMeasureItem
- AFXWIN/CWnd::OnMenuChar
- AFXWIN/CWnd::OnMenuDrag
- AFXWIN/CWnd::OnMenuGetObject
- AFXWIN/CWnd::OnMenuRButtonUp
- AFXWIN/CWnd::OnMenuSelect
- AFXWIN/CWnd::OnMouseActivate
- AFXWIN/CWnd::OnMouseHover
- AFXWIN/CWnd::OnMouseHWheel
- AFXWIN/CWnd::OnMouseLeave
- AFXWIN/CWnd::OnMouseMove
- AFXWIN/CWnd::OnMouseWheel
- AFXWIN/CWnd::OnMove
- AFXWIN/CWnd::OnMoving
- AFXWIN/CWnd::OnNcActivate
- AFXWIN/CWnd::OnNcCalcSize
- AFXWIN/CWnd::OnNcCreate
- AFXWIN/CWnd::OnNcDestroy
- AFXWIN/CWnd::OnNcHitTest
- AFXWIN/CWnd::OnNcLButtonDblClk
- AFXWIN/CWnd::OnNcLButtonDown
- AFXWIN/CWnd::OnNcLButtonUp
- AFXWIN/CWnd::OnNcMButtonDblClk
- AFXWIN/CWnd::OnNcMButtonDown
- AFXWIN/CWnd::OnNcMButtonUp
- AFXWIN/CWnd::OnNcMouseHover
- AFXWIN/CWnd::OnNcMouseLeave
- AFXWIN/CWnd::OnNcMouseMove
- AFXWIN/CWnd::OnNcPaint
- AFXWIN/CWnd::OnNcRButtonDblClk
- AFXWIN/CWnd::OnNcRButtonDown
- AFXWIN/CWnd::OnNcRButtonUp
- AFXWIN/CWnd::OnNcRenderingChanged
- AFXWIN/CWnd::OnNcXButtonDblClk
- AFXWIN/CWnd::OnNcXButtonDown
- AFXWIN/CWnd::OnNcXButtonUp
- AFXWIN/CWnd::OnNextMenu
- AFXWIN/CWnd::OnNotify
- AFXWIN/CWnd::OnNotifyFormat
- AFXWIN/CWnd::OnPaint
- AFXWIN/CWnd::OnPaintClipboard
- AFXWIN/CWnd::OnPaletteChanged
- AFXWIN/CWnd::OnPaletteIsChanging
- AFXWIN/CWnd::OnParentNotify
- AFXWIN/CWnd::OnPowerBroadcast
- AFXWIN/CWnd::OnQueryDragIcon
- AFXWIN/CWnd::OnQueryEndSession
- AFXWIN/CWnd::OnQueryNewPalette
- AFXWIN/CWnd::OnQueryOpen
- AFXWIN/CWnd::OnQueryUIState
- AFXWIN/CWnd::OnRawInput
- AFXWIN/CWnd::OnRButtonDblClk
- AFXWIN/CWnd::OnRButtonDown
- AFXWIN/CWnd::OnRButtonUp
- AFXWIN/CWnd::OnRenderAllFormats
- AFXWIN/CWnd::OnRenderFormat
- AFXWIN/CWnd::OnSessionChange
- AFXWIN/CWnd::OnSetCursor
- AFXWIN/CWnd::OnSetFocus
- AFXWIN/CWnd::OnSettingChange
- AFXWIN/CWnd::OnShowWindow
- AFXWIN/CWnd::OnSize
- AFXWIN/CWnd::OnSizeClipboard
- AFXWIN/CWnd::OnSizing
- AFXWIN/CWnd::OnSpoolerStatus
- AFXWIN/CWnd::OnStyleChanged
- AFXWIN/CWnd::OnStyleChanging
- AFXWIN/CWnd::OnSysChar
- AFXWIN/CWnd::OnSysColorChange
- AFXWIN/CWnd::OnSysCommand
- AFXWIN/CWnd::OnSysDeadChar
- AFXWIN/CWnd::OnSysKeyDown
- AFXWIN/CWnd::OnSysKeyUp
- AFXWIN/CWnd::OnTCard
- AFXWIN/CWnd::OnTimeChange
- AFXWIN/CWnd::OnTimer
- AFXWIN/CWnd::OnTouchInput
- AFXWIN/CWnd::OnTouchInputs
- AFXWIN/CWnd::OnUniChar
- AFXWIN/CWnd::OnUnInitMenuPopup
- AFXWIN/CWnd::OnUpdateUIState
- AFXWIN/CWnd::OnUserChanged
- AFXWIN/CWnd::OnVKeyToItem
- AFXWIN/CWnd::OnVScroll
- AFXWIN/CWnd::OnVScrollClipboard
- AFXWIN/CWnd::OnWindowPosChanged
- AFXWIN/CWnd::OnWindowPosChanging
- AFXWIN/CWnd::OnWinIniChange
- AFXWIN/CWnd::OnWndMsg
- AFXWIN/CWnd::OnXButtonDblClk
- AFXWIN/CWnd::OnXButtonDown
- AFXWIN/CWnd::OnXButtonUp
- AFXWIN/CWnd::PostNcDestroy
- AFXWIN/CWnd::ReflectChildNotify
- AFXWIN/CWnd::ReflectLastMsg
- AFXWIN/CWnd::ResizeDynamicLayout
- AFXWIN/CWnd::WindowProc
- AFXWIN/CWnd::m_hWnd
helpviewer_keywords:
- CWnd [MFC], CWnd
- CWnd [MFC], accDoDefaultAction
- CWnd [MFC], accHitTest
- CWnd [MFC], accLocation
- CWnd [MFC], accNavigate
- CWnd [MFC], accSelect
- CWnd [MFC], AnimateWindow
- CWnd [MFC], ArrangeIconicWindows
- CWnd [MFC], Attach
- CWnd [MFC], BeginModalState
- CWnd [MFC], BeginPaint
- CWnd [MFC], BindDefaultProperty
- CWnd [MFC], BindProperty
- CWnd [MFC], BringWindowToTop
- CWnd [MFC], CalcWindowRect
- CWnd [MFC], CancelToolTips
- CWnd [MFC], CenterWindow
- CWnd [MFC], ChangeClipboardChain
- CWnd [MFC], CheckDlgButton
- CWnd [MFC], CheckRadioButton
- CWnd [MFC], ChildWindowFromPoint
- CWnd [MFC], ClientToScreen
- CWnd [MFC], CloseWindow
- CWnd [MFC], ContinueModal
- CWnd [MFC], Create
- CWnd [MFC], CreateAccessibleProxy
- CWnd [MFC], CreateCaret
- CWnd [MFC], CreateControl
- CWnd [MFC], CreateEx
- CWnd [MFC], CreateGrayCaret
- CWnd [MFC], CreateSolidCaret
- CWnd [MFC], DeleteTempMap
- CWnd [MFC], DestroyWindow
- CWnd [MFC], Detach
- CWnd [MFC], DlgDirList
- CWnd [MFC], DlgDirListComboBox
- CWnd [MFC], DlgDirSelect
- CWnd [MFC], DlgDirSelectComboBox
- CWnd [MFC], DragAcceptFiles
- CWnd [MFC], DragDetect
- CWnd [MFC], DrawAnimatedRects
- CWnd [MFC], DrawCaption
- CWnd [MFC], DrawMenuBar
- CWnd [MFC], EnableActiveAccessibility
- CWnd [MFC], EnableDynamicLayout
- CWnd [MFC], EnableD2DSupport
- CWnd [MFC], EnableScrollBar
- CWnd [MFC], EnableScrollBarCtrl
- CWnd [MFC], EnableToolTips
- CWnd [MFC], EnableTrackingToolTips
- CWnd [MFC], EnableWindow
- CWnd [MFC], EndModalLoop
- CWnd [MFC], EndModalState
- CWnd [MFC], EndPaint
- CWnd [MFC], ExecuteDlgInit
- CWnd [MFC], FilterToolTipMessage
- CWnd [MFC], FindWindow
- CWnd [MFC], FindWindowEx
- CWnd [MFC], FlashWindow
- CWnd [MFC], FlashWindowEx
- CWnd [MFC], FromHandle
- CWnd [MFC], FromHandlePermanent
- CWnd [MFC], get_accChild
- CWnd [MFC], get_accChildCount
- CWnd [MFC], get_accDefaultAction
- CWnd [MFC], get_accDescription
- CWnd [MFC], get_accFocus
- CWnd [MFC], get_accHelp
- CWnd [MFC], get_accHelpTopic
- CWnd [MFC], get_accKeyboardShortcut
- CWnd [MFC], get_accName
- CWnd [MFC], get_accParent
- CWnd [MFC], get_accRole
- CWnd [MFC], get_accSelection
- CWnd [MFC], get_accState
- CWnd [MFC], get_accValue
- CWnd [MFC], GetActiveWindow
- CWnd [MFC], GetAncestor
- CWnd [MFC], GetCapture
- CWnd [MFC], GetCaretPos
- CWnd [MFC], GetCheckedRadioButton
- CWnd [MFC], GetClientRect
- CWnd [MFC], GetClipboardOwner
- CWnd [MFC], GetClipboardViewer
- CWnd [MFC], GetControlUnknown
- CWnd [MFC], GetDC
- CWnd [MFC], GetDCEx
- CWnd [MFC], GetDCRenderTarget
- CWnd [MFC], GetDescendantWindow
- CWnd [MFC], GetDesktopWindow
- CWnd [MFC], GetDlgCtrlID
- CWnd [MFC], GetDlgItem
- CWnd [MFC], GetDlgItemInt
- CWnd [MFC], GetDlgItemText
- CWnd [MFC], GetDSCCursor
- CWnd [MFC], GetDynamicLayout
- CWnd [MFC], GetExStyle
- CWnd [MFC], GetFocus
- CWnd [MFC], GetFont
- CWnd [MFC], GetForegroundWindow
- CWnd [MFC], GetIcon
- CWnd [MFC], GetLastActivePopup
- CWnd [MFC], GetLayeredWindowAttributes
- CWnd [MFC], GetMenu
- CWnd [MFC], GetNextDlgGroupItem
- CWnd [MFC], GetNextDlgTabItem
- CWnd [MFC], GetNextWindow
- CWnd [MFC], GetOleControlSite
- CWnd [MFC], GetOpenClipboardWindow
- CWnd [MFC], GetOwner
- CWnd [MFC], GetParent
- CWnd [MFC], GetParentFrame
- CWnd [MFC], GetParentOwner
- CWnd [MFC], GetProperty
- CWnd [MFC], GetRenderTarget
- CWnd [MFC], GetSafeHwnd
- CWnd [MFC], GetSafeOwner
- CWnd [MFC], GetScrollBarCtrl
- CWnd [MFC], GetScrollBarInfo
- CWnd [MFC], GetScrollInfo
- CWnd [MFC], GetScrollLimit
- CWnd [MFC], GetScrollPos
- CWnd [MFC], GetScrollRange
- CWnd [MFC], GetStyle
- CWnd [MFC], GetSystemMenu
- CWnd [MFC], GetTitleBarInfo
- CWnd [MFC], GetTopLevelFrame
- CWnd [MFC], GetTopLevelOwner
- CWnd [MFC], GetTopLevelParent
- CWnd [MFC], GetTopWindow
- CWnd [MFC], GetUpdateRect
- CWnd [MFC], GetUpdateRgn
- CWnd [MFC], GetWindow
- CWnd [MFC], GetWindowContextHelpId
- CWnd [MFC], GetWindowDC
- CWnd [MFC], GetWindowedChildCount
- CWnd [MFC], GetWindowInfo
- CWnd [MFC], GetWindowlessChildCount
- CWnd [MFC], GetWindowPlacement
- CWnd [MFC], GetWindowRect
- CWnd [MFC], GetWindowRgn
- CWnd [MFC], GetWindowText
- CWnd [MFC], GetWindowTextLength
- CWnd [MFC], HideCaret
- CWnd [MFC], HiliteMenuItem
- CWnd [MFC], HtmlHelp
- CWnd [MFC], Invalidate
- CWnd [MFC], InvalidateRect
- CWnd [MFC], InvalidateRgn
- CWnd [MFC], InvokeHelper
- CWnd [MFC], IsChild
- CWnd [MFC], IsD2DSupportEnabled
- CWnd [MFC], IsDialogMessage
- CWnd [MFC], IsDlgButtonChecked
- CWnd [MFC], IsDynamicLayoutEnabled
- CWnd [MFC], IsIconic
- CWnd [MFC], IsTouchWindow
- CWnd [MFC], IsWindowEnabled
- CWnd [MFC], IsWindowVisible
- CWnd [MFC], IsZoomed
- CWnd [MFC], KillTimer
- CWnd [MFC], LockWindowUpdate
- CWnd [MFC], MapWindowPoints
- CWnd [MFC], MessageBox
- CWnd [MFC], ModifyStyle
- CWnd [MFC], ModifyStyleEx
- CWnd [MFC], MoveWindow
- CWnd [MFC], NotifyWinEvent
- CWnd [MFC], OnAmbientProperty
- CWnd [MFC], OnDrawIconicThumbnailOrLivePreview
- CWnd [MFC], OnHelp
- CWnd [MFC], OnHelpFinder
- CWnd [MFC], OnHelpIndex
- CWnd [MFC], OnHelpUsing
- CWnd [MFC], OnToolHitTest
- CWnd [MFC], OpenClipboard
- CWnd [MFC], PaintWindowlessControls
- CWnd [MFC], PostMessage
- CWnd [MFC], PreCreateWindow
- CWnd [MFC], PreSubclassWindow
- CWnd [MFC], PreTranslateMessage
- CWnd [MFC], Print
- CWnd [MFC], PrintClient
- CWnd [MFC], PrintWindow
- CWnd [MFC], RedrawWindow
- CWnd [MFC], RegisterTouchWindow
- CWnd [MFC], ReleaseDC
- CWnd [MFC], RepositionBars
- CWnd [MFC], RunModalLoop
- CWnd [MFC], ScreenToClient
- CWnd [MFC], ScrollWindow
- CWnd [MFC], ScrollWindowEx
- CWnd [MFC], SendChildNotifyLastMsg
- CWnd [MFC], SendDlgItemMessage
- CWnd [MFC], SendMessage
- CWnd [MFC], SendMessageToDescendants
- CWnd [MFC], SendNotifyMessage
- CWnd [MFC], SetActiveWindow
- CWnd [MFC], SetCapture
- CWnd [MFC], SetCaretPos
- CWnd [MFC], SetClipboardViewer
- CWnd [MFC], SetDlgCtrlID
- CWnd [MFC], SetDlgItemInt
- CWnd [MFC], SetDlgItemText
- CWnd [MFC], SetFocus
- CWnd [MFC], SetFont
- CWnd [MFC], SetForegroundWindow
- CWnd [MFC], SetIcon
- CWnd [MFC], SetLayeredWindowAttributes
- CWnd [MFC], SetMenu
- CWnd [MFC], SetOwner
- CWnd [MFC], SetParent
- CWnd [MFC], SetProperty
- CWnd [MFC], SetRedraw
- CWnd [MFC], SetScrollInfo
- CWnd [MFC], SetScrollPos
- CWnd [MFC], SetScrollRange
- CWnd [MFC], SetTimer
- CWnd [MFC], SetWindowContextHelpId
- CWnd [MFC], SetWindowPlacement
- CWnd [MFC], SetWindowPos
- CWnd [MFC], SetWindowRgn
- CWnd [MFC], SetWindowText
- CWnd [MFC], ShowCaret
- CWnd [MFC], ShowOwnedPopups
- CWnd [MFC], ShowScrollBar
- CWnd [MFC], ShowWindow
- CWnd [MFC], SubclassDlgItem
- CWnd [MFC], SubclassWindow
- CWnd [MFC], UnlockWindowUpdate
- CWnd [MFC], UnsubclassWindow
- CWnd [MFC], UpdateData
- CWnd [MFC], UpdateDialogControls
- CWnd [MFC], UpdateLayeredWindow
- CWnd [MFC], UpdateWindow
- CWnd [MFC], ValidateRect
- CWnd [MFC], ValidateRgn
- CWnd [MFC], WindowFromPoint
- CWnd [MFC], WinHelp
- CWnd [MFC], Default
- CWnd [MFC], DefWindowProc
- CWnd [MFC], DoDataExchange
- CWnd [MFC], GetCurrentMessage
- CWnd [MFC], InitDynamicLayout
- CWnd [MFC], LoadDynamicLayoutResource
- CWnd [MFC], OnActivate
- CWnd [MFC], OnActivateApp
- CWnd [MFC], OnAppCommand
- CWnd [MFC], OnAskCbFormatName
- CWnd [MFC], OnCancelMode
- CWnd [MFC], OnCaptureChanged
- CWnd [MFC], OnChangeCbChain
- CWnd [MFC], OnChangeUIState
- CWnd [MFC], OnChar
- CWnd [MFC], OnCharToItem
- CWnd [MFC], OnChildActivate
- CWnd [MFC], OnChildNotify
- CWnd [MFC], OnClipboardUpdate
- CWnd [MFC], OnClose
- CWnd [MFC], OnColorizationColorChanged
- CWnd [MFC], OnCommand
- CWnd [MFC], OnCompacting
- CWnd [MFC], OnCompareItem
- CWnd [MFC], OnCompositionChanged
- CWnd [MFC], OnContextMenu
- CWnd [MFC], OnCopyData
- CWnd [MFC], OnCreate
- CWnd [MFC], OnCtlColor
- CWnd [MFC], OnDeadChar
- CWnd [MFC], OnDeleteItem
- CWnd [MFC], OnDestroy
- CWnd [MFC], OnDestroyClipboard
- CWnd [MFC], OnDeviceChange
- CWnd [MFC], OnDevModeChange
- CWnd [MFC], OnDrawClipboard
- CWnd [MFC], OnDrawItem
- CWnd [MFC], OnDropFiles
- CWnd [MFC], OnEnable
- CWnd [MFC], OnEndSession
- CWnd [MFC], OnEnterIdle
- CWnd [MFC], OnEnterMenuLoop
- CWnd [MFC], OnEnterSizeMove
- CWnd [MFC], OnEraseBkgnd
- CWnd [MFC], OnExitMenuLoop
- CWnd [MFC], OnExitSizeMove
- CWnd [MFC], OnFontChange
- CWnd [MFC], OnGetDlgCode
- CWnd [MFC], OnGetMinMaxInfo
- CWnd [MFC], OnHelpInfo
- CWnd [MFC], OnHotKey
- CWnd [MFC], OnHScroll
- CWnd [MFC], OnHScrollClipboard
- CWnd [MFC], OnIconEraseBkgnd
- CWnd [MFC], OnInitMenu
- CWnd [MFC], OnInitMenuPopup
- CWnd [MFC], OnInputDeviceChange
- CWnd [MFC], OnInputLangChange
- CWnd [MFC], OnInputLangChangeRequest
- CWnd [MFC], OnKeyDown
- CWnd [MFC], OnKeyUp
- CWnd [MFC], OnKillFocus
- CWnd [MFC], OnLButtonDblClk
- CWnd [MFC], OnLButtonDown
- CWnd [MFC], OnLButtonUp
- CWnd [MFC], OnMButtonDblClk
- CWnd [MFC], OnMButtonDown
- CWnd [MFC], OnMButtonUp
- CWnd [MFC], OnMDIActivate
- CWnd [MFC], OnMeasureItem
- CWnd [MFC], OnMenuChar
- CWnd [MFC], OnMenuDrag
- CWnd [MFC], OnMenuGetObject
- CWnd [MFC], OnMenuRButtonUp
- CWnd [MFC], OnMenuSelect
- CWnd [MFC], OnMouseActivate
- CWnd [MFC], OnMouseHover
- CWnd [MFC], OnMouseHWheel
- CWnd [MFC], OnMouseLeave
- CWnd [MFC], OnMouseMove
- CWnd [MFC], OnMouseWheel
- CWnd [MFC], OnMove
- CWnd [MFC], OnMoving
- CWnd [MFC], OnNcActivate
- CWnd [MFC], OnNcCalcSize
- CWnd [MFC], OnNcCreate
- CWnd [MFC], OnNcDestroy
- CWnd [MFC], OnNcHitTest
- CWnd [MFC], OnNcLButtonDblClk
- CWnd [MFC], OnNcLButtonDown
- CWnd [MFC], OnNcLButtonUp
- CWnd [MFC], OnNcMButtonDblClk
- CWnd [MFC], OnNcMButtonDown
- CWnd [MFC], OnNcMButtonUp
- CWnd [MFC], OnNcMouseHover
- CWnd [MFC], OnNcMouseLeave
- CWnd [MFC], OnNcMouseMove
- CWnd [MFC], OnNcPaint
- CWnd [MFC], OnNcRButtonDblClk
- CWnd [MFC], OnNcRButtonDown
- CWnd [MFC], OnNcRButtonUp
- CWnd [MFC], OnNcRenderingChanged
- CWnd [MFC], OnNcXButtonDblClk
- CWnd [MFC], OnNcXButtonDown
- CWnd [MFC], OnNcXButtonUp
- CWnd [MFC], OnNextMenu
- CWnd [MFC], OnNotify
- CWnd [MFC], OnNotifyFormat
- CWnd [MFC], OnPaint
- CWnd [MFC], OnPaintClipboard
- CWnd [MFC], OnPaletteChanged
- CWnd [MFC], OnPaletteIsChanging
- CWnd [MFC], OnParentNotify
- CWnd [MFC], OnPowerBroadcast
- CWnd [MFC], OnQueryDragIcon
- CWnd [MFC], OnQueryEndSession
- CWnd [MFC], OnQueryNewPalette
- CWnd [MFC], OnQueryOpen
- CWnd [MFC], OnQueryUIState
- CWnd [MFC], OnRawInput
- CWnd [MFC], OnRButtonDblClk
- CWnd [MFC], OnRButtonDown
- CWnd [MFC], OnRButtonUp
- CWnd [MFC], OnRenderAllFormats
- CWnd [MFC], OnRenderFormat
- CWnd [MFC], OnSessionChange
- CWnd [MFC], OnSetCursor
- CWnd [MFC], OnSetFocus
- CWnd [MFC], OnSettingChange
- CWnd [MFC], OnShowWindow
- CWnd [MFC], OnSize
- CWnd [MFC], OnSizeClipboard
- CWnd [MFC], OnSizing
- CWnd [MFC], OnSpoolerStatus
- CWnd [MFC], OnStyleChanged
- CWnd [MFC], OnStyleChanging
- CWnd [MFC], OnSysChar
- CWnd [MFC], OnSysColorChange
- CWnd [MFC], OnSysCommand
- CWnd [MFC], OnSysDeadChar
- CWnd [MFC], OnSysKeyDown
- CWnd [MFC], OnSysKeyUp
- CWnd [MFC], OnTCard
- CWnd [MFC], OnTimeChange
- CWnd [MFC], OnTimer
- CWnd [MFC], OnTouchInput
- CWnd [MFC], OnTouchInputs
- CWnd [MFC], OnUniChar
- CWnd [MFC], OnUnInitMenuPopup
- CWnd [MFC], OnUpdateUIState
- CWnd [MFC], OnUserChanged
- CWnd [MFC], OnVKeyToItem
- CWnd [MFC], OnVScroll
- CWnd [MFC], OnVScrollClipboard
- CWnd [MFC], OnWindowPosChanged
- CWnd [MFC], OnWindowPosChanging
- CWnd [MFC], OnWinIniChange
- CWnd [MFC], OnWndMsg
- CWnd [MFC], OnXButtonDblClk
- CWnd [MFC], OnXButtonDown
- CWnd [MFC], OnXButtonUp
- CWnd [MFC], PostNcDestroy
- CWnd [MFC], ReflectChildNotify
- CWnd [MFC], ReflectLastMsg
- CWnd [MFC], ResizeDynamicLayout
- CWnd [MFC], WindowProc
- CWnd [MFC], m_hWnd
ms.assetid: 49a832ee-bc34-4126-88b3-bc1d9974f6c4
ms.openlocfilehash: 1f0338d827a9ec92747169ff2682e6d47485e4c2
ms.sourcegitcommit: 7ecd91d8ce18088a956917cdaf3a3565bd128510
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/16/2020
ms.locfileid: "79426395"
---
# <a name="cwnd-class"></a>CWnd 类

提供 Microsoft 基础类库中所有窗口类的基本功能。

## <a name="syntax"></a>语法

```
class CWnd : public CCmdTarget
```

## <a name="members"></a>成员

### <a name="public-constructors"></a>公共构造函数

|名称|说明|
|----------|-----------------|
|[CWnd：： CWnd](#cwnd)|构造 `CWnd` 对象。|

### <a name="public-methods"></a>公共方法

|名称|说明|
|----------|-----------------|
|[CWnd：： accDoDefaultAction](#accdodefaultaction)|由框架调用以执行对象的默认操作。|
|[CWnd：： accHitTest](#acchittest)|由框架调用以检索屏幕上给定点处的子元素或子对象。|
|[CWnd：： accLocation](#acclocation)|由框架调用以检索指定对象的当前屏幕位置。|
|[CWnd：： accNavigate](#accnavigate)|由框架调用以移到容器内的另一个用户界面元素，如果可能还检索对象。|
|[CWnd：： accSelect](#accselect)|由框架调用以修改选定内容或移动指定对象的键盘焦点。|
|[CWnd：： AnimateWindow](#animatewindow)|对关联窗口对象进行动画处理。|
|[CWnd：： ArrangeIconicWindows](#arrangeiconicwindows)|排列所有最小化（图标）子窗口。|
|[CWnd：： Attach](#attach)|将 Windows 句柄附加到 `CWnd` 对象。|
|[CWnd：： BeginModalState](#beginmodalstate)|调用此成员函数以使框架窗口具有模式。|
|[CWnd：： BeginPaint](#beginpaint)|为进行绘制准备好 `CWnd`。|
|[CWnd：： BindDefaultProperty](#binddefaultproperty)|将调用对象的默认简单绑定属性（按照在类型库中进行的标记）绑定到与数据源控件关联的光标。|
|[CWnd：： BindProperty](#bindproperty)|将数据绑定控件上的光标绑定属性绑定到数据源控件，并向 MFC 绑定管理器注册该关系。|
|[CWnd：： BringWindowToTop](#bringwindowtotop)|将 `CWnd` 置于一堆重叠窗口的顶部。|
|[CWnd：： CalcWindowRect](#calcwindowrect)|调用以从客户端矩形计算窗口矩形。|
|[CWnd：： CancelToolTips](#canceltooltips)|禁用工具提示控件。|
|[CWnd：： CenterWindow](#centerwindow)|使窗口相对于其父级居中。|
|[CWnd：： ChangeClipboardChain](#changeclipboardchain)|从剪贴板查看器链中移除 `CWnd`。|
|[CWnd：： CheckDlgButton](#checkdlgbutton)|将复选标记置于按钮控件旁，或从按钮控件移除复选标记。|
|[CWnd：： CheckRadioButton](#checkradiobutton)|选中指定单选按钮，并从指定按钮组中的所有其他单选按钮移除复选标记。|
|[CWnd：： ChildWindowFromPoint](#childwindowfrompoint)|确定哪些（如果有）子窗口包含指定点。|
|[CWnd：： ClientToScreen](#clienttoscreen)|将显示中的给定点或矩形的客户端坐标转换为屏幕坐标。|
|[CWnd：： CloseWindow](#closewindow)|最小化窗口。|
|[CWnd：： ContinueModal](#continuemodal)|继续窗口的模式状态。|
|[CWnd：： Create](#create)|创建并初始化与 `CWnd` 对象关联的子窗口。|
|[CWnd：： CreateAccessibleProxy](#createaccessibleproxy)|为指定对象创建 Active Accessibility 代理服务器。|
|[CWnd：： CreateCaret](#createcaret)|为系统插入符号创建新形状并获取插入符号的所有权。|
|[CWnd：： CreateControl](#createcontrol)|创建在 MFC 程序中由 `CWnd` 对象表示的 ActiveX 控件。|
|[CWnd：： CreateEx](#createex)|创建 Windows 重叠、弹出或子窗口，并将它附加到 `CWnd` 对象。|
|[CWnd：： CreateGrayCaret](#creategraycaret)|为系统插入符号创建灰色块并获取插入符号的所有权。|
|[CWnd：： CreateSolidCaret](#createsolidcaret)|为系统插入符号创建实心块并获取插入符号的所有权。|
|[CWnd：:D eleteTempMap](#deletetempmap)|由 `CWinApp` 空闲时间处理程序自动调用，删除任何由 `CWnd` 创建的临时 `FromHandle` 对象。|
|[CWnd：:D estroyWindow](#destroywindow)|销毁附加的 Windows 窗口。|
|[CWnd：:D etach](#detach)|从 `CWnd` 对象分离 Windows 句柄并返回该句柄。|
|[CWnd：:D lgDirList](#dlgdirlist)|使用文件或目录列表填充列表框。|
|[CWnd：:D lgDirListComboBox](#dlgdirlistcombobox)|使用文件或目录列表填充组合框的列表框。|
|[CWnd：:D lgDirSelect](#dlgdirselect)|从列表框检索当前所选内容。|
|[CWnd：:D lgDirSelectComboBox](#dlgdirselectcombobox)|从组合框的列表框检索当前所选内容。|
|[CWnd：:D ragAcceptFiles](#dragacceptfiles)|指示窗口将接受拖动的文件。|
|[CWnd：:D ragDetect](#dragdetect)|捕获鼠标并跟踪其移动，直到用户释放左键、按 ESC 键或将鼠标移动到围绕指定点的拖动矩形外部。|
|[CWnd：:D rawAnimatedRects](#drawanimatedrects)|绘制透明框架矩形并对它进行动画处理，以指示图标的打开或是窗口的最小化或最大化。|
|[CWnd：:D rawCaption](#drawcaption)|绘制标题。|
|[CWnd：:D rawMenuBar](#drawmenubar)|重绘菜单栏。|
|[CWnd：： EnableActiveAccessibility](#enableactiveaccessibility)|启用用户定义的 `Active Accessibility` 函数。|
|[CWnd：： EnableDynamicLayout](#enabledynamiclayout)|使子窗口的位置和大小可以在用户调整窗口大小时动态调整。|
|[CWnd：： EnableD2DSupport](#enabled2dsupport)|启用或禁用窗口 `D2D` 支持。 在初始化主窗口之前调用此方法。|
|[CWnd：： EnableScrollBar](#enablescrollbar)|启用或禁用滚动条的一个或两个箭头。|
|[CWnd：： EnableScrollBarCtrl](#enablescrollbarctrl)|启用或禁用同级滚动条控件。|
|[CWnd：： EnableToolTips](#enabletooltips)|启用工具提示控件。|
|[CWnd：： EnableTrackingToolTips](#enabletrackingtooltips)|在跟踪模式下启用工具提示控件。|
|[CWnd：： EnableWindow](#enablewindow)|启用或禁用鼠标和键盘输入。|
|[CWnd：： EndModalLoop](#endmodalloop)|启用窗口的模式状态。|
|[CWnd：： EndModalState](#endmodalstate)|调用此成员函数以将框架窗口从有模式更改为无模式。|
|[CWnd：： EndPaint](#endpaint)|标记绘制的末尾。|
|[CWnd：： ExecuteDlgInit](#executedlginit)|启动对话框资源。|
|[CWnd：： FilterToolTipMessage](#filtertooltipmessage)|检索与对话框中的控件关联的标题或文本。|
|[CWnd：： FindWindow](#findwindow)|返回由其窗口名和窗口类标识的窗口的句柄。|
|[CWnd：： FindWindowEx](#findwindowex)|返回由其窗口名和窗口类标识的窗口的句柄。|
|[CWnd：： FlashWindow](#flashwindow)|使窗口闪烁一次。|
|[CWnd：： FlashWindowEx](#flashwindowex)|使具有其他功能的窗口闪烁。|
|[CWnd：： FromHandle](#fromhandle)|在提供了窗口的句柄时返回指向 `CWnd` 对象的指针。 如果 `CWnd` 对象未附加到该句柄，则会创建并附加一个临时 `CWnd` 对象。|
|[CWnd：： FromHandlePermanent](#fromhandlepermanent)|在提供了窗口的句柄时返回指向 `CWnd` 对象的指针。|
|[CWnd：： get_accChild](#get_accchild)|由框架调用以检索指定子级的 `IDispatch` 接口地址。|
|[CWnd：： get_accChildCount](#get_accchildcount)|由框架调用调用以检索属于该对象的子级的个数。|
|[CWnd：： get_accDefaultAction](#get_accdefaultaction)|由框架调用以检索描述对象默认操作的字符串。|
|[CWnd：： get_accDescription](#get_accdescription)|由框架调用以检索描述指定对象的可视外观的字符串。|
|[CWnd：： get_accFocus](#get_accfocus)|由框架调用以检索具有键盘焦点的对象。|
|[CWnd：： get_accHelp](#get_acchelp)|由框架调用以检索对象的**Help**属性字符串。|
|[CWnd：： get_accHelpTopic](#get_acchelptopic)|由框架调用以检索与指定对象关联的 `WinHelp` 文件的完整路径以及该文件内相应主题的标识符。|
|[CWnd：： get_accKeyboardShortcut](#get_acckeyboardshortcut)|由框架调用以检索指定对象的快捷键或访问键。|
|[CWnd：： get_accName](#get_accname)|由框架调用以检索指定对象的名称。|
|[CWnd：： get_accParent](#get_accparent)|由框架调用以检索对象父级的 `IDispatch` 接口。|
|[CWnd：： get_accRole](#get_accrole)|由框架调用以检索描述指定对象的角色的信息。|
|[CWnd：： get_accSelection](#get_accselection)|由框架调用以检索该对象的选定子级。|
|[CWnd：： get_accState](#get_accstate)|由框架调用以检索指定对象的当前状态。|
|[CWnd：： get_accValue](#get_accvalue)|由框架调用以检索指定对象的值。|
|[CWnd：： GetActiveWindow](#getactivewindow)|检索活动窗口。|
|[CWnd：： GetAncestor](#getancestor)|检索指定窗口的上级先窗口对象。|
|[CWnd：： GetCapture](#getcapture)|检索具有鼠标捕获的 `CWnd`。|
|[CWnd：： GetCaretPos](#getcaretpos)|检索插入符号的当前位置的客户端坐标。|
|[CWnd：： GetCheckedRadioButton](#getcheckedradiobutton)|返回按钮中当前选中的单选按钮的 ID。|
|[CWnd：： GetClientRect](#getclientrect)|获取 `CWnd` 工作区的尺寸。|
|[CWnd：： GetClipboardOwner](#getclipboardowner)|检索指向剪贴板当前所有者的指针。|
|[CWnd：： GetClipboardViewer](#getclipboardviewer)|检索指向剪贴板查看器链中第一个窗口的指针。|
|[CWnd：： GetControlUnknown](#getcontrolunknown)|检索指向未知 ActiveX 控件的指针。|
|[CWnd：： GetDC](#getdc)|检索工作区的显示上下文。|
|[CWnd：： GetDCEx](#getdcex)|检索工作区的显示上下文，并在绘制启用剪辑。|
|[CWnd：： GetDCRenderTarget](#getdcrendertarget)|检索 `CWnd` 窗口的设备上下文 (DC) 呈现目标。|
|[CWnd：： GetDescendantWindow](#getdescendantwindow)|搜索所有子代窗口，并返回具有指定 ID 的窗口。|
|[CWnd：： GetDesktopWindow](#getdesktopwindow)|检索 Windows 桌面窗口。|
|[CWnd：： GetDlgCtrlID](#getdlgctrlid)|如果 `CWnd` 是子窗口，则调用此函数会返回其 ID 值。|
|[CWnd：： GetDlgItem](#getdlgitem)|从指定对话框中检索具有指定 ID 的控件。|
|[CWnd：： GetDlgItemInt](#getdlgitemint)|将给定对话框中控件的文本转换为整数值。|
|[CWnd：： GetDlgItemText](#getdlgitemtext)|检索与控件关联的标题或文本。|
|[CWnd：： GetDSCCursor](#getdsccursor)|检索指向由数据源控件的 DataSource、UserName、Password 和 SQL 属性定义的基础光标的指针。|
|[CWnd：： GetDynamicLayout](#getdynamiclayout)|检索指向动态布局管理器对象的指针。|
|[CWnd：： GetExStyle](#getexstyle)|返回窗口的扩展样式。|
|[CWnd：： GetFocus](#getfocus)|检索当前具有输入焦点的 `CWnd`。|
|[CWnd：： Ivsfontandcolorstorage.getfont 错误](#getfont)|检索当前字体。|
|[CWnd：： GetForegroundWindow](#getforegroundwindow)|返回指向前台窗口（用户当前正在使用的顶级窗口）的指针。|
|[CWnd：： GetIcon](#geticon)|检索图标的句柄。|
|[CWnd：： GetLastActivePopup](#getlastactivepopup)|确定最近处于活动状态的由 `CWnd` 拥有的弹出窗口。|
|[CWnd：： GetLayeredWindowAttributes](#getlayeredwindowattributes)|检索分层窗口的不透明度和透明度颜色键。|
|[CWnd：： GetMenu](#getmenu)|检索指向指定菜单的指针。|
|[CWnd：： GetNextDlgGroupItem](#getnextdlggroupitem)|在控件组中搜索的下一个（或上一个）控件。|
|[CWnd：： GetNextDlgTabItem](#getnextdlgtabitem)|检索第一个控件，该控件具有后面（或之前）指定控件的[WS_TABSTOP](styles-used-by-mfc.md#window-styles)样式。|
|[CWnd：： GetNextWindow](#getnextwindow)|返回窗口管理器列表中的下一个（或上一个）窗口。|
|[CWnd：： GetOleControlSite](#getolecontrolsite)|检索指定 ActiveX 控件的自定义站点。|
|[CWnd：： GetOpenClipboardWindow](#getopenclipboardwindow)|检索指向当前打开剪贴板的窗口的指针。|
|[CWnd：： GetOwner](#getowner)|检索指向 `CWnd` 所有者的指针。|
|[CWnd：： GetParent](#getparent)|检索 `CWnd` 的父窗口（如果有）。|
|[CWnd：： GetParentFrame](#getparentframe)|检索 `CWnd` 对象的父框架窗口。|
|[CWnd：： GetParentOwner](#getparentowner)|返回指向子窗口的父窗口的指针。|
|[CWnd：： GetProperty](#getproperty)|检索 ActiveX 控件属性。|
|[CWnd：： GetRenderTarget](#getrendertarget)|获取与此窗口相关联的呈现目标。|
|[CWnd：： GetSafeHwnd](#getsafehwnd)|返回 `m_hWnd`，如果**this**指针为 null，则返回 null。|
|[CWnd：： GetSafeOwner](#getsafeowner)|检索给定窗口的安全所有者。|
|[CWnd：： GetScrollBarCtrl](#getscrollbarctrl)|返回同级滚动条控件。|
|[CWnd：： GetScrollBarInfo](#getscrollbarinfo)|检索有关指定滚动条的信息。|
|[CWnd：： GetScrollInfo](#getscrollinfo)|检索 `SCROLLINFO` 结构维护的有关滚动条的信息。|
|[CWnd：： GetScrollLimit](#getscrolllimit)|检索滚动条的限制。|
|[CWnd：： GetScrollPos](#getscrollpos)|检索滚动框的当前位置。|
|[CWnd：： GetScrollRange](#getscrollrange)|复制给定滚动条的当前最小和最大滚动条位置。|
|[CWnd：： GetStyle](#getstyle)|返回当前窗口样式。|
|[CWnd：： GetSystemMenu](#getsystemmenu)|允许应用程序访问控件菜单以进行复制和修改。|
|[CWnd：： GetTitleBarInfo](#gettitlebarinfo)|检索有关指定标题栏的信息。|
|[CWnd：： GetTopLevelFrame](#gettoplevelframe)|检索窗口的顶级框架窗口。|
|[CWnd：： GetTopLevelOwner](#gettoplevelowner)|检索顶级窗口。|
|[CWnd：： GetTopLevelParent](#gettoplevelparent)|检索窗口的顶级父级。|
|[CWnd：： GetTopWindow](#gettopwindow)|返回属于 `CWnd` 的第一个子窗口。|
|[CWnd：： GetUpdateRect](#getupdaterect)|检索完全包围 `CWnd` 更新区域的最小矩形的坐标。|
|[CWnd：： GetUpdateRgn](#getupdatergn)|检索 `CWnd` 更新区域。|
|[CWnd：： GetWindow](#getwindow)|返回与此窗口具有指定关系的窗口。|
|[CWnd：： GetWindowContextHelpId](#getwindowcontexthelpid)|检索帮助上下文标识符。|
|[CWnd：： GetWindowDC](#getwindowdc)|检索整个窗口的显示上下文，包括标题栏、菜单和滚动条。|
|[CWnd：： GetWindowedChildCount](#getwindowedchildcount)|返回关联子窗口的数量。|
|[CWnd：： GetWindowInfo](#getwindowinfo)|返回有关窗口的信息。|
|[CWnd：： GetWindowlessChildCount](#getwindowlesschildcount)|返回关联无窗口子窗口的数量。|
|[CWnd：： GetWindowPlacement](#getwindowplacement)|检索窗口的显示状态以及正常（已还原）、最小化和最大化位置。|
|[CWnd：： GetWindowRect](#getwindowrect)|获取 `CWnd` 的屏幕坐标。|
|[CWnd：： GetWindowRgn](#getwindowrgn)|检索窗口的窗口区域的副本。|
|[CWnd：： GetWindowText](#getwindowtext)|返回窗口文本或标题（如果有）。|
|[CWnd：： GetWindowTextLength](#getwindowtextlength)|返回窗口文本或标题的长度。|
|[CWnd：： HideCaret](#hidecaret)|通过从显示屏幕中移除来隐藏插入符号。|
|[CWnd：： HiliteMenuItem](#hilitemenuitem)|突出显示顶级（菜单栏）菜单项或从顶级（菜单栏）菜单项移除突出显示。|
|[CWnd：： HtmlHelp](#htmlhelp)|调用以启动 HTMLHelp 应用程序。|
|[CWnd：：无效](#invalidate)|使整个工作区无效。|
|[CWnd：： InvalidateRect](#invalidaterect)|通过将给定矩形添加到当前更新区域，使该矩形内的工作区无效。|
|[CWnd：： InvalidateRgn](#invalidatergn)|通过将给定区域添加到当前更新区域，使该区域内的工作区无效。|
|[CWnd：： InvokeHelper](#invokehelper)|调用 ActiveX 控件方法或属性。|
|[CWnd：： IsChild](#ischild)|指示 `CWnd` 是否为指定窗口的子窗口或其他直接子代。|
|[CWnd：： IsD2DSupportEnabled](#isd2dsupportenabled)|确定是否启用 D2D 支持。|
|[CWnd：： IsDialogMessage](#isdialogmessage)|确定给定消息是否用于无模式对话框，如果是，则处理它。|
|[CWnd：： IsDlgButtonChecked](#isdlgbuttonchecked)|确定是否选中按钮控件。|
|[CWnd：： IsDynamicLayoutEnabled](#isdynamiclayoutenabled)|确定是否在此窗口上启用动态布局。 如果启用动态布局，则子窗口的位置和大小可以在用户调整父窗口大小时进行更改。|
|[CWnd：： IsIconic](#isiconic)|确定 `CWnd` 是否进行最小化（图标化）。|
|[CWnd：： IsTouchWindow](#istouchwindow)|指定 `CWnd` 是否具有触摸支持。|
|[CWnd：： IsWindowEnabled](#iswindowenabled)|确定是否针对鼠标和键盘输入启用窗口。|
|[CWnd：： IsWindowVisible](#iswindowvisible)|确定窗口是否可见。|
|[CWnd：： IsZoomed](#iszoomed)|确定 `CWnd` 是否进行最大化。|
|[CWnd：： KillTimer](#killtimer)|终止系统计时器。|
|[CWnd：： LockWindowUpdate](#lockwindowupdate)|在给定窗口中禁用或重新启用绘制。|
|[CWnd：： MapWindowPoints](#mapwindowpoints)|将一组点从 `CWnd` 的坐标空间转换（映射）到另一个窗口的坐标空间。|
|[CWnd：： MessageBox](#messagebox)|创建并显示包含应用程序提供的消息和标题的窗口。|
|[CWnd：： ModifyStyle](#modifystyle)|修改当前窗口样式。|
|[CWnd：： ModifyStyleEx](#modifystyleex)|修改窗口的扩展样式。|
|[CWnd：： MoveWindow](#movewindow)|更改 `CWnd` 的位置和尺寸。|
|[CWnd：： NotifyWinEvent](#notifywinevent)|向系统发出信号，指出发生了预定义事件。|
|[CWnd：： OnAmbientProperty](#onambientproperty)|实现环境属性值。|
|[CWnd：： OnDrawIconicThumbnailOrLivePreview](#ondrawiconicthumbnailorlivepreview)|由框架在需要获取要在 Windows 7 选项卡缩略图上或客户端上（进行应用程序速览）显示的位图时进行调用。|
|[CWnd：： OnHelp](#onhelp)|处理应用程序中的 F1 帮助（使用当前上下文）。|
|[CWnd：： OnHelpFinder](#onhelpfinder)|处理 ID_HELP_FINDER 和 ID_DEFAULT_HELP 命令。|
|[CWnd：： OnHelpIndex](#onhelpindex)|处理 ID_HELP_INDEX 命令并提供默认帮助主题。|
|[CWnd：： OnHelpUsing](#onhelpusing)|处理 ID_HELP_USING 命令。|
|[CWnd：： OnToolHitTest](#ontoolhittest)|确定点是否在指定工具的边框内并检索有关此工具的信息。|
|[CWnd：： OpenClipboard](#openclipboard)|打开剪贴板。 在调用 Windows [CloseClipboard](/windows/win32/api/winuser/nf-winuser-closeclipboard)函数之前，其他应用程序将不能修改剪贴板。|
|[CWnd：:P aintWindowlessControls](#paintwindowlesscontrols)|在控件容器上绘制无窗口控件。|
|[CWnd：:P ostMessage](#postmessage)|将消息置于应用程序队列中，然后返回而不等待窗口处理该消息。|
|[CWnd：:P reCreateWindow](#precreatewindow)|在创建附加到此 `CWnd` 对象的 Windows 窗口之前调用。|
|[CWnd：:P reSubclassWindow](#presubclasswindow)|允许在调用[SubclassWindow](#subclasswindow)之前执行其他必要的子类。|
|[CWnd：:P reTranslateMessage](#pretranslatemessage)|由 `CWinApp` 用于在窗口消息调度到 `TranslateMessage` 和 `DispatchMessage` Windows 函数之前筛选它们。|
|[CWnd：:P rint](#print)|在指定设备上下文中绘制当前窗口。|
|[CWnd：:P rintClient](#printclient)|在指定设备上下文（通常是打印机设备上下文）中绘制任何窗口。|
|[CWnd：:P rintWindow](#printwindow)|将可视窗口复制到指定设备上下文（通常是打印机设备上下文）。|
|[CWnd：： RedrawWindow](#redrawwindow)|更新工作区中的指定矩形或区域。|
|[CWnd：： RegisterTouchWindow](#registertouchwindow)|注册/注销窗口 Windows 触摸支持。|
|[CWnd：： ReleaseDC](#releasedc)|释放客户端和窗口设备上下文，从而使它们可供其他应用程序使用。|
|[CWnd：： RepositionBars](#repositionbars)|在工作区中重新定位控件条。|
|[CWnd：： Runmodalloop 调用](#runmodalloop)|为处于模式状态的窗口检索、转换或调度消息。|
|[CWnd：： ScreenToClient](#screentoclient)|将显示中的给定点或矩形的屏幕坐标转换为客户端坐标。|
|[CWnd：： ScrollWindow](#scrollwindow)|滚动工作区的内容。|
|[CWnd：： ScrollWindowEx](#scrollwindowex)|滚动工作区的内容。 类似于 `ScrollWindow`，不过具有附加功能。|
|[CWnd：： SendChildNotifyLastMsg](#sendchildnotifylastmsg)|从父窗口向子窗口提供通知消息，以便子窗口可以处理任务。|
|[CWnd：： SendDlgItemMessage](#senddlgitemmessage)|将消息发送到指定控件。|
|[CWnd：： SendMessage](#sendmessage)|将消息发送到 `CWnd` 对象并且不返回，直到它处理了消息。|
|[CWnd：： SendMessageToDescendants](#sendmessagetodescendants)|将消息发送到窗口的所有子代窗口。|
|[CWnd：： SendNotifyMessage](#sendnotifymessage)|将指定消息发送到窗口并尽快返回，具体取决于调用线程是否创建了窗口。|
|[CWnd：： SetActiveWindow](#setactivewindow)|激活窗口。|
|[CWnd：： SetCapture](#setcapture)|使所有后续鼠标输入都发送到 `CWnd`。|
|[CWnd：： SetCaretPos](#setcaretpos)|将插入符号移动到指定位置。|
|[CWnd：： SetClipboardViewer](#setclipboardviewer)|将 `CWnd` 添加到每当剪贴板内容发生更改时便会收到通知的窗口的链。|
|[CWnd：： SetDlgCtrlID](#setdlgctrlid)|为窗口（可以是任何子窗口，而不仅是对话框中的控件）设置窗口或控件 ID。|
|[CWnd：： SetDlgItemInt](#setdlgitemint)|将控件的文本设置为表示整数值的字符串。|
|[CWnd：： SetDlgItemText](#setdlgitemtext)|在指定对话框中设置控件的标题或文本。|
|[CWnd：： SetFocus](#setfocus)|声明输入焦点。|
|[CWnd：： SetFont](#setfont)|设置当前字体。|
|[CWnd：： SetForegroundWindow](#setforegroundwindow)|将创建窗口的线程置于前台，并激活窗口。|
|[CWnd：： SetIcon](#seticon)|设置特定图标的句柄。|
|[CWnd：： SetLayeredWindowAttributes](#setlayeredwindowattributes)|设置分层窗口的不透明度和透明度颜色键。|
|[CWnd：： SetMenu](#setmenu)|将菜单设置为指定菜单。|
|[CWnd：： SetOwner](#setowner)|更改 `CWnd` 的所有者。|
|[CWnd：： SetParent](#setparent)|更改父窗口。|
|[CWnd：： SetProperty](#setproperty)|设置 ActiveX 控件属性。|
|[CWnd：： SetRedraw](#setredraw)|允许重绘 `CWnd` 中的更改，或阻止重绘更改。|
|[CWnd：： SetScrollInfo](#setscrollinfo)|设置有关滚动条的信息。|
|[CWnd：： SetScrollPos](#setscrollpos)|设置滚动框的当前位置，并且（如果指定）重绘滚动条以反映新位置。|
|[CWnd：： SetScrollRange](#setscrollrange)|设置给定滚动条的最小和最大位置值。|
|[CWnd：： SetTimer](#settimer)|安装一个系统计时器，用于在触发时发送[WM_TIMER](#ontimer)消息。|
|[CWnd：： SetWindowContextHelpId](#setwindowcontexthelpid)|设置帮助上下文标识符。|
|[CWnd：： SetWindowPlacement](#setwindowplacement)|设置窗口的显示状态以及正常（已还原）、最小化和最大化位置。|
|[CWnd：： SetWindowPos](#setwindowpos)|更改子窗口、弹出窗口和顶级窗口的大小、位置和的顺序。|
|[CWnd：： SetWindowRgn](#setwindowrgn)|设置窗口的区域。|
|[CWnd：： SetWindowText](#setwindowtext)|将窗口文本或标题（如果有）设置为指定文本。|
|[CWnd：： ShowCaret](#showcaret)|在显示上插入符号的当前位置处显示插入符号。 显示之后，插入符号开始自动闪烁。|
|[CWnd：： ShowOwnedPopups](#showownedpopups)|显示或隐藏窗口所拥有的所有弹出窗口。|
|[CWnd：： ShowScrollBar](#showscrollbar)|显示或隐藏滚动条。|
|[CWnd：： ShowWindow](#showwindow)|显示或隐藏窗口。|
|[CWnd：： SubclassDlgItem](#subclassdlgitem)|将 Windows 控件附加到 `CWnd` 对象，并使它通过 `CWnd` 的消息映射来路由消息。|
|[CWnd：： SubclassWindow](#subclasswindow)|将窗口附加到 `CWnd` 对象，并使它通过 `CWnd` 的消息映射来路由消息。|
|[CWnd：： UnlockWindowUpdate](#unlockwindowupdate)|解锁使用 `CWnd::LockWindowUpdate` 锁定的窗口。|
|[CWnd：： UnsubclassWindow](#unsubclasswindow)|从 `CWnd` 对象分离窗口|
|[CWnd：： UpdateData](#updatedata)|从对话框初始化或检索数据。|
|[CWnd：： UpdateDialogControls](#updatedialogcontrols)|调用以更新对话框按钮和其他控件的状态。|
|[CWnd：： UpdateLayeredWindow](#updatelayeredwindow)|更新分层窗口的位置、大小、形状、内容和透明度。|
|[CWnd：： UpdateWindow](#updatewindow)|更新工作区。|
|[CWnd：： ValidateRect](#validaterect)|通过从当前更新区域移除给定矩形，来验证该矩形内的工作区。|
|[CWnd：： ValidateRgn](#validatergn)|通过从当前更新区域移除给定区域，来验证该区域内的工作区。|
|[CWnd：： WindowFromPoint](#windowfrompoint)|标识包含给定点的窗口。|
|[CWnd：： WinHelp](#winhelp)|调用以启动 WinHelp 应用程序。|

### <a name="protected-methods"></a>受保护方法

|名称|说明|
|----------|-----------------|
|[CWnd：:D 默认](#default)|调用默认窗口过程，该过程为应用程序不处理的任何窗口消息提供默认处理。|
|[CWnd：:D efWindowProc](#defwindowproc)|调用默认窗口过程，该过程为应用程序不处理的任何窗口消息提供默认处理。|
|[CWnd：:D oDataExchange](#dodataexchange)|用于对话框数据交换和验证。 由 `UpdateData` 调用。|
|[CWnd：： GetCurrentMessage](#getcurrentmessage)|返回指向此窗口当前正在处理的消息的指针。 只应在 `On`*消息*消息处理程序成员函数中调用。|
|[CWnd：： InitDynamicLayout](#initdynamiclayout)|由框架调用以初始化窗口的动态布局。|
|[CWnd：： LoadDynamicLayoutResource](#loaddynamiclayoutresource)|从资源文件加载动态布局信息。|
|[CWnd：： OnActivate](#onactivate)|当正在激活或停用 `CWnd` 时调用。|
|[CWnd：： OnActivateApp](#onactivateapp)|要激活或停用应用程序时调用。|
|[CWnd：： OnAppCommand](#onappcommand)|当用户生成应用程序命令事件时调用。|
|[CWnd：： OnAskCbFormatName](#onaskcbformatname)|由剪贴板查看器应用程序在剪贴板所有者显示剪贴板内容时调用。|
|[CWnd：： OnCancelMode](#oncancelmode)|调用以允许 `CWnd` 取消任何内部模式（如鼠标捕获）。|
|[CWnd：： OnCaptureChanged](#oncapturechanged)|将消息发送到要失去鼠标捕获的窗口。|
|[CWnd：： OnChangeCbChain](#onchangecbchain)|通知正在从链中移除指定窗口。|
|[CWnd：： OnChangeUIState](#onchangeuistate)|在应更改用户界面 (UI) 状态时调用。|
|[CWnd：： OnChar](#onchar)|当击键转换为非系统字符时调用。|
|[CWnd：： OnCharToItem](#onchartoitem)|由具有[LBS_WANTKEYBOARDINPUT](../../mfc/reference/styles-used-by-mfc.md#list-box-styles)样式的子列表框调用以响应[WM_CHAR](#onchar)消息。|
|[CWnd：： OnChildActivate](#onchildactivate)|每当 `CWnd` 大小或位置更改或 `CWnd` 激活时，针对多文档界面 (MDI) 子窗口进行调用。|
|[CWnd：： OnChildNotify](#onchildnotify)|由父窗口调用以使通知控件有机会响应控件通知。|
|[CWnd：： OnClipboardUpdate](#onclipboardupdate)|在剪贴板内容已更改时调用。|
|[CWnd：： OnClose](#onclose)|作为指示 `CWnd` 应关闭的信号进行调用。|
|[CWnd：： OnColorizationColorChanged](#oncolorizationcolorchanged)|在非工作区的呈现策略已更改时调用。|
|[CWnd：： OnCommand](#oncommand)|当用户选择命令时调用。|
|[CWnd：： OnCompacting](#oncompacting)|当 Windows 检测到系统内存不足时调用。|
|[CWnd：： OnCompareItem](#oncompareitem)|调用以确定新项在子所有者描述组合框或列表框中的相对位置。|
|[CWnd：： OnCompositionChanged](#oncompositionchanged)|在桌面窗口管理器 (DWM) 组合已启用或已禁用时针对所有顶级窗口进行调用。|
|[CWnd：： OnContextMenu](#oncontextmenu)|当用户窗口中单击鼠标右键时调用。|
|[CWnd：： OnCopyData](#oncopydata)|将数据从一个应用程序复制到另一个应用程序。|
|[CWnd：： OnCreate](#oncreate)|在窗口创建过程中调用。|
|[CWnd：： OnCtlColor](#onctlcolor)|如果 `CWnd` 在要绘制控件时是控件的父级，则进行调用。|
|[CWnd：： OnDeadChar](#ondeadchar)|当击键转换为非系统语音符号字符（如重音字符）时调用。|
|[CWnd：： OnDeleteItem](#ondeleteitem)|当销毁所有者描述子列表框或组合框时，或是当从控件中移除项时调用。|
|[CWnd：： OnDestroy](#ondestroy)|当销毁 `CWnd` 时调用。|
|[CWnd：： OnDestroyClipboard](#ondestroyclipboard)|当通过调用 Windows [EmptyClipboard](/windows/win32/api/winuser/nf-winuser-emptyclipboard)函数清空剪贴板时调用。|
|[CWnd：： OnDeviceChange](#ondevicechange)|向应用程序或设备驱动程序通知设备或计算机的硬件配置已更改。|
|[CWnd：： OnDevModeChange](#ondevmodechange)|当用户更改设备模式设置时针对所有顶级窗口进行调用。|
|[CWnd：： OnDrawClipboard](#ondrawclipboard)|当剪贴板内容已更改时调用。|
|[CWnd：： OnDrawItem](#ondrawitem)|当需要绘制所有者描述子按钮控件、组合框控件、列表框控件或菜单的可视方面时调用。|
|[CWnd：： OnDropFiles](#ondropfiles)|当用户在已将自己注册为拖放文件接收者的窗口上方释放鼠标左键时调用。|
|[CWnd：： OnEnable](#onenable)|当启用或禁用 `CWnd` 时调用。|
|[CWnd：： OnEndSession](#onendsession)|当会话结束时调用。|
|[CWnd：： OnEnterIdle](#onenteridle)|调用以向应用程序的主窗口过程通知模式对话框或菜单正在进入空闲状态。|
|[CWnd：： OnEnterMenuLoop](#onentermenuloop)|当进入了菜单模式循环时调用。|
|[CWnd：： OnEnterSizeMove](#onentersizemove)|在受影响的窗口进入移动或大小调整模式循环之后调用。|
|[CWnd：： OnEraseBkgnd](#onerasebkgnd)|当窗口背景需要擦除时调用。|
|[CWnd：： OnExitMenuLoop](#onexitmenuloop)|当退出了菜单模式循环时调用。|
|[CWnd：： OnExitSizeMove](#onexitsizemove)|在受影响的窗口退出移动或大小调整模式循环之后调用。|
|[CWnd：： OnFontChange](#onfontchange)|当字体资源池更改时调用。|
|[CWnd：： OnGetDlgCode](#ongetdlgcode)|针对控件进行调用，以便控件可以自己处理箭头键和 TAB 键输入。|
|[CWnd：： OnGetMinMaxInfo](#ongetminmaxinfo)|每当 Windows 需要知道最大化位置或尺寸或是最小或最大跟踪大小时调用。|
|[CWnd：： OnHelpInfo](#onhelpinfo)|当用户按 F1 键时，由框架调用。|
|[CWnd：： OnHotKey](#onhotkey)|当用户按系统范围热键时调用。|
|[CWnd：： OnHScroll](#onhscroll)|当用户单击 `CWnd` 的水平滚动条时调用。|
|[CWnd：： OnHScrollClipboard](#onhscrollclipboard)|当剪贴板所有者应滚动剪贴板图像、使相应部分失效以及更新滚动条值时调用。|
|[CWnd：： OnIconEraseBkgnd](#oniconerasebkgnd)|当 `CWnd` 已最小化（图标化）并且必须在绘制图标之前填充图标背景时调用。|
|[CWnd：： OnInitMenu](#oninitmenu)|当菜单要成为活动状态时调用。|
|[CWnd：： OnInitMenuPopup](#oninitmenupopup)|当弹出菜单要成为活动状态时调用。|
|[CWnd：： OnInputDeviceChange](#oninputdevicechange)|当在系统中添加或移除 I/O 设备时调用。|
|[CWnd：： OnInputLangChange](#oninputlangchange)|在应用程序的输入语言已更改之后调用。|
|[CWnd：： OnInputLangChangeRequest](#oninputlangchangerequest)|当用户选择新输入语言时调用。|
|[CWnd：： OnKeyDown](#onkeydown)|当按下非系统键时调用。|
|[CWnd：： OnKeyUp](#onkeyup)|当释放非系统键时调用。|
|[CWnd：： OnKillFocus](#onkillfocus)|恰好在 `CWnd` 失去输入焦点之前调用。|
|[CWnd：： OnLButtonDblClk](#onlbuttondblclk)|当用户双击鼠标左键时调用。|
|[CWnd：： OnLButtonDown](#onlbuttondown)|当用户按下鼠标左键时调用。|
|[CWnd：： OnLButtonUp](#onlbuttonup)|当用户释放鼠标左键时调用。|
|[CWnd：： OnMButtonDblClk](#onmbuttondblclk)|当用户双击鼠标中键时调用。|
|[CWnd：： OnMButtonDown](#onmbuttondown)|当用户按下鼠标中键时调用。|
|[CWnd：： OnMButtonUp](#onmbuttonup)|当用户释放鼠标中键时调用。|
|[CWnd：： OnMDIActivate](#onmdiactivate)|当激活或停用 MDI 子窗口时调用。|
|[CWnd：： OnMeasureItem](#onmeasureitem)|创建控件时针对所有者描述子组合框、列表框或菜单项进行调用。 `CWnd` 向 Windows 通知控件的尺寸。|
|[CWnd：： OnMenuChar](#onmenuchar)|当用户按下不与当前菜单中任何预定义助记键匹配的菜单助记键字符时调用。|
|[CWnd：： OnMenuDrag](#onmenudrag)|当用户开始拖动菜单项时调用。|
|[CWnd：： OnMenuGetObject](#onmenugetobject)|当鼠标光标进入菜单项或从该项的中心移动到该项的顶部或底部时调用。|
|[CWnd：： OnMenuRButtonUp](#onmenurbuttonup)|当光标位于菜单项上并且用户释放鼠标右键时调用。|
|[CWnd：： OnMenuSelect](#onmenuselect)|当用户选择菜单项时调用。|
|[CWnd：： OnMouseActivate](#onmouseactivate)|当光标处于非活动窗口中并且用户按下鼠标按钮时调用。|
|[CWnd：： OnMouseHover](#onmousehover)|当光标悬停在窗口的工作区上，在之前对[TrackMouseEvent](/windows/win32/api/winuser/nf-winuser-trackmouseevent)的调用中指定的时间段内进行调用。|
|[CWnd：： OnMouseHWheel](#onmousehwheel)|当前窗口由桌面窗口管理器 (DWM) 构造，并且该窗口已最大化时调用。|
|[CWnd：： OnMouseLeave](#onmouseleave)|当光标离开在先前对[TrackMouseEvent](/windows/win32/api/winuser/nf-winuser-trackmouseevent)的调用中指定的窗口的工作区时调用。|
|[CWnd：： OnMouseMove](#onmousemove)|当鼠标光标移动时调用。|
|[CWnd：： OnMouseWheel](#onmousewheel)|当用户旋转鼠标滚轮时调用。 使用 Windows NT 4.0 消息处理。|
|[CWnd：： OnMove](#onmove)|在 `CWnd` 的位置已更改之后调用。|
|[CWnd：： OnMoving](#onmoving)|指示用户正在移动 `CWnd` 对象。|
|[CWnd：： OnNcActivate](#onncactivate)|当需要更改非工作区以指示活动或非活动状态时调用。|
|[CWnd：： OnNcCalcSize](#onnccalcsize)|当需要计算工作区的大小和位置时调用。|
|[CWnd：： OnNcCreate](#onnccreate)|当正在创建非工作区时在[OnCreate](#oncreate)之前调用。|
|[CWnd：： OnNcDestroy](#onncdestroy)|当销毁非工作区时调用。|
|[CWnd：： OnNcHitTest](#onnchittest)|每当如果 `CWnd` 包含光标或使用 `SetCapture` 捕获了鼠标输入便移动鼠标时调用。|
|[CWnd：： OnNcLButtonDblClk](#onnclbuttondblclk)|当用户在光标处于 `CWnd` 的非工作区期间双击鼠标左键时调用。|
|[CWnd：： OnNcLButtonDown](#onnclbuttondown)|当用户在光标处于 `CWnd` 的非工作区期间按下鼠标左键时调用。|
|[CWnd：： OnNcLButtonUp](#onnclbuttonup)|当用户在光标处于 `CWnd` 的非工作区期间释放鼠标左键时调用。|
|[CWnd：： OnNcMButtonDblClk](#onncmbuttondblclk)|当用户在光标处于 `CWnd` 的非工作区期间双击鼠标中键时调用。|
|[CWnd：： OnNcMButtonDown](#onncmbuttondown)|当用户在光标处于 `CWnd` 的非工作区期间按下鼠标中键时调用。|
|[CWnd：： OnNcMButtonUp](#onncmbuttonup)|当用户在光标处于 `CWnd` 的非工作区期间释放鼠标中键时调用。|
|[CWnd：： OnNcMouseHover](#onncmousehover)|当光标在窗口的非工作区上悬停在之前对[TrackMouseEvent](/windows/win32/api/winuser/nf-winuser-trackmouseevent)的调用中指定的时间段时调用。|
|[CWnd：： OnNcMouseLeave](#onncmouseleave)|当光标离开在先前对[TrackMouseEvent](/windows/win32/api/winuser/nf-winuser-trackmouseevent)的调用中指定的窗口非工作区时，框架将调用此成员函数。|
|[CWnd：： OnNcMouseMove](#onncmousemove)|当在 `CWnd` 的非工作区中移动光标时调用。|
|[CWnd：： OnNcPaint](#onncpaint)|当需要绘制非工作区时调用。|
|[CWnd：： OnNcRButtonDblClk](#onncrbuttondblclk)|当用户在光标处于 `CWnd` 的非工作区期间双击鼠标右键时调用。|
|[CWnd：： OnNcRButtonDown](#onncrbuttondown)|当用户在光标处于 `CWnd` 的非工作区期间按下鼠标右键时调用。|
|[CWnd：： OnNcRButtonUp](#onncrbuttonup)|当用户在光标处于 `CWnd` 的非工作区期间释放鼠标右键时调用。|
|[CWnd：： OnNcRenderingChanged](#onncrenderingchanged)|在非工作区的呈现策略已更改时调用。|
|[CWnd：： OnNcXButtonDblClk](#onncxbuttondblclk)|当用户在光标位于窗口非工作区期间双击 XBUTTON1 或 XBUTTON2 时调用。|
|[CWnd：： OnNcXButtonDown](#onncxbuttondown)|当用户在光标位于窗口非工作区期间按下鼠标的 XBUTTON1 或 XBUTTON2 时调用。|
|[CWnd：： OnNcXButtonUp](#onncxbuttonup)|当用户在光标位于窗口非工作区期间释放鼠标的 XBUTTON1 或 XBUTTON2 时调用。|
|[CWnd：： OnNextMenu](#onnextmenu)|当使用向右或向左箭头键在菜单栏和系统菜单之间切换时调用。|
|[CWnd：： OnNotify](#onnotify)|由框架调用以通知父窗口，在其某个控件上发生事件或该控件需要信息。|
|[CWnd：： OnNotifyFormat](#onnotifyformat)|调用以确定当前窗口是否接受 WM_NOTIFY 通知消息中的 ANSI 或 Unicode 结构。|
|[CWnd：： OnPaint](#onpaint)|调用以重新绘制窗口的一部分。|
|[CWnd：： OnPaintClipboard](#onpaintclipboard)|当剪贴板查看器的工作区需要重新绘制时调用。|
|[CWnd：： OnPaletteChanged](#onpalettechanged)|调用以允许使用调色板的窗口实现其逻辑调色板并更新其工作区。|
|[CWnd：： OnPaletteIsChanging](#onpaletteischanging)|当某个应用程序要实现其逻辑调色板时，通知其他应用程序。|
|[CWnd：： OnParentNotify](#onparentnotify)|当创建或销毁子窗口时，或是当用户在光标位于子窗口上方期间单击鼠标按钮时调用。|
|[CWnd：： Onpowerbroadcast 签名](#onpowerbroadcast)|当电源管理事件发生时调用。|
|[CWnd：： OnQueryDragIcon](#onquerydragicon)|当用户要拖动最小化（图标化）的 `CWnd` 时调用。|
|[CWnd：： OnQueryEndSession](#onqueryendsession)|当用户选择结束 Windows 会话时调用。|
|[CWnd：： OnQueryNewPalette](#onquerynewpalette)|向 `CWnd` 告知它要接收输入焦点。|
|[CWnd：： OnQueryOpen](#onqueryopen)|当 `CWnd` 是图标并且用户请求打开该图标时调用。|
|[CWnd：： OnQueryUIState](#onqueryuistate)|调用以检索窗口的用户界面 (UI) 状态。|
|[CWnd：： OnRawInput](#onrawinput)|当前窗口中获取原始输入时调用。|
|[CWnd：： OnRButtonDblClk](#onrbuttondblclk)|当用户双击鼠标右键时调用。|
|[CWnd：： OnRButtonDown](#onrbuttondown)|当用户按下鼠标右键时调用。|
|[CWnd：： OnRButtonUp](#onrbuttonup)|当用户释放鼠标右键时调用。|
|[CWnd：： OnRenderAllFormats](#onrenderallformats)|当所有者应用程序正在销毁并且需要呈现其所有格式时调用。|
|[CWnd：： OnRenderFormat](#onrenderformat)|当需要呈现具有延迟呈现的特定格式时，针对剪贴板所有者进行调用。|
|[CWnd：： OnSessionChange](#onsessionchange)|调用以向应用程序通知会话状态已更改。|
|[CWnd：： OnSetCursor](#onsetcursor)|如果鼠标输入未捕获并且鼠标使光标在光标中移动，则调用。|
|[CWnd：： OnSetFocus](#onsetfocus)|在 `CWnd` 获取输入焦点之后调用。|
|[CWnd：： OnSettingChange](#onsettingchange)|当 Win32 `SystemParametersInfo` 函数更改系统范围设置时调用。|
|[CWnd：： OnShowWindow](#onshowwindow)|当 `CWnd` 要显示或隐藏时调用。|
|[CWnd：： OnSize](#onsize)|在 `CWnd` 的大小已更改之后调用。|
|[CWnd：： OnSizeClipboard](#onsizeclipboard)|当剪贴板查看器窗口工作区的大小已更改时调用。|
|[CWnd：： OnSizing](#onsizing)|指示用户正在调整矩形大小。|
|[CWnd：： OnSpoolerStatus](#onspoolerstatus)|每当对打印管理器队列添加或移除作业时，从打印管理器调用。|
|[CWnd：： OnStyleChanged](#onstylechanged)|指示[SetWindowLong](/windows/win32/api/winuser/nf-winuser-setwindowlongw) Windows 函数已更改一个或多个窗口样式。|
|[CWnd：： OnStyleChanging](#onstylechanging)|指示[SetWindowLong](/windows/win32/api/winuser/nf-winuser-setwindowlongw) Windows 函数将更改一个或多个窗口样式。|
|[CWnd：： OnSysChar](#onsyschar)|当击键转换为系统字符时调用。|
|[CWnd：： OnSysColorChange](#onsyscolorchange)|当在系统颜色设置中进行更改时，针对所有顶级窗口进行调用。|
|[CWnd：： OnSysCommand](#onsyscommand)|当用户从控件菜单中选择命令时，或是当用户选择最大化或最小化按钮时调用。|
|[CWnd：： OnSysDeadChar](#onsysdeadchar)|当击键转换为系统语音符号字符（如重音字符）时调用。|
|[CWnd：： OnSysKeyDown](#onsyskeydown)|当用户按住 ALT 键，然后按下另一个键时调用。|
|[CWnd：： OnSysKeyUp](#onsyskeyup)|当用户释放在按住 ALT 键的同时按下的键时调用。|
|[CWnd：： OnTCard](#ontcard)|当用户单击可创作的按钮时调用。|
|[CWnd：： OnTimeChange](#ontimechange)|在系统时间更改之后针对所有顶级窗口进行调用。|
|[CWnd：： OnTimer](#ontimer)|在[SetTimer](#settimer)中指定的每个间隔后调用。|
|[CWnd：： OnTouchInput](#ontouchinput)|处理来自 Windows 触摸屏的单个输入。|
|[CWnd：： OnTouchInputs](#ontouchinputs)|处理来自 Windows 触摸屏的输入。|
|[CWnd：： OnUniChar](#onunichar)|当按下键时调用。 也就是说，当前窗口具有键盘焦点，并通过[TranslateMessage](/windows/win32/api/winuser/nf-winuser-translatemessage)函数来转换[WM_KEYDOWN](/windows/win32/inputdev/wm-keydown)消息。|
|[CWnd：： OnUnInitMenuPopup](#onuninitmenupopup)|在下拉菜单或子菜单已销毁时调用。|
|[CWnd：： OnUpdateUIState](#onupdateuistate)|调用以更改指定窗口及其所有子窗口的用户界面 (UI) 状态。|
|[CWnd：： OnUserChanged](#onuserchanged)|在用户登录或注销之后调用。|
|[CWnd：： OnVKeyToItem](#onvkeytoitem)|由 `CWnd` 拥有的列表框调用，以响应[WM_KEYDOWN](#onkeydown)消息。|
|[CWnd：： OnVScroll](#onvscroll)|当用户单击窗口的垂直滚动条时调用。|
|[CWnd：： OnVScrollClipboard](#onvscrollclipboard)|当所有者应滚动剪贴板图像、使相应部分失效以及更新滚动条值时调用。|
|[CWnd：： OnWindowPosChanged](#onwindowposchanged)|当由于调用[SetWindowPos](#setwindowpos)或另一个窗口管理函数而更改了大小、位置或 Z 顺序时调用。|
|[CWnd：： OnWindowPosChanging](#onwindowposchanging)|当由于调用[SetWindowPos](#setwindowpos)或另一个窗口管理函数而要更改大小、位置或 Z 顺序时调用。|
|[CWnd：： OnWinIniChange](#onwininichange)|在 Windows 初始化文件 (WIN.INI) 已更改之后对所有顶级窗口进行调用。|
|[CWnd：： OnWndMsg](#onwndmsg)|指示是否处理了 Windows 消息。|
|[CWnd：： OnXButtonDblClk](#onxbuttondblclk)|当用户在光标位于窗口工作区期间双击 XBUTTON1 或 XBUTTON2 时调用。|
|[CWnd：： OnXButtonDown](#onxbuttondown)|当用户在光标位于窗口工作区期间按下 XBUTTON1 或 XBUTTON2 时调用。|
|[CWnd：： OnXButtonUp](#onxbuttonup)|当用户在光标位于窗口工作区期间释放 XBUTTON1 或 XBUTTON2 时调用。|
|[CWnd：:P ostNcDestroy](#postncdestroy)|此虚函数由默认的[OnNcDestroy](#onncdestroy)函数在销毁窗口后调用。|
|[CWnd：： ReflectChildNotify](#reflectchildnotify)|将消息反射到其源的 Helper 函数。|
|[CWnd：： ReflectLastMsg](#reflectlastmsg)|将最后一个消息反射到子窗口。|
|[CWnd：： ResizeDynamicLayout](#resizedynamiclayout)|如果对窗口启用了动态布局，则窗口大小更改以调整子窗口布局时会通过框架调用。|
|[CWnd：： WindowProc](#windowproc)|为 `CWnd` 提供窗口过程。 默认设置会通过消息映射调度消息。|

### <a name="public-operators"></a>公用運算子

|名称|说明|
|----------|-----------------|
|[CWnd：： operator HWND](#operator_hwnd)|调用以获取窗口的句柄。|
|[CWnd：： operator！ =](#operator_neq)|确定窗口是否与[m_hWnd](#m_hwnd)其句柄的窗口不相同。|
|[CWnd：： operator = =](#operator_eq_eq)|确定窗口是否与[m_hWnd](#m_hwnd)其句柄的窗口相同。|

### <a name="public-data-members"></a>公共数据成员

|名称|说明|
|----------|-----------------|
|[CWnd：： m_hWnd](#m_hwnd)|指示附加到此 `CWnd`的 HWND。|

## <a name="remarks"></a>备注

`CWnd` 对象与 Windows 窗口不同，但这两者紧密相关。 `CWnd` 对象由 `CWnd` 构造函数和析构函数进行创建或销毁。 另一方面，Windows 窗口是 Windows 内部的数据结构，由 `Create` 成员函数创建并由 `CWnd` 的虚拟析构函数销毁。 [DestroyWindow](#destroywindow)函数会销毁 Windows 窗口，而不会销毁对象。

`CWnd` 类和消息映射机制隐藏了 `WndProc` 函数。 传入的 Windows 通知消息会通过消息映射自动路由到正确的<em>消息</em>`CWnd` 成员函数。 重写**On**<em>消息</em>成员函数以便处理派生类中的成员特定消息。

通过 `CWnd` 类还可以为应用程序创建 Windows 子窗口。 从 `CWnd` 派生类，然后将成员变量添加到派生类，以存储特定于应用程序的数据。 可派生类中实现消息处理程序成员函数和消息映射，以指定在消息定向到窗口时所发生的情况。

可采用两个步骤创建子窗口。 首先，调用构造函数 `CWnd` 构造 `CWnd` 对象，然后调用[create](#create)成员函数以创建子窗口，并将其附加到 `CWnd` 对象。

当用户终止子窗口时，销毁 `CWnd` 对象，或调用 `DestroyWindow` 成员函数以移除窗口并销毁其数据结构。

在 Microsoft 基础类库中，从 `CWnd` 派生了更多类以提供特定窗口类型。 其中许多类（包括[CFrameWnd](../../mfc/reference/cframewnd-class.md)、 [CMDIFrameWnd](../../mfc/reference/cmdiframewnd-class.md)、 [CMDIChildWnd](../../mfc/reference/cmdichildwnd-class.md)、 [CView](../../mfc/reference/cview-class.md)和[CDialog](../../mfc/reference/cdialog-class.md)）都是为进一步派生而设计的。 派生自 `CWnd`的控件类（如[CButton](../../mfc/reference/cbutton-class.md)）可以直接使用，也可以用于类的进一步派生。

有关使用 `CWnd`的详细信息，请参阅[框架窗口](../../mfc/frame-windows.md)和[窗口对象](../../mfc/window-objects.md)。

## <a name="inheritance-hierarchy"></a>继承层次结构

[CObject](../../mfc/reference/cobject-class.md)

[CCmdTarget](../../mfc/reference/ccmdtarget-class.md)

`CWnd`

## <a name="requirements"></a>要求

**标头:** afxwin.h

##  <a name="accdodefaultaction"></a>CWnd：： accDoDefaultAction

由框架调用以执行对象的默认操作。

```
virtual HRESULT accDoDefaultAction(VARIANT varChild);
```

### <a name="parameters"></a>parameters

*varChild*<br/>
指定要调用的默认操作是否为对象的对象或对象的一个子元素。 此参数可以是 CHILDID_SELF （用于执行对象的默认操作）或子 ID （用于执行对象的一个子元素的默认操作）。

### <a name="return-value"></a>返回值

如果成功，则返回 S_OK，失败时返回 COM 错误代码。 请参阅在 Windows SDK 中的[IAccessible：： accDoDefaultAction](/windows/win32/api/oleacc/nf-oleacc-iaccessible-accdodefaultaction)中**返回值**。

### <a name="remarks"></a>备注

此函数是 MFC [Active Accessibility](/windows/win32/WinAuto/microsoft-active-accessibility)支持的一部分。

在 `CWnd`派生类中重写此函数以执行对象的默认操作。 有关详细信息，请参阅 Windows SDK 中的[IAccessible：： accDoDefaultAction](/windows/win32/api/oleacc/nf-oleacc-iaccessible-accdodefaultaction) 。

##  <a name="acchittest"></a>CWnd：： accHitTest

由框架调用以检索屏幕上给定点处的子元素或子对象。

```
virtual HRESULT accHitTest(
    long xLeft,
    long yTop,
    VARIANT* pvarChild);
```

### <a name="parameters"></a>parameters

*xLeft*<br/>
要进行点击测试的点的 X 坐标（以屏幕单位表示）。

*yTop*<br/>
要进行点击测试的点的 Y 坐标（以屏幕单位表示）。

*pvarChild*<br/>
接收标识*xLeft*和*yTop*指定点处的对象的信息。 请参阅 Windows SDK 中[IAccessible：： accHitTest](/windows/win32/api/oleacc/nf-oleacc-iaccessible-acchittest)中的*pvarID* 。

### <a name="return-value"></a>返回值

如果成功，则返回 S_OK，失败时返回 COM 错误代码。 请参阅 Windows SDK 中 `IAccessible::accHitTest` 的**返回值**。

### <a name="remarks"></a>备注

此函数是 MFC [Active Accessibility](/windows/win32/WinAuto/microsoft-active-accessibility)支持的一部分。

如果 nonwindowed 用户界面元素（MFC 处理的无窗口 ActiveX 控件除外），请在 `CWnd`派生类中重写此函数。

有关详细信息，请参阅 Windows SDK 中的[IAccessible：： accHitTest](/windows/win32/api/oleacc/nf-oleacc-iaccessible-acchittest) 。

##  <a name="acclocation"></a>CWnd：： accLocation

由框架调用以检索指定对象的当前屏幕位置。

```
virtual HRESULT accLocation(
    long* pxLeft,
    long* pyTop,
    long* pcxWidth,
    long* pcyHeight,
    VARIANT varChild);
```

### <a name="parameters"></a>parameters

*pxLeft*<br/>
接收对象左上角的 x 坐标（在屏幕单位中）。

*pyTop*<br/>
接收对象左上角的 y 坐标（在屏幕单位中）。

*pcxWidth*<br/>
接收对象的宽度（以屏幕单位为单位）。

*pcyHeight*<br/>
接收对象的高度（以屏幕单位为单位）。

*varChild*<br/>
指定要检索的位置是否为对象或对象的一个子元素。 此参数可以是 CHILDID_SELF （获取有关对象的信息）或子级 ID （以获取有关对象的子元素的信息）。

### <a name="return-value"></a>返回值

如果成功，则返回 S_OK，失败时返回 COM 错误代码。 请参阅 Windows SDK 中 `IAccessible::accLocation` 的**返回值**。

### <a name="remarks"></a>备注

如果 nonwindowed 用户界面元素（MFC 处理的无窗口 ActiveX 控件除外），请在 `CWnd`派生类中重写此函数。

有关详细信息，请参阅 Windows SDK 中的 `IAccessible::accLocation`。

##  <a name="accnavigate"></a>CWnd：： accNavigate

由框架调用以移到容器内的另一个用户界面元素，如果可能还检索对象。

```
virtual HRESULT accNavigate(
    long navDir,
    VARIANT varStart,
    VARIANT* pvarEndUpAt);
```

### <a name="parameters"></a>parameters

*navDir*<br/>
指定要导航的方向。 请参阅 Windows SDK 中[IAccessible：： accNavigate](/windows/win32/api/oleacc/nf-oleacc-iaccessible-accnavigate)中的*navDir* 。

*varStart*<br/>
指定起始对象。 请参阅 Windows SDK `IAccessible::accNavigate` 中的*varStart* 。

*pvarEndUpAt*<br/>
接收有关目标用户界面对象的信息。 请参阅 Windows SDK `IAccessible::accNavigate` 中的*pvarEnd* 。

### <a name="return-value"></a>返回值

如果成功，则返回 S_OK，失败时返回 COM 错误代码。 请参阅 Windows SDK 中 `IAccessible::accNavigate` 的**返回值**。

### <a name="remarks"></a>备注

此函数是 MFC [Active Accessibility](/windows/win32/WinAuto/microsoft-active-accessibility)支持的一部分。

如果 nonwindowed 用户界面元素（MFC 处理的无窗口 ActiveX 控件除外），请在 `CWnd`派生类中重写此函数。

有关详细信息，请参阅 Windows SDK 中的[IAccessible：： accNavigate](/windows/win32/api/oleacc/nf-oleacc-iaccessible-accnavigate) 。

##  <a name="accselect"></a>CWnd：： accSelect

由框架调用以修改选定内容或移动指定对象的键盘焦点。

```
virtual HRESULT accSelect(
    long flagsSelect,
    VARIANT varChild);
```

### <a name="parameters"></a>parameters

*flagsSelect*<br/>
指定如何更改当前所选内容或焦点。 请参阅 Windows SDK 中[IAccessible：： accSelect](/windows/win32/api/oleacc/nf-oleacc-iaccessible-accselect)中的*flagsSelect* 。

*varChild*<br/>
指定要选择的对象。 此参数可以是 CHILDID_SELF （选择对象本身），也可以是子 ID （用于选择对象的子项之一）。

### <a name="return-value"></a>返回值

如果成功，则返回 S_OK，失败时返回 COM 错误代码。 请参阅 Windows SDK 中 `IAccessible::accSelect` 的**返回值**。

### <a name="remarks"></a>备注

此函数是 MFC [Active Accessibility](/windows/win32/WinAuto/microsoft-active-accessibility)支持的一部分。

如果 nonwindowed 用户界面元素（MFC 处理的无窗口 ActiveX 控件除外），请在 `CWnd`派生类中重写此函数。

有关详细信息，请参阅 Windows SDK 中的[IAccessible：： accSelect](/windows/win32/api/oleacc/nf-oleacc-iaccessible-accselect) 。

##  <a name="animatewindow"></a>CWnd：： AnimateWindow

在显示或隐藏窗口时产生特殊影响。

```
BOOL AnimateWindow(
    DWORD dwTime,
    DWORD dwFlags);
```

### <a name="parameters"></a>parameters

*dwTime*<br/>
指定播放动画所用的时间（以毫秒为单位）。 通常，动画需要200毫秒才能播放。

dwFlags<br/>
指定动画的类型。 有关可能值的完整列表，请参阅[AnimateWindow](/windows/win32/api/winuser/nf-winuser-animatewindow)。

### <a name="return-value"></a>返回值

如果函数成功，则为非零值；否则为

### <a name="remarks"></a>备注

此成员函数模拟函数[AnimateWindow](/windows/win32/api/winuser/nf-winuser-animatewindow)的功能，如 Windows SDK 中所述。

##  <a name="arrangeiconicwindows"></a>CWnd：： ArrangeIconicWindows

排列所有最小化（图标）子窗口。

```
UINT ArrangeIconicWindows();
```

### <a name="return-value"></a>返回值

如果函数成功，则为一行图标的高度;否则为0。

### <a name="remarks"></a>备注

此成员函数还在桌面窗口上排列图标，这将覆盖整个屏幕。 [GetDesktopWindow](#getdesktopwindow)成员函数检索指向桌面窗口对象的指针。

若要在 MDI 客户端窗口中排列图标 MDI 子窗口，请调用[CMDIFrameWnd：： MDIIconArrange](../../mfc/reference/cmdiframewnd-class.md#mdiiconarrange)。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#66](../../mfc/reference/codesnippet/cpp/cwnd-class_1.cpp)]

##  <a name="attach"></a>CWnd：： Attach

将 Windows 窗口附加到 `CWnd` 的对象。

```
BOOL Attach(HWND hWndNew);
```

### <a name="parameters"></a>parameters

*hWndNew*<br/>
指定 Windows 窗口的句柄。

### <a name="return-value"></a>返回值

如果成功，则不为 0；否则为 0。

### <a name="example"></a>示例

此示例演示如何使用附加和分离映射到 MDI 客户端窗口。

[!code-cpp[NVC_MFCWindowing#67](../../mfc/reference/codesnippet/cpp/cwnd-class_2.h)]

[!code-cpp[NVC_MFCWindowing#68](../../mfc/reference/codesnippet/cpp/cwnd-class_3.cpp)]

[!code-cpp[NVC_MFCWindowing#69](../../mfc/reference/codesnippet/cpp/cwnd-class_4.cpp)]

##  <a name="beginmodalstate"></a>CWnd：： BeginModalState

调用此成员函数以使框架窗口具有模式。

```
virtual void BeginModalState();
```

##  <a name="beginpaint"></a>CWnd：： BeginPaint

准备用于绘制的 `CWnd`，并使用有关绘制的信息填充 `PAINTSTRUCT` 的数据结构。

```
CDC* BeginPaint(LPPAINTSTRUCT lpPaint);
```

### <a name="parameters"></a>parameters

*lpPaint*<br/>
指向接收绘制信息的[PAINTSTRUCT](/windows/win32/api/winuser/ns-winuser-paintstruct)结构。

### <a name="return-value"></a>返回值

标识 `CWnd`的设备上下文。 指针可能是暂时的，不应存储在[EndPaint](#endpaint)的范围之外。

### <a name="remarks"></a>备注

Paint 结构包含一个 RECT 数据结构，该结构包含完全包围更新区域的最小矩形和一个用于指定是否已清除背景的标志。

更新区域由 "[无效](#invalidate)"、" [InvalidateRect](#invalidaterect)" 或 " [InvalidateRgn](#invalidatergn) " 成员函数设置，在其调整大小、移动、创建、滚动或执行影响工作区的任何其他操作之后，由系统设置。 如果更新区域标记为要清除，`BeginPaint` 将发送[WM_ONERASEBKGND](#onerasebkgnd)消息。

除了响应[WM_PAINT](#onpaint)消息以外，请不要调用 `BeginPaint` 成员函数。 对 `BeginPaint` 成员函数的每个调用都必须具有对[EndPaint](#endpaint)成员函数的匹配调用。 如果插入符号位于要绘制的区域，则 `BeginPaint` 成员函数会自动隐藏插入符号，以防止其被擦除。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#70](../../mfc/reference/codesnippet/cpp/cwnd-class_5.cpp)]

##  <a name="binddefaultproperty"></a>CWnd：： BindDefaultProperty

将调用对象的默认简单绑定属性（如编辑控件）绑定到数据源控件的数据源、用户名、密码和 SQL 属性所定义的基础游标，如类型库中所示。

```
void BindDefaultProperty(
    DISPID dwDispID,
    VARTYPE vtProp,
    LPCTSTR szFieldName,
    CWnd* pDSCWnd);
```

### <a name="parameters"></a>parameters

*dwDispID*<br/>
指定要绑定到数据源控件的数据绑定控件上的属性的 DISPID。

*vtProp*<br/>
指定要绑定的属性的类型，例如 VT_BSTR、VT_VARIANT 等。

*szFieldName*<br/>
指定数据源控件所提供的、要将属性绑定到的列的名称。

*pDSCWnd*<br/>
指向承载属性将绑定到的数据源控件的窗口。 调用 `GetDlgItem`，其中包含 DC 的主机窗口的资源 ID 以检索此指针。

### <a name="remarks"></a>备注

调用此函数的 `CWnd` 对象必须是数据绑定控件。

### <a name="example"></a>示例

`BindDefaultProperty` 可用于以下上下文：

[!code-cpp[NVC_MFC_AxDataBinding#2](../../mfc/reference/codesnippet/cpp/cwnd-class_7.cpp)]

##  <a name="bindproperty"></a>CWnd：： BindProperty

将数据绑定控件（如网格控件）上的游标绑定属性绑定到数据源控件，并将该关系注册到 MFC 绑定管理器。

```
void BindProperty(
    DISPID dwDispId,
    CWnd* pWndDSC);
```

### <a name="parameters"></a>parameters

*dwDispId*<br/>
指定要绑定到数据源控件的数据绑定控件上的属性的 DISPID。

*pWndDSC*<br/>
指向承载属性将绑定到的数据源控件的窗口。 调用 `GetDlgItem`，其中包含 DC 的主机窗口的资源 ID 以检索此指针。

### <a name="remarks"></a>备注

调用此函数的 `CWnd` 对象必须是数据绑定控件。

### <a name="example"></a>示例

`BindProperty` 可用于以下上下文：

[!code-cpp[NVC_MFC_AxDataBinding#4](../../mfc/reference/codesnippet/cpp/cwnd-class_9.cpp)]

##  <a name="bringwindowtotop"></a>CWnd：： BringWindowToTop

将 `CWnd` 置于一堆重叠窗口的顶部。

```
void BringWindowToTop();
```

### <a name="remarks"></a>备注

此外，`BringWindowToTop` 将激活弹出的、顶层和 MDI 子窗口。 `BringWindowToTop` 成员函数应用于显露被任何重叠窗口部分或完全遮盖的任意窗口。

此函数只调用 Win32 [BringWindowToTop](/windows/win32/api/winuser/nf-winuser-bringwindowtotop)函数。 调用[SetWindowPos](#setwindowpos)函数以更改窗口在 Z 顺序中的位置。 `BringWindowToTop` 函数不更改窗口样式，即可使其成为顶层窗口。 有关详细信息，请参阅[HWND_TOP 和 HWND_TOPMOST 之间的区别](https://devblogs.microsoft.com/oldnewthing/?p=33263)

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#71](../../mfc/reference/codesnippet/cpp/cwnd-class_10.cpp)]

##  <a name="calcwindowrect"></a>CWnd：： CalcWindowRect

计算可以包含指定客户端矩形的窗口矩形。

```
virtual void CalcWindowRect(
    LPRECT lpClientRect,
    UINT nAdjustType = adjustBorder);
```

### <a name="parameters"></a>parameters

*lpClientRect*<br/>
[in，out]指向矩形结构的指针。 对于输入，此结构包含客户端矩形。 此方法完成后，此结构包含可包含指定客户端矩形的窗口矩形。

*nAdjustType*<br/>
中使用 `CWnd::adjustBorder` 在不使用 WS_EX_CLIENTEDGE 样式的情况下计算窗口坐标;否则，请使用 `CWnd::adjustOutside`。

### <a name="remarks"></a>备注

计算窗口矩形的大小不包括菜单栏的空间。

有关使用限制的详细信息，请参阅[AdjustWindowRectEx](/windows/win32/api/winuser/nf-winuser-adjustwindowrectex)。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#72](../../mfc/reference/codesnippet/cpp/cwnd-class_11.cpp)]

##  <a name="canceltooltips"></a>CWnd：： CancelToolTips

如果当前显示了工具提示，则调用此成员函数以从屏幕中删除工具提示。

```
static void PASCAL CancelToolTips(BOOL bKeys = FALSE);
```

### <a name="parameters"></a>parameters

*bKeys*<br/>
如果为 TRUE，则在按下某个键时取消工具提示，然后将状态栏文本设置为默认值;否则为 FALSE。

### <a name="remarks"></a>备注

> [!NOTE]
> 使用此成员函数对你的代码所管理的工具提示不起作用。 它仅影响由[CWnd：： EnableToolTips](#enabletooltips)管理的工具提示控件。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#73](../../mfc/reference/codesnippet/cpp/cwnd-class_12.cpp)]

##  <a name="centerwindow"></a>CWnd：： CenterWindow

使窗口相对于其父级居中。

```
void CenterWindow(CWnd* pAlternateOwner = NULL);
```

### <a name="parameters"></a>parameters

*pAlternateOwner*<br/>
指向相对于其居中（父窗口除外）的替换窗口的指针。

### <a name="remarks"></a>备注

通常从[CDialog：： OnInitDialog](../../mfc/reference/cdialog-class.md#oninitdialog)调用，以相对于应用程序的主窗口对对话框进行居中。 默认情况下，该函数使子窗口相对于其父窗口进行居中，并使弹出窗口相对于其所有者。 如果弹出窗口不是所拥有的窗口，则该窗口相对于屏幕居中。 若要使窗口相对于不是所有者或父级的特定窗口，可将*pAlternateOwner*参数设置为有效的窗口。 若要强制相对于屏幕居中，请传递[CWnd：： GetDesktopWindow](#getdesktopwindow)返回的值作为*pAlternateOwner*。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#74](../../mfc/reference/codesnippet/cpp/cwnd-class_13.cpp)]

##  <a name="changeclipboardchain"></a>CWnd：： ChangeClipboardChain

从剪贴板查看器链中删除 `CWnd`，并通过*hWndNext*指定的窗口，将其指定为链中 `CWnd` 祖先的后代。

```
BOOL ChangeClipboardChain(HWND hWndNext);
```

### <a name="parameters"></a>parameters

*hWndNext*<br/>
标识位于剪贴板查看器链中 `CWnd` 后面的窗口。

### <a name="return-value"></a>返回值

如果成功，则不为 0；否则为 0。

##  <a name="checkdlgbutton"></a>CWnd：： CheckDlgButton

选择（将复选标记置于旁边）或清除（删除复选标记）按钮，或更改三状态按钮的状态。

```
void CheckDlgButton(
    int nIDButton,
    UINT nCheck);
```

### <a name="parameters"></a>parameters

*nIDButton*<br/>
指定要修改的按钮。

*n*<br/>
指定要执行的操作。 如果*n*为非零值，则 `CheckDlgButton` 成员函数将在该按钮旁放置一个复选标记;如果为0，则删除复选标记。 对于三状态按钮，如果*n*为2，则按钮状态为 "不确定"。

### <a name="remarks"></a>备注

`CheckDlgButton` 函数向指定按钮发送[BM_SETCHECK](/windows/win32/Controls/bm-setcheck)消息。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#75](../../mfc/reference/codesnippet/cpp/cwnd-class_14.cpp)]

##  <a name="checkradiobutton"></a>CWnd：： CheckRadioButton

为组中的给定单选按钮选择（添加复选标记），并清除（删除复选标记）组中的所有其他单选按钮。

```
void CheckRadioButton(
    int nIDFirstButton,
    int nIDLastButton,
    int nIDCheckButton);
```

### <a name="parameters"></a>parameters

*nIDFirstButton*<br/>
指定组中第一个单选按钮的整数标识符。

*nIDLastButton*<br/>
指定组中最后一个单选按钮的整数标识符。

*nIDCheckButton*<br/>
指定要检查的单选按钮的整数标识符。

### <a name="remarks"></a>备注

`CheckRadioButton` 函数向指定的单选按钮发送[BM_SETCHECK](/windows/win32/Controls/bm-setcheck)消息。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#76](../../mfc/reference/codesnippet/cpp/cwnd-class_15.cpp)]

##  <a name="childwindowfrompoint"></a>CWnd：： ChildWindowFromPoint

确定属于 `CWnd` 的子窗口（如果有）包含指定的点。

```
CWnd* ChildWindowFromPoint(POINT point) const;

CWnd* ChildWindowFromPoint(
    POINT point,
    UINT nFlags) const;
```

### <a name="parameters"></a>parameters

*情况*<br/>
指定要测试的点的工作区坐标。

*nflags*<br/>
指定要跳过的子窗口。 此参数可以是下列值的组合：

|值|含义|
|-----------|-------------|
|CWP_ALL|不要跳过任何子窗口|
|CWP_SKIPINVISIBLE|跳过不可见的子窗口|
|CWP_SKIPDISABLED|跳过禁用的子窗口|
|CWP_SKIPTRANSPARENT|跳过透明子窗口|

### <a name="return-value"></a>返回值

标识包含点的子窗口。 如果给定点位于工作区之外，则为 NULL。 如果该点在工作区中，但未包含在任何子窗口内，则返回 `CWnd`。

此成员函数将返回一个隐藏或禁用的子窗口，其中包含指定的点。

多个窗口可能包含给定点。 但是，此函数仅返回包含该点的第一个窗口的 `CWnd`。

返回的 `CWnd`* 可能是临时的，不应存储以供以后使用。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#77](../../mfc/reference/codesnippet/cpp/cwnd-class_16.cpp)]

##  <a name="clienttoscreen"></a>CWnd：： ClientToScreen

将显示中的给定点或矩形的客户端坐标转换为屏幕坐标。

```
void ClientToScreen(LPPOINT lpPoint) const;  void ClientToScreen(LPRECT lpRect) const;
```

### <a name="parameters"></a>parameters

*lpPoint*<br/>
指向一个[点结构](/windows/win32/api/windef/ns-windef-point)或 `CPoint` 对象，该对象包含要转换的客户端坐标。

*lpRect*<br/>
指向一个[RECT 结构](/windows/win32/api/windef/ns-windef-rect)或 `CRect` 对象，其中包含要转换的客户端坐标。

### <a name="remarks"></a>备注

`ClientToScreen` 成员函数使用 `POINT` 或 `RECT` 结构中的客户端坐标，或使用*lpPoint*或*lpRect*指向的 `CPoint` 或 `CRect` 对象来计算新的屏幕坐标;然后，它会将结构中的坐标替换为新坐标。 新屏幕坐标相对于系统显示的左上角。

`ClientToScreen` 成员函数假定给定的点或矩形处于工作区坐标中。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#78](../../mfc/reference/codesnippet/cpp/cwnd-class_17.cpp)]

##  <a name="closewindow"></a>CWnd：： CloseWindow

最小化窗口。

```
void CloseWindow();
```

### <a name="remarks"></a>备注

此成员函数模拟函数[CloseWindow](/windows/win32/api/winuser/nf-winuser-closewindow)的功能，如 Windows SDK 中所述。

##  <a name="continuemodal"></a>CWnd：： ContinueModal

[Runmodalloop 调用](#runmodalloop)调用此成员函数来确定何时应退出模式状态。

```
virtual BOOL ContinueModal();
```

### <a name="return-value"></a>返回值

如果要继续模式循环，则为非零值;如果调用[EndModalLoop](#endmodalloop) ，则为0。

### <a name="remarks"></a>备注

默认情况下，在调用 `EndModalLoop` 之前，它将返回非零值。

##  <a name="create"></a>CWnd：： Create

创建指定的子窗口，并将其附加到[CWnd](../../mfc/reference/cwnd-class.md)对象。

```
virtual BOOL Create(
    LPCTSTR lpszClassName,
    LPCTSTR lpszWindowName,
    DWORD dwStyle,
    Const RECT& rect,
    CWnd* pParentWnd,
    UINT nID,
    CCreateContext* pContext = NULL);
```

### <a name="parameters"></a>parameters

*lpszClassName*<br/>
中指向以 null 结尾的字符串的指针，该字符串包含已注册系统窗口类的名称;或预定义系统窗口类的名称。

*lpszWindowName*<br/>
中指向以 null 结尾的字符串的指针，该字符串包含窗口显示名称;否则为 NULL，表示没有窗口显示名称。

*dwStyle*<br/>
中[窗口样式](styles-used-by-mfc.md#window-styles)的按位组合（OR）。 WS_POPUP 选项不是有效的样式。

*rect*<br/>
中窗口的大小和位置（相对于父窗口的左上角）。

*pParentWnd*<br/>
中指向父窗口的指针。

*nID*<br/>
中窗口的 ID。

*pContext*<br/>
中指向[CCreateContext](../../mfc/reference/ccreatecontext-structure.md)结构的指针，该结构用于自定义应用程序的文档视图结构。

### <a name="return-value"></a>返回值

如果方法成功，则为 TRUE;否则为 FALSE。

### <a name="remarks"></a>备注

> [!WARNING]
> 如果菜单为 NULL，并且样式包含 WS_CHILD，则 `CWnd::PreCreateWindow` 现在将其 `CREATESTRUCT` 参数的 hMenu 成员分配给**this**指针。 要获得正确的功能，请确保对话框控件的 ID 不是 NULL。
>
> 此更改修复了托管/本机互操作方案中的崩溃。 `CWnd::Create` 中的跟踪语句会对问题的开发人员发出警报。

使用[AfxRegisterWndClass](../../mfc/reference/application-information-and-management.md#afxregisterwndclass)函数可注册窗口类。 用户定义的窗口类在注册它们的模块中可用。

[CWnd：： OnCreate](#oncreate)方法在 `Create` 方法返回之前和窗口可见之前被调用。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#79](../../mfc/reference/codesnippet/cpp/cwnd-class_18.cpp)]

##  <a name="createaccessibleproxy"></a>CWnd：： CreateAccessibleProxy

为指定对象创建 Active Accessibility 代理服务器。

```
virtual HRESULT CreateAccessibleProxy(
    WPARAM wParam,
    LPARAM lParam,
    LRESULT* pResult);
```

### <a name="parameters"></a>parameters

*wParam*<br/>
标识 Active Accessibility 代理访问的对象。 可以是下列值之一

|值|含义|
|-----------|-------------|
|OBJID_CLIENT|引用窗口的工作区。|

*lParam*<br/>
提供与消息相关的其他信息。

*pResult*<br/>
指向存储结果代码的 LRESULT 的指针。

### <a name="remarks"></a>备注

为指定对象创建 Active Accessibility 代理服务器。

##  <a name="createcaret"></a>CWnd：： CreateCaret

为系统插入符号和标记的声明所有权创建一个新的形状。

```
void CreateCaret(CBitmap* pBitmap);
```

### <a name="parameters"></a>parameters

*pBitmap*<br/>
标识用于定义插入符号形状的位图。

### <a name="remarks"></a>备注

该位图前面必须已由[CBitmap：： CreateBitmap](../../mfc/reference/cbitmap-class.md#createbitmap)成员函数、 [CreateDIBitmap](/windows/win32/api/wingdi/nf-wingdi-createdibitmap) Windows 函数或[CBitmap：： LoadBitmap](../../mfc/reference/cbitmap-class.md#loadbitmap)成员函数创建。

`CreateCaret` 会自动销毁上一个插入符号形状（如果有），而不考虑哪个窗口拥有插入符号。 创建后，插入符号最初处于隐藏状态。 若要显示插入符号，必须调用[ShowCaret](#showcaret)成员函数。

系统脱字号是共享资源。 `CWnd` 只应在具有输入焦点或处于活动状态时创建一个插入符号。 它应在其丢失输入焦点或变为非活动状态之前销毁插入符号。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#80](../../mfc/reference/codesnippet/cpp/cwnd-class_19.cpp)]

##  <a name="createcontrol"></a>CWnd：： CreateControl

使用此成员函数创建一个 ActiveX 控件，该控件将由 `CWnd` 对象在 MFC 程序中表示。

```
BOOL CreateControl(
    LPCTSTR pszClass,
    LPCTSTR pszWindowName,
    DWORD dwStyle,
    const RECT& rect,
    CWnd* pParentWnd,
    UINT nID,
    CFile* pPersist = NULL,
    BOOL bStorage = FALSE,
    BSTR bstrLicKey = NULL);

BOOL CreateControl(
    REFCLSID clsid,
    LPCTSTR pszWindowName,
    DWORD dwStyle,
    const RECT& rect,
    CWnd* pParentWnd,
    UINT nID,
    CFile* pPersist = NULL,
    BOOL bStorage = FALSE,
    BSTR bstrLicKey = NULL);

BOOL CreateControl(
    REFCLSID clsid,
    LPCTSTR pszWindowName,
    DWORD dwStyle,
    const POINT* ppt,
    const SIZE* psize,
    CWnd* pParentWnd,
    UINT nID,
    CFile* pPersist = NULL,
    BOOL bStorage = FALSE,
    BSTR bstrLicKey = NULL);
```

### <a name="parameters"></a>parameters

*pszClass*<br/>
此字符串可能包含类的 OLE "short name" （ProgID），例如 "CIRC3"。Circ3Ctrl. 1 "。 该名称需要与控件注册的名称相同。 或者，该字符串可能包含 CLSID 的字符串形式，其中包含在大括号中，例如 "{9DBAFCCF-592F-101B-85CE-00608CEC297B}"。 在任一情况下，`CreateControl` 会将字符串转换为相应的类 ID。

*pszWindowName*<br/>
指向要在控件中显示的文本的指针。 设置控件的标题或文本属性的值（如果有）。 如果为 NULL，则不更改控件的 "标题" 或 "文本" 属性。

*dwStyle*<br/>
窗口样式。 可用样式在 "备注" 下列出。

*rect*<br/>
指定控件的大小和位置。 它可以是[CRect](../../atl-mfc-shared/reference/crect-class.md)对象或[RECT 结构](/windows/win32/api/windef/ns-windef-rect)。

*ppt*<br/>
指向一个[点结构](/windows/win32/api/windef/ns-windef-point)或 `CPoint` 包含控件左上角的对象。

*pSize*<br/>
指向包含控件大小的[大小](/windows/win32/api/windef/ns-windef-size)结构或 `CSize` 对象

*pParentWnd*<br/>
指定控件的父窗口。 值不得为 NULL。

*nID*<br/>
指定控件的 ID。

*pPersist*<br/>
指向包含控件持久状态的[CFile](../../mfc/reference/cfile-class.md)的指针。 默认值为 NULL，指示控件将初始化自身，而不从任何持久性存储还原其状态。 如果不为 NULL，则它应为指向 `CFile`派生对象的指针，该对象包含控件的持久性数据（以流或存储的形式）。 此数据可能已在以前的客户端激活中保存。 `CFile` 可以包含其他数据，但在调用 `CreateControl`时，必须将其读写指针设置为永久性数据的第一个字节。

*bStorage*<br/>
指示*pPersist*中的数据是否应解释为 IStorage 或 IStream 数据。 如果*pPersist*中的数据是存储，则*bStorage*应为 TRUE。 如果*pPersist*中的数据是流，则*BSTORAGE*应为 FALSE。 默认值是 FALSE。

*bstrLicKey*<br/>
可选许可证密钥数据。 此数据仅用于创建需要运行时许可证密钥的控件。 如果控件支持授权，则必须提供许可证密钥才能成功创建控件。 默认值为 NULL。

*clsid*<br/>
控件的唯一类 ID。

### <a name="return-value"></a>返回值

如果成功，则不为 0；否则为 0。

### <a name="remarks"></a>备注

`CreateControl` 是[CWnd：： Create](#create)函数的直接模拟，它为 `CWnd`创建窗口。 `CreateControl` 创建 ActiveX 控件而不是普通窗口。

`CreateControl`仅支持部分 Windows *dwStyle*标志：

- WS_VISIBLE 创建一个最初可见的窗口。 如果希望立即显示控件（如普通窗口），则为必需。

- WS_DISABLED 创建一个最初处于禁用状态的窗口。 禁用的窗口无法接收来自用户的输入。 如果控件具有 Enabled 属性，则可以设置。

- WS_BORDER 创建一个具有细线边框的窗口。 如果控件具有 BorderStyle 属性，则可以设置。

- WS_GROUP 指定一组控件的第一个控件。 用户可以使用方向键将键盘焦点从组中的一个控件更改为下一个控件。 在第一个控件属于同一组之后，用 WS_GROUP 样式定义的所有控件。 具有 WS_GROUP 样式的下一个控件将结束组并启动下一组。

- WS_TABSTOP 指定在用户按 TAB 键时可接收键盘焦点的控件。 按 TAB 键会将键盘焦点更改为 WS_TABSTOP 样式的下一个控件。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#81](../../mfc/reference/codesnippet/cpp/cwnd-class_20.h)]

##  <a name="createex"></a>CWnd：： CreateEx

创建指定的窗口并将其附加到 `CWnd` 对象上。

```
virtual BOOL CreateEx(
    DWORD dwExStyle,
    LPCTSTR lpszClassName,
    LPCTSTR lpszWindowName,
    DWORD dwStyle,
    int x,
    int y,
    int nWidth,
    int nHeight,
    HWND hWndParent,
    HMENU nIDorHMenu,
    LPVOID lpParam = NULL);

virtual BOOL CreateEx(
    DWORD dwExStyle,
    LPCTSTR lpszClassName,
    LPCTSTR lpszWindowName,
    DWORD dwStyle,
    const RECT& rect,
    CWnd* pParentWnd,
    UINT nID,
    LPVOID lpParam = NULL);
```

### <a name="parameters"></a>parameters

*dwExStyle*<br/>
[扩展窗口样式](../../mfc/reference/styles-used-by-mfc.md#extended-window-styles)的按位组合（OR）;否则为默认扩展窗口样式的 NULL。

*lpszClassName*<br/>
指向以 null 结尾的字符串的指针，该字符串包含已注册系统窗口类的名称;或预定义系统窗口类的名称。

*lpszWindowName*<br/>
指向以 null 结尾的字符串的指针，该字符串包含窗口显示名称;否则为 NULL，表示没有窗口显示名称。

*dwStyle*<br/>
[窗口样式](styles-used-by-mfc.md#window-styles)的按位组合（OR）;否则，默认窗口样式为 NULL。

*x*<br/>
窗口的左边缘或父窗口的初始水平距离。

*y*<br/>
窗口顶部或父窗口的初始垂直距离。

*nWidth*<br/>
窗口的宽度（以像素为单位）。

*nHeight*<br/>
窗口的高度（以像素为单位）。

*hwndParent*<br/>
对于子窗口，则为父窗口的句柄;否则，如果该窗口有所有者，则为所有者窗口的句柄。

*nIDorHMenu*<br/>
对于子窗口，则为窗口 ID;否则为窗口的菜单 ID。

*lpParam*<br/>
指向传递到*lpCreateParams*字段中[CWnd：： OnCreate](#oncreate)方法的用户数据的指针。

*rect*<br/>
窗口相对于屏幕或父窗口的大小和位置。

*pParentWnd*<br/>
对于子窗口，则为指向父窗口的指针;否则，如果窗口有所有者，则指向所有者窗口的指针。

*nID*<br/>
对于子窗口，则为窗口 ID;否则为窗口的菜单 ID。

### <a name="return-value"></a>返回值

如果方法成功，则为 TRUE;否则为 FALSE。

### <a name="remarks"></a>备注

> [!WARNING]
> 如果菜单为 NULL，并且样式包含 WS_CHILD，则 `CWnd::PreCreateWindow` 现在将其 `CREATESTRUCT` 参数的 hMenu 成员分配给**this**指针。 要获得正确的功能，请确保对话框控件的 ID 不是 NULL。
>
> 此更改修复了托管/本机互操作方案中的崩溃。 `CWnd::Create` 中的 `TRACE` 语句将导致问题的开发人员发出警报。

默认的扩展窗口样式为 WS_EX_LEFT。 默认窗口样式为 WS_OVERLAPPED。

使用[AfxRegisterWndClass](../../mfc/reference/application-information-and-management.md#afxregisterwndclass)函数可注册窗口类。 用户定义的窗口类在注册它们的模块中可用。

子窗口的维度相对于父窗口的工作区的左上角。 顶级窗口的维度是相对于屏幕左上角的。

[CWnd：： OnCreate](#oncreate)方法在 `CreateEx` 方法返回之前和窗口可见之前被调用。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#82](../../mfc/reference/codesnippet/cpp/cwnd-class_21.cpp)]

##  <a name="creategraycaret"></a>CWnd：： CreateGrayCaret

为系统插入符号创建灰色矩形，并为插入符号声明所有权。

```
void CreateGrayCaret(
    int nWidth,
    int nHeight);
```

### <a name="parameters"></a>parameters

*nWidth*<br/>
指定插入符号的宽度（以逻辑单位为单位）。 如果此参数为0，则宽度设置为系统定义的窗口边框宽度。

*nHeight*<br/>
指定插入符号的高度（以逻辑单位为单位）。 如果此参数为0，则高度设置为系统定义的窗口边框高度。

### <a name="remarks"></a>备注

脱字号形状可以是线条或块。

参数*nWidth*和*nHeight*指定插入符号的宽度和高度（以逻辑单位为单位）;确切的宽度和高度（以像素为单位）取决于映射模式。

[GetSystemMetrics](/windows/win32/api/winuser/nf-winuser-getsystemmetrics) Windows 函数可以使用 SM_CXBORDER 和 SM_CYBORDER 索引来检索系统的窗口边框宽度或高度。 使用窗口边框宽度或高度可确保在高分辨率显示器上显示脱字号。

`CreateGrayCaret` 成员函数会自动销毁上一个插入符号形状（如果有），而不考虑哪个窗口拥有插入符号。 创建后，插入符号最初处于隐藏状态。 若要显示插入符号，必须调用[ShowCaret](#showcaret)成员函数。

系统脱字号是共享资源。 `CWnd` 只应在具有输入焦点或处于活动状态时创建一个插入符号。 它应在其丢失输入焦点或变为非活动状态之前销毁插入符号。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#83](../../mfc/reference/codesnippet/cpp/cwnd-class_22.cpp)]

##  <a name="createsolidcaret"></a>CWnd：： CreateSolidCaret

为系统插入符号和标记的声明所有权创建一个实心矩形。

```
void CreateSolidCaret(
    int nWidth,
    int nHeight);
```

### <a name="parameters"></a>parameters

*nWidth*<br/>
指定插入符号的宽度（以逻辑单位为单位）。 如果此参数为0，则宽度设置为系统定义的窗口边框宽度。

*nHeight*<br/>
指定插入符号的高度（以逻辑单位为单位）。 如果此参数为0，则高度设置为系统定义的窗口边框高度。

### <a name="remarks"></a>备注

脱字号形状可以是线条或块。

参数*nWidth*和*nHeight*指定插入符号的宽度和高度（以逻辑单位为单位）;确切的宽度和高度（以像素为单位）取决于映射模式。

[GetSystemMetrics](/windows/win32/api/winuser/nf-winuser-getsystemmetrics) Windows 函数可以使用 SM_CXBORDER 和 SM_CYBORDER 索引来检索系统的窗口边框宽度或高度。 使用窗口边框宽度或高度可确保在高分辨率显示器上显示脱字号。

`CreateSolidCaret` 成员函数会自动销毁上一个插入符号形状（如果有），而不考虑哪个窗口拥有插入符号。 创建后，插入符号最初处于隐藏状态。 若要显示插入符号，必须调用[ShowCaret](#showcaret)成员函数。

系统脱字号是共享资源。 `CWnd` 只应在具有输入焦点或处于活动状态时创建一个插入符号。 它应在其丢失输入焦点或变为非活动状态之前销毁插入符号。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#84](../../mfc/reference/codesnippet/cpp/cwnd-class_23.cpp)]

##  <a name="cwnd"></a>CWnd：： CWnd

构造 `CWnd` 对象。

```
CWnd();
```

### <a name="remarks"></a>备注

在调用[CreateEx](#createex)或[Create](#create)成员函数之前，不会创建并附加 Windows 窗口。

##  <a name="default"></a>CWnd：:D 默认

调用默认窗口过程。

```
LRESULT Default();
```

### <a name="return-value"></a>返回值

取决于所发送的消息。

### <a name="remarks"></a>备注

默认窗口过程为应用程序未处理的任何窗口消息提供默认处理。 此成员函数可确保处理每个消息。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#85](../../mfc/reference/codesnippet/cpp/cwnd-class_24.cpp)]

##  <a name="defwindowproc"></a>CWnd：:D efWindowProc

调用默认窗口过程，该过程为应用程序不处理的任何窗口消息提供默认处理。

```
virtual LRESULT DefWindowProc(
    UINT message,
    WPARAM wParam,
    LPARAM lParam);
```

### <a name="parameters"></a>parameters

message<br/>
指定要处理的 Windows 消息。

*wParam*<br/>
指定其他消息相关的信息。

*lParam*<br/>
指定其他消息相关的信息。

### <a name="return-value"></a>返回值

取决于所发送的消息。

### <a name="remarks"></a>备注

此成员函数可确保处理每个消息。 应使用与窗口过程接收的参数相同的参数调用它。

##  <a name="deletetempmap"></a>CWnd：:D eleteTempMap

由 `CWinApp` 对象的空闲时间处理程序自动调用。

```
static void PASCAL DeleteTempMap();
```

### <a name="remarks"></a>备注

删除 `FromHandle` 成员函数创建的任何临时 `CWnd` 对象。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#86](../../mfc/reference/codesnippet/cpp/cwnd-class_25.cpp)]

##  <a name="destroywindow"></a>CWnd：:D estroyWindow

销毁附加到 `CWnd` 对象的 Windows 窗口。

```
virtual BOOL DestroyWindow();
```

### <a name="return-value"></a>返回值

如果窗口被销毁，则为非零值;否则为0。

### <a name="remarks"></a>备注

`DestroyWindow` 成员函数向窗口发送适当的消息，以便停用该消息并删除输入焦点。 它还会销毁窗口的菜单，刷新应用程序队列，销毁未完成的计时器，删除剪贴板所有权，如果 `CWnd` 位于查看器链的顶部，则中断剪贴板查看器链。 它向窗口发送[WM_DESTROY](#ondestroy)和[WM_NCDESTROY](#onncdestroy)消息。 它不会销毁 `CWnd` 的对象。

`DestroyWindow` 是执行清理的占位符。 由于 `DestroyWindow` 是一个虚函数，因此它显示在类视图中任何 `CWnd`派生类中。 但即使您在 `CWnd`派生类中重写此函数，也不一定 `DestroyWindow`。 如果未在 MFC 代码中调用 `DestroyWindow`，则必须在你自己的代码中显式调用它（如果你想要调用该代码）。

例如，假设你在 `CView`派生类中重写了 `DestroyWindow`。 由于 MFC 源代码不会在其任何 `CFrameWnd`派生类中调用 `DestroyWindow`，因此不会调用重写的 `DestroyWindow`，除非你显式调用它。

如果窗口为任何窗口的父级，则在销毁父窗口时，将自动销毁这些子窗口。 `DestroyWindow` 成员函数首先销毁子窗口，然后销毁窗口本身。

`DestroyWindow` 成员函数还会销毁由[CDialog：： Create](../../mfc/reference/cdialog-class.md#create)创建的无模式对话框。

如果正在销毁的 `CWnd` 是子窗口，并且没有设置[WS_EX_NOPARENTNOTIFY](../../mfc/reference/styles-used-by-mfc.md#extended-window-styles)样式，则[WM_PARENTNOTIFY](/previous-versions/windows/desktop/inputmsg/wm-parentnotify)消息将发送到父级。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#87](../../mfc/reference/codesnippet/cpp/cwnd-class_26.cpp)]

##  <a name="detach"></a>CWnd：:D etach

从 `CWnd` 对象分离 Windows 句柄并返回该句柄。

```
HWND Detach();
```

### <a name="return-value"></a>返回值

Windows 对象的 HWND。

### <a name="example"></a>示例

  请参阅[CWnd：： Attach](#attach)的示例。

##  <a name="dlgdirlist"></a>CWnd：:D lgDirList

使用文件或目录列表填充列表框。

```
int DlgDirList(
    LPTSTR lpPathSpec,
    int nIDListBox,
    int nIDStaticPath,
    UINT nFileType);
```

### <a name="parameters"></a>parameters

*lpPathSpec*<br/>
指向以 null 结尾的字符串，该字符串包含路径或文件名。 `DlgDirList` 修改此字符串，此字符串的长度应足以包含修改内容。 有关详细信息，请参阅以下 "备注" 部分。

*nIDListBox*<br/>
指定列表框的标识符。 如果*nIDListBox*为0，`DlgDirList` 会假定不存在列表框，也不会尝试填充一个列表框。

*nIDStaticPath*<br/>
指定用于显示当前驱动器和目录的静态文本控件的标识符。 如果*nIDStaticPath*为0，则 `DlgDirList` 假定不存在此类文本控件。

*nFileType*<br/>
指定要显示的文件的属性。 它可以是下列值的任意组合：

- DDL_READWRITE 读写数据文件，不包含其他属性。

- DDL_READONLY 只读文件。

- DDL_HIDDEN 隐藏的文件。

- DDL_SYSTEM 系统文件。

- DDL_DIRECTORY 目录。

- DDL_ARCHIVE 存档。

- DDL_POSTMSGS LB_DIR 标志。 如果设置了 LB_DIR 标志，Windows 会将 `DlgDirList` 生成的消息放置在应用程序的队列中;否则，它们将直接发送到对话框过程。

- DDL_DRIVES 驱动器。 如果设置了 DDL_DRIVES 标志，则将自动设置 DDL_EXCLUSIVE 标志。 因此，若要创建包含驱动器和文件的目录列表，则必须调用 `DlgDirList` 两次：一次使用 DDL_DRIVES 标志集，一次用于列表的其余部分。

- DDL_EXCLUSIVE 专用位。 如果设置了独占位，则仅列出指定类型的文件;否则，将列出正常文件和指定类型的文件。

### <a name="return-value"></a>返回值

如果该函数成功，则为非 0；否则为 0。

### <a name="remarks"></a>备注

`DlgDirList` 将[LB_RESETCONTENT](/windows/win32/Controls/lb-resetcontent)和[LB_DIR](/windows/win32/Controls/lb-dir)消息发送到列表框。 它使用与*lpPathSpec*给定的路径匹配的所有文件的名称填充*nIDListBox*指定的列表框。

*LpPathSpec*参数具有以下形式：

`[drive:] [ [\u]directory[\idirectory]...\u] [filename]`

在此示例中，*驱动器*为驱动器号，*目录*为有效的目录名称， *filename*是必须至少包含一个通配符的有效文件名。 通配符是问号（ **？** ），表示匹配任意字符，星号（<strong>\*</strong>）表示匹配任意数量的字符。

如果为*lpPathSpec*指定了长度为0的字符串，或者仅指定了目录名称，但是不包含任何文件规范，则该字符串将更改为 "\*。\*"。

如果*lpPathSpec*包含驱动器和/或目录名称，则在填充列表框之前，当前驱动器和目录将更改为指定的驱动器和目录。 *NIDStaticPath*标识的文本控件也会使用新的驱动器和/或目录名称进行更新。

填充列表框后，通过删除路径的驱动器和/或目录部分来更新*lpPathSpec* 。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#88](../../mfc/reference/codesnippet/cpp/cwnd-class_27.cpp)]

##  <a name="dlgdirlistcombobox"></a>CWnd：:D lgDirListComboBox

使用文件或目录列表填充组合框的列表框。

```
int DlgDirListComboBox(
    LPTSTR lpPathSpec,
    int nIDComboBox,
    int nIDStaticPath,
    UINT nFileType);
```

### <a name="parameters"></a>parameters

*lpPathSpec*<br/>
指向以 null 结尾的字符串，该字符串包含路径或文件名。 `DlgDirListComboBox` 修改此字符串，因此此数据不应为字符串文本形式。 请参阅以下 "备注" 部分。

*nIDComboBox*<br/>
指定对话框中组合框的标识符。 如果*nIDComboBox*为0，`DlgDirListComboBox` 将假定不存在任何组合框，且不会尝试填充组合框。

*nIDStaticPath*<br/>
指定用于显示当前驱动器和目录的静态文本控件的标识符。 如果*nIDStaticPath*为0，则 `DlgDirListComboBox` 假定不存在此类文本控件。

*nFileType*<br/>
指定要显示的文件的 DOS 文件属性。 它可以是下列值的任意组合：

- DDL_READWRITE 读写数据文件，不包含其他属性。

- DDL_READONLY 只读文件。

- DDL_HIDDEN 隐藏的文件。

- DDL_SYSTEM 系统文件。

- DDL_DIRECTORY 目录。

- DDL_ARCHIVE 存档。

- DDL_POSTMSGS CB_DIR 标志。 如果设置了 CB_DIR 标志，Windows 会将 `DlgDirListComboBox` 生成的消息放置在应用程序的队列中;否则，它们将直接发送到对话框过程。

- DDL_DRIVES 驱动器。 如果设置了 DDL_DRIVES 标志，则将自动设置 DDL_EXCLUSIVE 标志。 因此，若要创建包含驱动器和文件的目录列表，则必须调用 `DlgDirListComboBox` 两次：一次使用 DDL_DRIVES 标志集，一次用于列表的其余部分。

- DDL_EXCLUSIVE 专用位。 如果设置了独占位，则仅列出指定类型的文件;否则，将列出正常文件和指定类型的文件。

### <a name="return-value"></a>返回值

指定函数的结果。 如果创建了一个列表，则为非零，甚至是一个空列表。 如果返回值为0，则表示输入字符串不包含有效的搜索路径。

### <a name="remarks"></a>备注

`DlgDirListComboBox` 将[CB_RESETCONTENT](/windows/win32/Controls/cb-resetcontent)和[CB_DIR](/windows/win32/Controls/cb-dir)消息发送到组合框。 它使用与*lpPathSpec*给定的路径匹配的所有文件的名称填充*nIDComboBox*指定的组合框的列表框。

*LpPathSpec*参数具有以下形式：

`[drive:] [ [\u]directory[\idirectory]...\u] [filename]`

在此示例中，*驱动器*为驱动器号，*目录*为有效的目录名称， *filename*是必须至少包含一个通配符的有效文件名。 通配符是问号（ **？** ），表示匹配任意字符，星号（<strong>\*</strong>）表示匹配任意数量的字符。

如果为*lpPathSpec*指定长度为零的字符串，则将使用当前目录并且不会修改*lpPathSpec* 。 如果仅指定目录名称，但不包含任何文件规范，则该字符串将更改为 "\*"。

如果*lpPathSpec*包含驱动器和/或目录名称，则在填充列表框之前，当前驱动器和目录将更改为指定的驱动器和目录。 *NIDStaticPath*标识的文本控件也会使用新的驱动器和/或目录名称进行更新。

填充组合框列表框后，通过删除路径的驱动器和/或目录部分来更新*lpPathSpec* 。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#89](../../mfc/reference/codesnippet/cpp/cwnd-class_28.cpp)]

##  <a name="dlgdirselect"></a>CWnd：:D lgDirSelect

从列表框检索当前所选内容。

```
BOOL DlgDirSelect(
    LPTSTR lpString,
    int nIDListBox);
```

### <a name="parameters"></a>parameters

*lpString*<br/>
指向接收列表框中当前选定内容的缓冲区。

*nIDListBox*<br/>
指定对话框中列表框的整数 ID。

### <a name="return-value"></a>返回值

如果成功，则不为 0；否则为 0。

### <a name="remarks"></a>备注

它假定列表框已由[DlgDirList](#dlgdirlist)成员函数填充，并且所选内容为驱动器号、文件或目录名称。

`DlgDirSelect` 成员函数将所选内容复制到*lpString*给定的缓冲区。 如果没有选择， *lpString*不会更改。

`DlgDirSelect` 将[LB_GETCURSEL](/windows/win32/Controls/lb-getcursel)和[LB_GETTEXT](/windows/win32/Controls/lb-gettext)消息发送到列表框。

它不允许从一个列表框中返回多个文件名。 列表框不得为多选列表框。

##  <a name="dlgdirselectcombobox"></a>CWnd：:D lgDirSelectComboBox

从组合框的列表框检索当前所选内容。

```
BOOL DlgDirSelectComboBox(
    LPTSTR lpString,
    int nIDComboBox);
```

### <a name="parameters"></a>parameters

*lpString*<br/>
指向接收所选路径的缓冲区。

*nIDComboBox*<br/>
指定对话框中组合框的整数 ID。

### <a name="return-value"></a>返回值

如果成功，则不为 0；否则为 0。

### <a name="remarks"></a>备注

它假定列表框已由[DlgDirListComboBox](#dlgdirlistcombobox)成员函数填充，并且所选内容为驱动器号、文件或目录名称。

`DlgDirSelectComboBox` 成员函数将所选内容复制到指定缓冲区。 如果未选择任何内容，则不会更改缓冲区的内容。

`DlgDirSelectComboBox` 将[CB_GETCURSEL](/windows/win32/Controls/cb-getcursel)和[CB_GETLBTEXT](/windows/win32/Controls/cb-getlbtext)消息发送到组合框。

它不允许从组合框返回多个文件名。

##  <a name="dodataexchange"></a>CWnd：:D oDataExchange

由框架调用以交换和验证对话框数据。

```
virtual void DoDataExchange(CDataExchange* pDX);
```

### <a name="parameters"></a>parameters

*pDX*<br/>
一个指向 `CDataExchange` 对象的指针。

### <a name="remarks"></a>备注

切勿直接调用此函数。 它由[UpdateData](#updatedata)成员函数调用。 调用 `UpdateData` 以初始化对话框的控件或从对话框中检索数据。

从[CDialog](../../mfc/reference/cdialog-class.md)派生特定于应用程序的对话框类时，如果想要使用框架的自动数据交换和验证，则需要重写此成员函数。 添加变量向导将为你编写此成员函数的重写版本，其中包含对话框数据交换（DDX）和验证（DDV）全局函数调用所需的 "数据映射"。

若要自动生成此成员函数的重写版本，请首先使用对话框编辑器创建一个对话框资源，然后派生特定于应用程序的对话框类。 然后，在 "新建" 对话框中使用 "添加变量向导" 将变量、数据和验证范围关联到各种控件。 然后，该向导写入覆盖的 `DoDataExchange`，其中包含数据映射。 下面是添加变量向导生成的一个示例 DDX/DDV 代码块：

[!code-cpp[NVC_MFCWindowing#90](../../mfc/reference/codesnippet/cpp/cwnd-class_29.cpp)]

`DoDataExchange` 重写的成员函数必须位于源文件中的宏语句前面。

有关对话框数据交换和验证的详细信息，请参阅[在窗体中显示和操作数据](../../data/odbc/displaying-and-manipulating-data-in-a-form.md)和[对话框数据交换和验证](../../mfc/dialog-data-exchange-and-validation.md)。 有关 "添加变量向导" 生成的 DDX_ 和 DDV_ 宏的说明，请参阅[技术说明 26](../../mfc/tn026-ddx-and-ddv-routines.md)。

##  <a name="dragacceptfiles"></a>CWnd：:D ragAcceptFiles

在应用程序的[CWinApp：： InitInstance](../../mfc/reference/cwinapp-class.md#initinstance)函数中使用 `CWnd` 指针从窗口中调用此成员函数，以指示窗口接受来自 Windows 文件管理器或文件资源管理器的已删除文件。

```
void DragAcceptFiles(BOOL bAccept = TRUE);
```

### <a name="parameters"></a>parameters

*BAccept*<br/>
指示是否接受拖动的文件的标志。

### <a name="remarks"></a>备注

只有调用 `DragAcceptFiles` 并将*bAccept*参数设置为 TRUE 的窗口才会将其自身标识为能够处理 Windows 消息 WM_DROPFILES。 例如，在 MDI 应用程序中，如果在 `DragAcceptFiles` 函数调用中使用 `CMDIFrameWnd` 窗口指针，则只有 `CMDIFrameWnd` 窗口才能获取 WM_DROPFILES 消息。 此消息不会发送到所有打开的 `CMDIChildWnd` 窗口。 若要 `CMDIChildWnd` 窗口接收此消息，必须使用 `CMDIChildWnd` 窗口指针调用 `DragAcceptFiles`。

若要停止接收拖动的文件，请调用成员函数，并将*bAccept*设置为 FALSE。

##  <a name="dragdetect"></a>CWnd：:D ragDetect

捕获鼠标并跟踪其移动，直到用户释放左键、按 ESC 键或将鼠标移动到围绕指定点的拖动矩形外部。

```
BOOL DragDetect(POINT pt) const;
```

### <a name="parameters"></a>parameters

*pt*<br/>
鼠标的初始位置（以屏幕坐标表示）。 函数使用此点确定拖动矩形的坐标。

### <a name="return-value"></a>返回值

如果用户将鼠标移动到拖动矩形之外的同时按住左侧按钮，则返回值为非零值。

如果用户在按住左侧按钮时未将鼠标移动到拖动矩形外，则返回值为零。

### <a name="remarks"></a>备注

此成员函数模拟函数[DragDetect](/windows/win32/api/winuser/nf-winuser-dragdetect)的功能，如 Windows SDK 中所述。

##  <a name="drawanimatedrects"></a>CWnd：:D rawAnimatedRects

绘制透明框架矩形并对它进行动画处理，以指示图标的打开或是窗口的最小化或最大化。

```
BOOL DrawAnimatedRects(
    int idAni,
    CONST RECT* lprcFrom,
    CONST RECT* lprcTo);
```

### <a name="parameters"></a>parameters

*idAni*<br/>
指定动画的类型。 如果指定 IDANI_CAPTION，则窗口标题将从*lprcFrom*指定的位置到*lprcTo*指定的位置进行动画处理。 其效果类似于最小化或最大化窗口。

*lprcFrom*<br/>
指向[矩形](/previous-versions/dd162897\(v=vs.85\))结构的指针，该结构指定图标或最小化窗口的位置和大小。

*lprcTo*<br/>
指向[矩形](/previous-versions/dd162897\(v=vs.85\))结构的指针，该结构指定已还原窗口的位置和大小

### <a name="return-value"></a>返回值

如果函数成功，则为非零值；否则为

### <a name="remarks"></a>备注

此成员函数模拟函数[DrawAnimatedRects](/windows/win32/api/winuser/nf-winuser-drawanimatedrects)的功能，如 Windows SDK 中所述。

##  <a name="drawcaption"></a>CWnd：:D rawCaption

绘制窗口标题。

```
BOOL DrawCaption(
    CDC* pDC,
    LPCRECT lprc,
    UINT uFlags);
```

### <a name="parameters"></a>parameters

*pDC*<br/>
一个指向设备上下文的指针。 函数在此设备上下文中绘制窗口标题。

*lprc*<br/>
一个指针，指向用于指定窗口标题边框的 RECT 结构。

*uFlags*<br/>
指定绘图选项。 有关值的完整列表，请参阅[DrawCaption](/windows/win32/api/winuser/nf-winuser-drawcaption)。

### <a name="return-value"></a>返回值

如果函数成功，则为非零值；否则为

### <a name="remarks"></a>备注

此成员函数模拟函数[DrawCaption](/windows/win32/api/winuser/nf-winuser-drawcaption)的功能，如 Windows SDK 中所述。

##  <a name="drawmenubar"></a>CWnd：:D rawMenuBar

重绘菜单栏。

```
void DrawMenuBar();
```

### <a name="remarks"></a>备注

如果在 Windows 创建窗口后更改了菜单栏，则调用此函数以绘制已更改的菜单栏。

### <a name="example"></a>示例

  请参阅[CWnd：： GetMenu](#getmenu)的示例。

##  <a name="enableactiveaccessibility"></a>CWnd：： EnableActiveAccessibility

启用用户定义的 Active Accessibility 函数。

```
void EnableActiveAccessibility();
```

### <a name="remarks"></a>备注

MFC 的默认 Active Accessibility 支持足以满足标准的窗口和控件，包括 ActiveX 控件;但是，如果 `CWnd`派生的类包含 nonwindowed 用户界面元素，则 MFC 无法了解它们。 在这种情况下，你必须在类中重写相应的[Active Accessibility 成员函数](/windows/win32/winauto/sdk-components)，并且必须在类的构造函数中调用 `EnableActiveAccessibility`。

##  <a name="enabledynamiclayout"></a>CWnd：： EnableDynamicLayout

启用或禁用动态布局管理器。 启用动态布局时，子窗口的位置和大小可以在用户调整窗口大小时动态调整。

```
void EnableDynamicLayout(BOOL bEnable = TRUE);
```

### <a name="parameters"></a>parameters

*bEnable*<br/>
如果为 TRUE，则启用动态布局；如果为 FALSE，则禁用动态布局。

### <a name="remarks"></a>备注

如果想要启用动态布局，你不只需要调用此方法。 还必须提供指定动态布局信息，此信息指定窗口中的控件如何响应大小更改。 可以在资源编辑器中（或以编程方式）为每个控件指定此信息。 请参阅[动态布局](../../mfc/dynamic-layout.md)。

##  <a name="enabled2dsupport"></a>CWnd：： EnableD2DSupport

启用或禁用窗口 D2D 支持。 在初始化主窗口之前调用此方法。

```
void EnableD2DSupport(
    BOOL bEnable = TRUE,
    BOOL bUseDCRenderTarget = FALSE);
```

### <a name="parameters"></a>parameters

*bEnable*<br/>
指定是打开还是关闭 D2D 支持。

*bUseDCRenderTarget*<br/>
指定是否使用设备上下文 (DC) 呈现器目标 CDCRenderTarget。 如果为 FALSE，则使用 CHwndRenderTarget。

##  <a name="enablescrollbar"></a>CWnd：： EnableScrollBar

启用或禁用滚动条的一个或两个箭头。

```
BOOL EnableScrollBar(
    int nSBFlags,
    UINT nArrowFlags = ESB_ENABLE_BOTH);
```

### <a name="parameters"></a>parameters

*nSBFlags*<br/>
指定滚动条类型。 可以是下列值之一：

- SB_BOTH 启用或禁用与窗口关联的水平滚动条和垂直滚动条的箭头。

- SB_HORZ 启用或禁用与窗口关联的水平滚动条的箭头。

- SB_VERT 启用或禁用与窗口关联的垂直滚动条的箭头。

*nArrowFlags*<br/>
指定是启用还是禁用滚动条箭头以及启用或禁用的箭头。 可以是下列值之一：

- ESB_ENABLE_BOTH 启用滚动条（默认值）的两个箭头。

- ESB_DISABLE_LTUP 禁用水平滚动条的左箭头或垂直滚动条的向上箭头。

- ESB_DISABLE_RTDN 禁用水平滚动条的向右箭头或垂直滚动条的向下箭头。

- ESB_DISABLE_BOTH 禁用滚动条的两个箭头。

### <a name="return-value"></a>返回值

如果按指定启用或禁用箭头，则为非零值。 否则为0，指示箭头已经处于请求状态或发生错误。

##  <a name="enablescrollbarctrl"></a>CWnd：： EnableScrollBarCtrl

启用或禁用此窗口的滚动条。

```
void EnableScrollBarCtrl(
    int nBar,
    BOOL bEnable = TRUE);
```

### <a name="parameters"></a>parameters

*nBar*<br/>
滚动条标识符。

*bEnable*<br/>
指定是要启用滚动条还是禁用滚动条。

### <a name="remarks"></a>备注

如果窗口具有同级滚动条控件，则使用该滚动条;否则，将使用该窗口的滚动条。

##  <a name="enabletooltips"></a>CWnd：： EnableToolTips

为给定的窗口启用工具提示。

```
BOOL EnableToolTips(BOOL bEnable = TRUE);
```

### <a name="parameters"></a>parameters

*bEnable*<br/>
指定是否启用或禁用工具提示控件。 如果为 TRUE，则启用控件;FALSE 禁用控件。

### <a name="return-value"></a>返回值

如果启用工具提示，则为 TRUE;否则为 FALSE。

### <a name="remarks"></a>备注

重写[OnToolHitTest](#ontoolhittest)以提供该窗口的[TOOLINFO](/windows/win32/api/commctrl/ns-commctrl-tttoolinfoa)结构或结构。

> [!NOTE]
> 某些窗口（如[CToolBar](../../mfc/reference/ctoolbar-class.md)）提供[OnToolHitTest](#ontoolhittest)的内置实现。

有关此结构的详细信息，请参阅 Windows SDK 中的[TOOLINFO](/windows/win32/api/commctrl/ns-commctrl-tttoolinfoa) 。

仅调用 `EnableToolTips` 不足以显示子控件的工具提示，除非父窗口派生自 `CFrameWnd`。 这是因为 `CFrameWnd` 提供 TTN_NEEDTEXT 通知的默认处理程序。 如果您的父窗口不是从 `CFrameWnd`派生的，即，如果它是一个对话框或窗体视图，则您的子控件的工具提示将不会正确显示，除非您为 TTN_NEEDTEXT 工具提示通知提供处理程序。 请参阅[工具提示](../../mfc/tool-tips-in-windows-not-derived-from-cframewnd.md)。

`EnableToolTips` 为您的 windows 提供的默认工具提示没有关联的文本。 若要检索要显示的工具提示的文本，TTN_NEEDTEXT 通知会在显示工具提示窗口之前发送到工具提示控件的父窗口。 如果此消息不存在处理 `TOOLTIPTEXT` 结构的*pszText*成员的值，则不会为工具提示显示任何文本。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#91](../../mfc/reference/codesnippet/cpp/cwnd-class_30.cpp)]

[!code-cpp[NVC_MFCWindowing#92](../../mfc/reference/codesnippet/cpp/cwnd-class_31.cpp)]

##  <a name="enabletrackingtooltips"></a>CWnd：： EnableTrackingToolTips

启用或禁用跟踪工具提示。

```
BOOL EnableTrackingToolTips(BOOL bEnable = TRUE);
```

### <a name="parameters"></a>parameters

*bEnable*<br/>
指定是启用还是禁用跟踪工具提示。 如果此参数为 TRUE，则将启用跟踪工具提示。 如果此参数为 FALSE，则将禁用跟踪工具提示。

### <a name="return-value"></a>返回值

指示调用 `EnableWindow` 成员函数之前的状态。 如果以前禁用了窗口，则返回值为非零值。 如果以前启用了窗口或发生错误，则返回值为0。

### <a name="remarks"></a>备注

跟踪工具提示是可以在屏幕上动态定位的 "工具提示" 窗口。 通过快速更新位置，"工具提示" 窗口将显示为平滑或 "跟踪"。 如果需要工具提示文本在指针移动时跟随其位置，则此功能会很有用。

##  <a name="enablewindow"></a>CWnd：： EnableWindow

启用或禁用鼠标和键盘输入。

```
BOOL EnableWindow(BOOL bEnable = TRUE);
```

### <a name="parameters"></a>parameters

*bEnable*<br/>
指定是要启用还是禁用给定的窗口。 如果此参数为 TRUE，则将启用窗口。 如果此参数为 FALSE，则将禁用窗口。

### <a name="return-value"></a>返回值

指示调用 `EnableWindow` 成员函数之前的状态。 如果以前禁用了窗口，则返回值为非零值。 如果以前启用了窗口或发生错误，则返回值为0。

### <a name="remarks"></a>备注

如果输入处于禁用状态，则会忽略诸如鼠标单击和击键等输入。 启用输入后，该窗口将处理所有输入。

如果 "已启用" 状态为 "正在更改"，则在此函数返回之前将发送[WM_ENABLE](#onenable)消息。

如果禁用，则会隐式禁用所有子窗口，但不会将它们发送 WM_ENABLE 消息。

必须先启用窗口，然后才能激活窗口。 例如，如果应用程序正在显示一个无模式对话框并禁用了其主窗口，则在销毁该对话框之前，必须启用主窗口。 否则，另一个窗口将获得输入焦点并被激活。 如果子窗口处于禁用状态，则在 Windows 尝试确定哪个窗口应获得鼠标消息时，它将被忽略。

默认情况下，窗口在创建时处于启用状态。 应用程序可以在[create](#create)或[CreateEx](#createex)成员函数中指定 WS_DISABLED 样式，以创建最初禁用的窗口。 创建窗口后，应用程序还可以使用 `EnableWindow` 成员函数来启用或禁用窗口。

应用程序可以使用此函数在对话框中启用或禁用控件。 禁用的控件不能接收输入焦点，也不能访问它。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#93](../../mfc/reference/codesnippet/cpp/cwnd-class_32.cpp)]

##  <a name="endmodalloop"></a>CWnd：： EndModalLoop

终止对 `RunModalLoop`的调用。

```
virtual void EndModalLoop(int nResult);
```

### <a name="parameters"></a>parameters

*N 结果*<br/>
包含要返回到[runmodalloop 调用](#runmodalloop)的调用方的值。

### <a name="remarks"></a>备注

*N 结果*参数将传播到 `RunModalLoop`的返回值。

##  <a name="endmodalstate"></a>CWnd：： EndModalState

调用此成员函数以将框架窗口从有模式更改为无模式。

```
virtual void EndModalState();
```

##  <a name="endpaint"></a>CWnd：： EndPaint

标记给定窗口中的绘制结束。

```
void EndPaint(LPPAINTSTRUCT lpPaint);
```

### <a name="parameters"></a>parameters

*lpPaint*<br/>
指向[PAINTSTRUCT](/windows/win32/api/winuser/ns-winuser-paintstruct)结构，其中包含[BeginPaint](#beginpaint)成员函数检索到的绘制信息。

### <a name="remarks"></a>备注

每次调用 `BeginPaint` 成员函数都需要 `EndPaint` 成员函数，但仅在完成绘制后才需要函数。

如果 `BeginPaint` 成员函数隐藏了脱字号，`EndPaint` 会将插入符号还原到屏幕上。

### <a name="example"></a>示例

  请参阅[CWnd：： BeginPaint](#beginpaint)的示例。

##  <a name="executedlginit"></a>CWnd：： ExecuteDlgInit

启动对话框资源。

```
BOOL ExecuteDlgInit(LPCTSTR lpszResourceName);
BOOL ExecuteDlgInit(LPVOID lpResource);
```

### <a name="parameters"></a>parameters

*lpszResourceName*<br/>
指向以 null 结尾的字符串的指针，该字符串指定资源的名称。

*lpResource*<br/>
指向资源的指针。

### <a name="return-value"></a>返回值

如果执行对话框资源，则为 TRUE;否则为 FALSE。

### <a name="remarks"></a>备注

`ExecuteDlgInit` 将使用绑定到执行模块的资源或其他源中的资源。 为此，`ExecuteDlgInit` 通过调用 `AfxFindResourceHandle`查找资源句柄。 如果 MFC 应用程序不使用共享的 DLL （MFCx0 [U] [D]，则为。DLL），`AfxFindResourceHandle` 调用[AfxGetResourceHandle](application-information-and-management.md#afxgetresourcehandle)，它返回可执行文件的当前资源句柄。 如果使用 MFCx0 [U] [D] 的 MFC 应用程序，则为。DLL `AfxFindResourceHandle` 会遍历共享的 `CDynLinkLibrary` 对象列表，以及查找正确的资源句柄的 MFC 扩展 Dll 的列表。

##  <a name="filtertooltipmessage"></a>CWnd：： FilterToolTipMessage

由框架调用以显示工具提示消息。

```
void FilterToolTipMessage(MSG* pMsg);
```

### <a name="parameters"></a>parameters

*pMsg*<br/>
指向工具提示消息的指针。

### <a name="remarks"></a>备注

在大多数 MFC 应用程序中，此方法由[PreTranslateMessage](#pretranslatemessage)和[EnableToolTips](#enabletooltips)中的框架调用，无需自行调用。

但是，在某些应用程序（例如某些 ActiveX 控件）中，这些方法可能不会被框架调用，你将需要自己调用 FilterToolTipMessage。 有关详细信息，请参阅[创建工具提示的方法](../../mfc/methods-of-creating-tool-tips.md)。

##  <a name="findwindow"></a>CWnd：： FindWindow

返回顶级 `CWnd` 其窗口类由*lpszClassName*提供，其窗口名称或标题由*lpszWindowName*提供。

```
static CWnd* PASCAL FindWindow(
    LPCTSTR lpszClassName,
    LPCTSTR lpszWindowName);
```

### <a name="parameters"></a>parameters

*lpszClassName*<br/>
指向以 null 结尾的字符串，该字符串指定窗口的类名称（`WNDCLASS` 结构）。 如果*lpClassName*为 NULL，则所有类名都匹配。

*lpszWindowName*<br/>
指向以 null 结尾的字符串，该字符串指定窗口名称（窗口的标题）。 如果*lpWindowName*为 NULL，则所有窗口名称均匹配。

### <a name="return-value"></a>返回值

标识具有指定的类名称和窗口名称的窗口。 如果找不到这样的窗口，则为 NULL。

`CWnd`* 可能是临时的，不应存储以供以后使用。

### <a name="remarks"></a>备注

此函数不搜索子窗口。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#94](../../mfc/reference/codesnippet/cpp/cwnd-class_33.cpp)]

##  <a name="findwindowex"></a>CWnd：： FindWindowEx

检索其类名称和窗口名称与指定的字符串匹配的窗口对象。

```
static CWnd* FindWindowEx(
    HWND hwndParent,
    HWND hwndChildAfter,
    LPCTSTR lpszClass,
    LPCTSTR lpszWindow);
```

### <a name="parameters"></a>parameters

*hwndParent*<br/>
要搜索其子窗口的父窗口的句柄。

*hwndChildAfter*<br/>
子窗口的句柄。 搜索以 Z 顺序从下一个子窗口开始。 子窗口必须是*hwndParent*的直接子窗口，而不只是一个子窗口。

*lpszClass*<br/>
指向以 null 结尾的字符串的指针，该字符串指定类名或由先前对[RegisterClass](/windows/win32/api/winuser/nf-winuser-registerclassw)或[RegisterClassEx](/windows/win32/api/winuser/nf-winuser-registerclassexw)的调用创建的类 atom。

*lpszWindow*<br/>
指向以 null 结尾的字符串的指针，该字符串指定窗口名称（窗口的标题）。 如果此参数为 NULL，则所有窗口名称均匹配。

### <a name="return-value"></a>返回值

如果函数成功，则返回值是指向具有指定类和窗口名称的窗口对象的指针。 如果函数失败，则返回值为 NULL。

### <a name="remarks"></a>备注

此成员函数模拟函数[FindWindowEx](/windows/win32/api/winuser/nf-winuser-findwindowexw)的功能，如 Windows SDK 中所述。

##  <a name="flashwindow"></a>CWnd：： FlashWindow

将给定窗口闪烁一次。

```
BOOL FlashWindow(BOOL bInvert);
```

### <a name="parameters"></a>parameters

*bInvert*<br/>
指定是否将 `CWnd` 刷新或返回到其原始状态。 如果*bInvert*为 TRUE，则从一种状态到另一种状态的刷新 `CWnd`。 如果*bInvert*为 FALSE，则窗口将恢复为其原始状态（活动或非活动）。

### <a name="return-value"></a>返回值

如果窗口在调用 `FlashWindow` 成员函数之前处于活动状态，则为非零值;否则为0。

### <a name="remarks"></a>备注

若要进行连续闪烁，请创建系统计时器并重复调用 `FlashWindow`。 闪烁 `CWnd` 意味着更改标题栏的外观，就好像 `CWnd` 从非活动状态更改为活动状态一样，反之亦然。 （非活动标题栏更改为活动标题栏; 活动标题栏更改为非活动标题栏。）

通常情况下，将刷新窗口以通知用户它需要注意，但当前没有输入焦点。

仅当窗口正在获得输入焦点并且不再闪烁时， *bInvert*参数才应为 FALSE;在等待获取输入焦点时，连续调用应为 TRUE。

对于最小化的窗口，此函数始终返回非零值。 如果窗口已最小化，`FlashWindow` 将简单地闪烁窗口的图标;对于最小化的窗口，将忽略*bInvert* 。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#95](../../mfc/reference/codesnippet/cpp/cwnd-class_34.cpp)]

##  <a name="flashwindowex"></a>CWnd：： FlashWindowEx

闪烁给定的窗口。

```
BOOL FlashWindowEx(
    DWORD dwFlags,
    UINT uCount,
    DWORD dwTimeout);
```

### <a name="parameters"></a>parameters

dwFlags<br/>
指定闪存状态。 有关值的完整列表，请参阅[FLASHWINFO](/windows/win32/api/winuser/ns-winuser-flashwinfo)结构。

*uCount*<br/>
指定对窗口进行闪烁的次数。

*dwTimeout*<br/>
指定刷新窗口的速率（以毫秒为单位）。 如果*dwTimeout*为零，则函数将使用默认游标闪烁速率。

### <a name="return-value"></a>返回值

返回值指定窗口在调用 `FlashWindowEx` 函数之前的状态。 如果在调用前将窗口标题绘制为活动状态，则返回值为非零值。 否则，返回值为零。

### <a name="remarks"></a>备注

此方法模拟函数[FlashWindowEx](/windows/win32/api/winuser/nf-winuser-flashwindowex)的功能，如 Windows SDK 中所述。

##  <a name="fromhandle"></a>CWnd：： FromHandle

在提供了窗口的句柄时返回指向 `CWnd` 对象的指针。 如果 `CWnd` 对象未附加到该句柄，则会创建并附加一个临时 `CWnd` 对象。

```
static CWnd* PASCAL FromHandle(HWND hWnd);
```

### <a name="parameters"></a>parameters

*hWnd*<br/>
Windows 窗口的 HWND。

### <a name="return-value"></a>返回值

在提供了窗口的句柄时返回指向 `CWnd` 对象的指针。 如果 `CWnd` 对象未附加到该句柄，则会创建并附加一个临时 `CWnd` 对象。

该指针可能是暂时的，不应存储起来供将来使用。

##  <a name="fromhandlepermanent"></a>CWnd：： FromHandlePermanent

在提供了窗口的句柄时返回指向 `CWnd` 对象的指针。

```
static CWnd* PASCAL FromHandlePermanent(HWND hWnd);
```

### <a name="parameters"></a>parameters

*hWnd*<br/>
Windows 窗口的 HWND。

### <a name="return-value"></a>返回值

一个指向 `CWnd` 对象的指针。

### <a name="remarks"></a>备注

如果 `CWnd` 对象未附加到句柄，则返回 NULL。

与[FromHandle](#fromhandle)不同，此函数不会创建临时对象。

##  <a name="get_accchild"></a>CWnd：： get_accChild

由框架调用以检索指定子级的 `IDispatch` 接口地址。

```
virtual HRESULT get_accChild(
    VARIANT varChild,
    IDispatch** ppdispChild);
```

### <a name="parameters"></a>parameters

*varChild*<br/>
标识要检索其 `IDispatch` 接口的子元素。

*ppdispChild*<br/>
接收子对象的 `IDispatch` 接口的地址。

### <a name="return-value"></a>返回值

如果成功，则返回 S_OK，失败时返回 COM 错误代码。 请参阅在 Windows SDK 中的[IAccessible：： get_accChild](/windows/win32/api/oleacc/nf-oleacc-iaccessible-get_accchild)中**返回值**。

### <a name="remarks"></a>备注

此函数是 MFC [Active Accessibility](/windows/win32/WinAuto/microsoft-active-accessibility)支持的一部分。

如果 nonwindowed 用户界面元素（MFC 处理的无窗口 ActiveX 控件除外），请在 `CWnd`派生类中重写此函数。

有关详细信息，请参阅 Windows SDK 中的[IAccessible：： get_accChild](/windows/win32/api/oleacc/nf-oleacc-iaccessible-get_accchild) 。

##  <a name="get_accchildcount"></a>CWnd：： get_accChildCount

由框架调用调用以检索属于该对象的子级的个数。

```
virtual HRESULT get_accChildCount(long* pcountChildren);
```

### <a name="parameters"></a>parameters

*pcountChildren*<br/>
接收子级的数目。

### <a name="return-value"></a>返回值

如果成功，则返回 S_OK，失败时返回 COM 错误代码。 请参阅在 Windows SDK 中的[IAccessible：： get_accChildCount](/windows/win32/api/oleacc/nf-oleacc-iaccessible-get_accchildcount)中**返回值**。

### <a name="remarks"></a>备注

此函数是 MFC [Active Accessibility](/windows/win32/WinAuto/microsoft-active-accessibility)支持的一部分。

如果 nonwindowed 用户界面元素（MFC 处理的无窗口 ActiveX 控件除外），请在 `CWnd`派生类中重写此函数。 调用基类版本，然后添加 nonwindowed 子元素。

有关详细信息，请参阅 Windows SDK 中的[IAccessible：： get_accChildCount](/windows/win32/api/oleacc/nf-oleacc-iaccessible-get_accchildcount) 。

##  <a name="get_accdefaultaction"></a>CWnd：： get_accDefaultAction

由框架调用以检索描述对象默认操作的字符串。

```
virtual HRESULT get_accDefaultAction(
    VARIANT varChild,
    BSTR* pszDefaultAction);
```

### <a name="parameters"></a>parameters

*varChild*<br/>
指定要检索的默认操作是否为对象或对象的一个子元素。 此参数可以是 CHILDID_SELF （获取有关对象的信息）或子级 ID （以获取有关对象的子元素的信息）。

*pszDefaultAction*<br/>
用于接收描述指定对象的默认操作的本地化字符串的 BSTR 的地址; 如果此对象没有默认操作，则为 NULL。

### <a name="return-value"></a>返回值

如果成功，则返回 S_OK，失败时返回 COM 错误代码。 请参阅在 Windows SDK 中的[IAccessible：： get_accDefaultAction](/windows/win32/api/oleacc/nf-oleacc-iaccessible-get_accdefaultaction)中**返回值**。

### <a name="remarks"></a>备注

此函数是 MFC [Active Accessibility](/windows/win32/WinAuto/microsoft-active-accessibility)支持的一部分。

在 `CWnd`派生类中重写此函数以描述对象的默认操作。

有关详细信息，请参阅 Windows SDK 中的[IAccessible：： get_accDefaultAction](/windows/win32/api/oleacc/nf-oleacc-iaccessible-get_accdefaultaction) 。

##  <a name="get_accdescription"></a>CWnd：： get_accDescription

由框架调用以检索描述指定对象的可视外观的字符串。

```
virtual HRESULT get_accDescription(
    VARIANT varChild,
    BSTR* pszDescription);
```

### <a name="parameters"></a>parameters

*varChild*<br/>
指定要检索的说明是否为对象或对象的一个子元素的说明。 此参数可以是 CHILDID_SELF （获取有关对象的信息）或子级 ID （以获取有关对象的子元素的信息）。

*pszDescription*<br/>
用于接收描述指定对象的本地化字符串的 BSTR 的地址; 如果此对象没有可用说明，则为 NULL。

### <a name="return-value"></a>返回值

如果成功，则返回 S_OK，失败时返回 COM 错误代码。 请参阅在 Windows SDK 中的[IAccessible：： get_accDescription](/windows/win32/api/oleacc/nf-oleacc-iaccessible-get_accdescription)中**返回值**。

### <a name="remarks"></a>备注

此函数是 MFC [Active Accessibility](/windows/win32/WinAuto/microsoft-active-accessibility)支持的一部分。

在 `CWnd`派生类中重写此函数以描述你的对象。 调用基类版本并添加描述。

有关详细信息，请参阅 Windows SDK 中的[IAccessible：： get_accDescription](/windows/win32/api/oleacc/nf-oleacc-iaccessible-get_accdescription) 。

##  <a name="get_accfocus"></a>CWnd：： get_accFocus

由框架调用以检索具有键盘焦点的对象。

```
virtual HRESULT get_accFocus(VARIANT* pvarChild);
```

### <a name="parameters"></a>parameters

*pvarChild*<br/>
接收有关具有焦点的对象的信息。 请参阅 Windows SDK 中的*pvarID* in [IAccessible：： get_accFocus](/windows/win32/api/oleacc/nf-oleacc-iaccessible-get_accfocus) 。

### <a name="return-value"></a>返回值

如果成功，则返回 S_OK，失败时返回 COM 错误代码。 请参阅 Windows SDK 中 `IAccessible::get_accFocus` 的**返回值**。

### <a name="remarks"></a>备注

此函数是 MFC [Active Accessibility](/windows/win32/WinAuto/microsoft-active-accessibility)支持的一部分。

如果 nonwindowed 用户界面元素（MFC 处理的无窗口 ActiveX 控件除外），请在 `CWnd`派生类中重写此函数。

有关详细信息，请参阅 Windows SDK 中的[IAccessible：： get_accFocus](/windows/win32/api/oleacc/nf-oleacc-iaccessible-get_accfocus) 。

##  <a name="get_acchelp"></a>CWnd：： get_accHelp

由框架调用以检索对象的**Help**属性字符串。

```
virtual HRESULT get_accHelp(
    VARIANT varChild,
    BSTR* pszHelp);
```

### <a name="parameters"></a>parameters

*varChild*<br/>
指定要检索的帮助信息是否为对象或对象的一个子元素。 此参数可以是 CHILDID_SELF （获取有关对象的信息）或子级 ID （以获取有关对象的子元素的信息）。

*pszHelp*<br/>
用于接收包含指定对象帮助信息的本地化字符串的 BSTR 的地址; 如果没有可用的帮助信息，则为 NULL。

### <a name="return-value"></a>返回值

如果成功，则返回 S_OK，失败时返回 COM 错误代码。 请参阅在 Windows SDK 中的[IAccessible：： get_accHelp](/windows/win32/api/oleacc/nf-oleacc-iaccessible-get_acchelp)中**返回值**。

### <a name="remarks"></a>备注

此函数是 MFC [Active Accessibility](/windows/win32/WinAuto/microsoft-active-accessibility)支持的一部分。

在 `CWnd`派生类中重写此函数，为对象提供帮助文本。

有关详细信息，请参阅 Windows SDK 中的[IAccessible：： get_accHelp](/windows/win32/api/oleacc/nf-oleacc-iaccessible-get_acchelp) 。

##  <a name="get_acchelptopic"></a>CWnd：： get_accHelpTopic

由框架调用以检索与指定对象关联的**WinHelp**文件的完整路径以及该文件内相应主题的标识符。

```
virtual HRESULT get_accHelpTopic(
    BSTR* pszHelpFile,
    VARIANT varChild,
    long* pidTopic);
```

### <a name="parameters"></a>parameters

*pszHelpFile*<br/>
用于接收与指定对象关联的 `WinHelp` 文件的完整路径的 BSTR 的地址（如果有）。

*varChild*<br/>
指定要检索的帮助主题是否为对象或对象的一个子元素。 此参数可以是 CHILDID_SELF （用于获取对象的帮助主题）或子 ID （用于获取对象的一个子元素的帮助主题）。

*pidTopic*<br/>
标识与指定的对象相关联的帮助文件主题。 请参阅 Windows SDK 中的*pidTopic* in [IAccessible：： get_accHelpTopic](/windows/win32/api/oleacc/nf-oleacc-iaccessible-get_acchelptopic) 。

### <a name="return-value"></a>返回值

如果成功，则返回 S_OK，失败时返回 COM 错误代码。 请参阅 Windows SDK 中 `IAccessible::get_accHelpTopic` 的**返回值**。

### <a name="remarks"></a>备注

此函数是 MFC [Active Accessibility](/windows/win32/WinAuto/microsoft-active-accessibility)支持的一部分。

在 `CWnd`派生类中重写此函数，以提供有关对象的帮助信息。

有关详细信息，请参阅 Windows SDK 中的[IAccessible：： get_accHelpTopic](/windows/win32/api/oleacc/nf-oleacc-iaccessible-get_acchelptopic) 。

##  <a name="get_acckeyboardshortcut"></a>CWnd：： get_accKeyboardShortcut

由框架调用以检索指定对象的快捷键或访问键。

```
virtual HRESULT get_accKeyboardShortcut(
    VARIANT varChild,
    BSTR* pszKeyboardShortcut);
```

### <a name="parameters"></a>parameters

*varChild*<br/>
指定要检索的键盘快捷键是否为对象或对象的一个子元素。 此参数可以是 CHILDID_SELF （获取有关对象的信息）或子级 ID （以获取有关对象的子元素的信息）。

*pszKeyboardShortcut*<br/>
用于接收标识键盘快捷方式的本地化字符串的 BSTR 的地址; 如果没有与指定的对象关联的键盘快捷方式，则为 NULL。

### <a name="return-value"></a>返回值

如果成功，则返回 S_OK，失败时返回 COM 错误代码。 请参阅在 Windows SDK 中的[IAccessible：： get_accKeyboardShortcut](/windows/win32/api/oleacc/nf-oleacc-iaccessible-get_acckeyboardshortcut)中**返回值**。

### <a name="remarks"></a>备注

此函数是 MFC [Active Accessibility](/windows/win32/WinAuto/microsoft-active-accessibility)支持的一部分。

在 `CWnd`派生的类中重写此函数，以标识您的对象的键盘快捷方式。

有关详细信息，请参阅 Windows SDK 中的[IAccessible：： get_accKeyboardShortcut](/windows/win32/api/oleacc/nf-oleacc-iaccessible-get_acckeyboardshortcut) 。

##  <a name="get_accname"></a>CWnd：： get_accName

由框架调用以检索指定对象的名称。

```
virtual HRESULT get_accName(
    VARIANT varChild,
    BSTR* pszName);
```

### <a name="parameters"></a>parameters

*varChild*<br/>
指定要检索的名称是否是对象的名称或对象的一个子元素。 此参数可以是 CHILDID_SELF （获取有关对象的信息）或子级 ID （以获取有关对象的子元素的信息）。

*pszName*<br/>
用于接收包含指定对象名称的字符串的 BSTR 的地址。

### <a name="return-value"></a>返回值

如果成功，则返回 S_OK，失败时返回 COM 错误代码。 请参阅在 Windows SDK 中的[IAccessible：： get_accName](/windows/win32/api/oleacc/nf-oleacc-iaccessible-get_accname)中**返回值**。

### <a name="remarks"></a>备注

此函数是 MFC [Active Accessibility](/windows/win32/WinAuto/microsoft-active-accessibility)支持的一部分。

在 `CWnd`派生的类中重写此函数，以返回对象的名称。

有关详细信息，请参阅 Windows SDK 中的[IAccessible：： get_accName](/windows/win32/api/oleacc/nf-oleacc-iaccessible-get_accname) 。

##  <a name="get_accparent"></a>CWnd：： get_accParent

由框架调用以检索对象父级的 `IDispatch` 接口。

```
virtual HRESULT get_accParent(IDispatch** ppdispParent);
```

### <a name="parameters"></a>parameters

*ppdispParent*<br/>
接收父对象的 `IDispatch` 接口的地址。 如果父项不存在，则将变量设置为 NULL; 如果子级无法访问其父项，则设置为。

### <a name="return-value"></a>返回值

如果成功，则返回 S_OK，失败时返回 COM 错误代码。 请参阅在 Windows SDK 中的[IAccessible：： get_accParent](/windows/win32/api/oleacc/nf-oleacc-iaccessible-get_accparent)中**返回值**。

### <a name="remarks"></a>备注

此函数是 MFC [Active Accessibility](/windows/win32/WinAuto/microsoft-active-accessibility)支持的一部分。

在大多数情况下，您不必重写此函数。

有关详细信息，请参阅 Windows SDK 中的[IAccessible：： get_accParent](/windows/win32/api/oleacc/nf-oleacc-iaccessible-get_accparent) 。

##  <a name="get_accrole"></a>CWnd：： get_accRole

由框架调用以检索描述指定对象的角色的信息。

```
virtual HRESULT get_accRole(
    VARIANT varChild,
    VARIANT* pvarRole);
```

### <a name="parameters"></a>parameters

*varChild*<br/>
指定要检索的角色信息是否为对象的对象或对象的一个子元素。 此参数可以是 CHILDID_SELF （获取有关对象的信息）或子级 ID （以获取有关对象的子元素的信息）。

*pvarRole*<br/>
接收角色信息。 请参阅 Windows SDK 中的*pvarRole* in [IAccessible：： get_accRole](/windows/win32/api/oleacc/nf-oleacc-iaccessible-get_accrole) 。

### <a name="return-value"></a>返回值

如果成功，则返回 S_OK，失败时返回 COM 错误代码。 请参阅 Windows SDK 中 `IAccessible::get_accRole` 的**返回值**。

### <a name="remarks"></a>备注

此函数是 MFC [Active Accessibility](/windows/win32/WinAuto/microsoft-active-accessibility)支持的一部分。

如果 nonwindowed 用户界面元素（MFC 处理的无窗口 ActiveX 控件除外），请在 `CWnd`派生类中重写此函数。

有关详细信息，请参阅 Windows SDK 中的[IAccessible：： get_accRole](/windows/win32/api/oleacc/nf-oleacc-iaccessible-get_accrole) 。

##  <a name="get_accselection"></a>CWnd：： get_accSelection

由框架调用以检索该对象的选定子级。

```
virtual HRESULT get_accSelection(VARIANT* pvarChildren);
```

### <a name="parameters"></a>parameters

*pvarChildren*<br/>
接收有关所选子项的信息。 请参阅 Windows SDK 中的*pvarChildren* in [IAccessible：： get_accSelection](/windows/win32/api/oleacc/nf-oleacc-iaccessible-get_accselection) 。

### <a name="return-value"></a>返回值

如果成功，则返回 S_OK，失败时返回 COM 错误代码。 请参阅 Windows SDK 中 `IAccessible::get_accSelection` 的**返回值**。

### <a name="remarks"></a>备注

此函数是 MFC [Active Accessibility](/windows/win32/WinAuto/microsoft-active-accessibility)支持的一部分。

如果 nonwindowed 用户界面元素（MFC 处理的无窗口 ActiveX 控件除外），请在 `CWnd`派生类中重写此函数。

有关详细信息，请参阅 Windows SDK 中的[IAccessible：： get_accSelection](/windows/win32/api/oleacc/nf-oleacc-iaccessible-get_accselection) 。

##  <a name="get_accstate"></a>CWnd：： get_accState

由框架调用以检索指定对象的当前状态。

```
virtual HRESULT get_accState(
    VARIANT varChild,
    VARIANT* pvarState);
```

### <a name="parameters"></a>parameters

*varChild*<br/>
指定要检索的状态信息是否为对象或对象的一个子元素。 此参数可以是 CHILDID_SELF （获取有关对象的信息）或子级 ID （以获取有关对象的子元素的信息）。

*pvarState*<br/>
接收有关对象状态的信息。 请参阅 Windows SDK 中的*pvarState* in [IAccessible：： get_accState](/windows/win32/api/oleacc/nf-oleacc-iaccessible-get_accstate) 。

### <a name="return-value"></a>返回值

如果成功，则返回 S_OK，失败时返回 COM 错误代码。 请参阅 Windows SDK 中 `IAccessible::get_accState` 的**返回值**。

### <a name="remarks"></a>备注

此函数是 MFC [Active Accessibility](/windows/win32/WinAuto/microsoft-active-accessibility)支持的一部分。

如果 nonwindowed 用户界面元素（MFC 处理的无窗口 ActiveX 控件除外），请在 `CWnd`派生类中重写此函数。

有关详细信息，请参阅 Windows SDK 中的[IAccessible：： get_accState](/windows/win32/api/oleacc/nf-oleacc-iaccessible-get_accstate) 。

##  <a name="get_accvalue"></a>CWnd：： get_accValue

由框架调用以检索指定对象的值。

```
virtual HRESULT get_accValue(
    VARIANT varChild,
    BSTR* pszValue);
```

### <a name="parameters"></a>parameters

*varChild*<br/>
指定要检索的值信息是否为对象或对象的一个子元素的值。 此参数可以是 CHILDID_SELF （获取有关对象的信息）或子级 ID （以获取有关对象的子元素的信息）。

*pszValue*<br/>
用于接收包含对象当前值的本地化字符串的 BSTR 的地址。

### <a name="return-value"></a>返回值

如果成功，则返回 S_OK，失败时返回 COM 错误代码。 请参阅在 Windows SDK 中的[IAccessible：： get_accValue](/windows/win32/api/oleacc/nf-oleacc-iaccessible-get_accvalue)中**返回值**。

### <a name="remarks"></a>备注

此函数是 MFC [Active Accessibility](/windows/win32/WinAuto/microsoft-active-accessibility)支持的一部分。

如果 nonwindowed 用户界面元素（MFC 处理的无窗口 ActiveX 控件除外），请在 `CWnd`派生类中重写此函数。

有关详细信息，请参阅 Windows SDK 中的[IAccessible：： get_accValue](/windows/win32/api/oleacc/nf-oleacc-iaccessible-get_accvalue) 。

##  <a name="getactivewindow"></a>CWnd：： GetActiveWindow

检索指向活动窗口的指针。

```
static CWnd* PASCAL GetActiveWindow();
```

### <a name="return-value"></a>返回值

活动窗口; 如果调用时没有活动窗口，则为 NULL。 该指针可能是暂时的，不应存储起来供将来使用。

### <a name="remarks"></a>备注

活动窗口可以是具有当前输入焦点的窗口，也可以是由[SetActiveWindow](#setactivewindow)成员函数显式激活的窗口。

##  <a name="getancestor"></a>CWnd：： GetAncestor

检索指定窗口的上级先窗口对象。

```
CWnd* GetAncestor(UINT gaFlags) const;
```

### <a name="parameters"></a>parameters

*gaFlags*<br/>
指定要检索的上级。 有关可能值的完整列表，请参阅[GetAncestor](/windows/win32/api/winuser/nf-winuser-getancestor)。

### <a name="return-value"></a>返回值

如果该函数成功，则返回值是指向上级窗口对象的指针。 如果函数失败，则返回值为 NULL。

### <a name="remarks"></a>备注

此成员函数模拟函数[GetAncestor](/windows/win32/api/winuser/nf-winuser-getancestor)的功能，如 Windows SDK 中所述。

##  <a name="getcapture"></a>CWnd：： GetCapture

检索具有鼠标捕获的窗口。

```
static CWnd* PASCAL GetCapture();
```

### <a name="return-value"></a>返回值

标识具有鼠标捕获的窗口。 如果没有窗口具有鼠标捕获，则为 NULL。

返回值可能是暂时的，不应存储以供以后使用。

### <a name="remarks"></a>备注

在任何给定时间，只有一个窗口具有鼠标捕获。 调用[SetCapture](#setcapture)成员函数时，窗口将接收鼠标捕获。 此窗口接收鼠标输入，无论光标是否在其边界内。

##  <a name="getcaretpos"></a>CWnd：： GetCaretPos

检索插入符号的当前位置的工作区坐标，并将其作为 `CPoint`返回。

```
static CPoint PASCAL GetCaretPos();
```

### <a name="return-value"></a>返回值

[CPoint](../../atl-mfc-shared/reference/cpoint-class.md)对象，包含插入符号位置的坐标。

### <a name="remarks"></a>备注

在 `CWnd` 窗口的工作区坐标中提供插入符号位置。

##  <a name="getcheckedradiobutton"></a>CWnd：： GetCheckedRadioButton

检索指定组中当前选中的单选按钮的 ID。

```
int GetCheckedRadioButton(
    int nIDFirstButton,
    int nIDLastButton);
```

### <a name="parameters"></a>parameters

*nIDFirstButton*<br/>
指定组中第一个单选按钮的整数标识符。

*nIDLastButton*<br/>
指定组中最后一个单选按钮的整数标识符。

### <a name="return-value"></a>返回值

选中的单选按钮的 ID; 如果未选择任何选项，则为0。

##  <a name="getclientrect"></a>CWnd：： GetClientRect

将 `CWnd` 工作区的工作区坐标复制到*lpRect*指向的结构中。

```
void GetClientRect(LPRECT lpRect) const;
```

### <a name="parameters"></a>parameters

*lpRect*<br/>
指向[RECT 结构](/windows/win32/api/windef/ns-windef-rect)或 `CRect` 对象以接收客户端坐标。 `left` 和 `top` 成员将为0。 `right` 和 `bottom` 成员将包含窗口的宽度和高度。

### <a name="remarks"></a>备注

工作区坐标指定工作区的左上角和右下角。 由于与 `CWnd` 工作区的左上角相关，因此，左上角的坐标为（0，0）。

### <a name="example"></a>示例

  请参阅[CWnd：： IsIconic](#isiconic)的示例。

##  <a name="getclipboardowner"></a>CWnd：： GetClipboardOwner

检索剪贴板的当前所有者。

```
static CWnd* PASCAL GetClipboardOwner();
```

### <a name="return-value"></a>返回值

如果函数成功，则标识拥有剪贴板的窗口。 否则为 NULL。

返回的指针可能是暂时的，不应存储以供以后使用。

### <a name="remarks"></a>备注

即使当前不拥有数据，剪贴板仍可以包含数据。

##  <a name="getclipboardviewer"></a>CWnd：： GetClipboardViewer

检索剪贴板查看器链中的第一个窗口。

```
static CWnd* PASCAL GetClipboardViewer();
```

### <a name="return-value"></a>返回值

标识当前负责显示剪贴板的窗口（如果成功）;否则为 NULL （例如，如果没有查看器）。

返回的指针可能是暂时的，不应存储以供以后使用。

##  <a name="getcontrolunknown"></a>CWnd：： GetControlUnknown

调用此成员函数以检索指向未知 OLE 控件的指针。

```
LPUNKNOWN GetControlUnknown();
```

### <a name="return-value"></a>返回值

指向 OLE 控件的[IUnknown](/windows/win32/api/unknwn/nn-unknwn-iunknown)接口的指针，该控件由此 `CWnd` 对象表示。 如果此对象不表示 OLE 控件，则返回值为 NULL。

### <a name="remarks"></a>备注

不应释放此 `IUnknown` 指针。 通常，您将使用来获取控件的特定接口。

`GetControlUnknown` 返回的接口指针不是引用计数的。 不要对指针调用[iunknown：： Release](/windows/win32/api/unknwn/nf-unknwn-iunknown-release) ，除非之前已在其上调用[Iunknown：： AddRef](/windows/win32/api/unknwn/nf-unknwn-iunknown-addref) 。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#96](../../mfc/reference/codesnippet/cpp/cwnd-class_35.cpp)]

##  <a name="getcurrentmessage"></a>CWnd：： GetCurrentMessage

返回指向此窗口当前正在处理的消息的指针。 仅当在<em>消息</em>**消息处理**程序成员函数中时，才应调用。

```
static const MSG* PASCAL GetCurrentMessage();
```

### <a name="return-value"></a>返回值

返回一个指向[MSG](/windows/win32/api/winuser/ns-winuser-msg)结构的指针，该结构包含当前正在处理的消息。 仅**当在**<em>消息</em>处理程序中时才应调用。

### <a name="example"></a>示例

  请参阅[CMDIFrameWnd：： MDICascade](../../mfc/reference/cmdiframewnd-class.md#mdicascade)的示例。

##  <a name="getdc"></a>CWnd：： GetDC

根据为 `CWnd`指定的类样式，检索指向客户端区域的公共、类或专用设备上下文的指针。

```
CDC* GetDC();
```

### <a name="return-value"></a>返回值

如果成功，则为 `CWnd` 工作区标识设备上下文;否则，返回值为 NULL。 该指针可能是暂时的，不应存储起来供将来使用。

### <a name="remarks"></a>备注

对于常见的设备上下文，每次检索默认属性时，`GetDC` 都将其分配给上下文。 对于类和私有上下文，`GetDC` 将以前分配的属性保持不变。 设备上下文可用于后续图形设备接口（GDI）函数中，以在工作区中进行绘制。

除非设备上下文属于窗口类，否则必须调用[ReleaseDC](#releasedc)成员函数以便在绘制后释放上下文。

如果在注册类时 CS_CLASSDC、CS_OWNDC 或 CS_PARENTDC 指定为 `WNDCLASS` 结构中的样式，则 `GetDC` 成员函数将返回属于 `CWnd` 类的设备上下文。

##  <a name="getdcex"></a>CWnd：： GetDCEx

检索 `CWnd` 窗口的设备上下文的句柄。

```
CDC* GetDCEx(
    CRgn* prgnClip,
    DWORD flags);
```

### <a name="parameters"></a>parameters

*prgnClip*<br/>
标识可与客户端窗口的可见区域组合的剪辑区域。

*flag*<br/>
可以具有以下预设值之一：

- DCX_CACHE 从缓存而不是 OWNDC 或 CLASSDC 窗口返回设备上下文。 重写 CS_OWNDC 和 CS_CLASSDC。

- DCX_CLIPCHILDREN 排除 `CWnd` 窗口下所有子窗口的可见区域。

- DCX_CLIPSIBLINGS 在 "`CWnd`" 窗口上方排除所有同级窗口的可见区域。

- DCX_EXCLUDERGN 从返回的设备上下文的可见区域中排除*prgnClip*标识的剪辑区域。

- DCX_INTERSECTRGN 在返回的设备上下文的可见区域内与*prgnClip*标识的剪辑区域相交。

- 即使存在有效的 `LockWindowUpdate` 调用，DCX_LOCKWINDOWUPDATE 也允许绘图，否则将排除此窗口。 此值用于在跟踪期间进行绘制。

- DCX_PARENTCLIP 使用父窗口的可见区域，并且忽略父窗口的 WS_CLIPCHILDREN 和 WS_PARENTDC 样式位。 此值将设备上下文的源设置为 `CWnd` 窗口的左上角。

- DCX_WINDOW 返回对应于窗口矩形而不是客户端矩形的设备上下文。

### <a name="return-value"></a>返回值

如果函数成功，则为指定窗口的设备上下文;否则为 NULL。

### <a name="remarks"></a>备注

设备上下文可在后续的 GDI 函数中用于在工作区中进行绘制。

此函数是对[GetDC](/windows/win32/api/winuser/nf-winuser-getdc)函数的扩展，它使应用程序能够更好地控制窗口的设备上下文是否被剪裁。

除非设备上下文属于窗口类，否则必须调用[ReleaseDC](/windows/win32/api/winuser/nf-winuser-releasedc)函数，以便在绘制后释放上下文。 由于在任何给定时间只有五个常见设备上下文都可用，因此无法释放设备上下文会阻止其他应用程序获取对设备上下文的访问权限。

若要获取缓存的设备上下文，应用程序必须指定[DCX_CACHE](/windows/win32/api/winuser/nf-winuser-getdcex)。 如果未指定 DCX_CACHE 并且该窗口既不 CS_OWNDC 也不[CS_CLASSDC](/windows/win32/api/winuser/ns-winuser-wndclassw)，则此函数将返回 NULL。

如果注册类时在[WNDCLASS](/windows/win32/api/winuser/ns-winuser-wndclassw)结构中指定了 CS_CLASSDC、 [CS_OWNDC](/windows/win32/api/winuser/ns-winuser-wndclassw)或[CS_PARENTDC](/windows/win32/api/winuser/ns-winuser-wndclassw)样式，则[GetDCEx](/windows/win32/api/winuser/nf-winuser-getdcex)函数将返回具有特殊特性的设备上下文。

有关这些特征的详细信息，请参阅 Windows SDK 中对 `WNDCLASS` 结构的描述。

##  <a name="getdcrendertarget"></a>CWnd：： GetDCRenderTarget

检索 `CWnd` 窗口的设备上下文 (DC) 呈现目标。

```
CDCRenderTarget* GetDCRenderTarget();
```

### <a name="return-value"></a>返回值

如果函数成功，则是指定窗口的设备上下文呈现目标；否则为 NULL。

### <a name="remarks"></a>备注

##  <a name="getdescendantwindow"></a>CWnd：： GetDescendantWindow

调用此成员函数以查找由给定 ID 指定的子代窗口。

```
CWnd* GetDescendantWindow(
    int nID,
    BOOL bOnlyPerm = FALSE) const;
```

### <a name="parameters"></a>parameters

*nID*<br/>
指定要检索的控件或子窗口的标识符。

*bOnlyPerm*<br/>
指定要返回的窗口是否可以是临时窗口。 如果为 TRUE，则只能返回一个永久窗口;如果为 FALSE，则函数可以返回临时窗口。 有关临时窗口的详细信息，请参阅[技术说明 3](../../mfc/tn003-mapping-of-windows-handles-to-objects.md)。

### <a name="return-value"></a>返回值

指向 `CWnd` 对象的指针; 如果找不到子窗口，则为 NULL。

### <a name="remarks"></a>备注

此成员函数将搜索子窗口的整个树，而不仅搜索直接子项的窗口。

##  <a name="getdesktopwindow"></a>CWnd：： GetDesktopWindow

返回 Windows 桌面窗口。

```
static CWnd* PASCAL GetDesktopWindow();
```

### <a name="return-value"></a>返回值

标识 Windows 桌面窗口。 此指针可能是暂时的，不应存储以供以后使用。

### <a name="remarks"></a>备注

桌面窗口涵盖了整个屏幕，是在其上绘制所有图标和其他窗口的区域。

##  <a name="getdlgctrlid"></a>CWnd：： GetDlgCtrlID

返回任何子窗口的窗口或控件 ID 值，而不是返回对话框中控件的 ID 值。

```
int GetDlgCtrlID() const;
```

### <a name="return-value"></a>返回值

如果函数成功，则为 `CWnd` 子窗口的数字标识符;否则为0。

### <a name="remarks"></a>备注

由于顶级窗口没有 ID 值，因此，如果 `CWnd` 是顶级窗口，则此函数的返回值无效。

### <a name="example"></a>示例

  请参阅[CWnd：： OnCtlColor](#onctlcolor)的示例。

##  <a name="getdlgitem"></a>CWnd：： GetDlgItem

检索指向对话框或其他窗口中的指定控件或子窗口的指针。

```
CWnd* GetDlgItem(int nID) const;

void GetDlgItem(
    int nID,
    HWND* phWnd) const;
```

### <a name="parameters"></a>parameters

*nID*<br/>
指定要检索的控件或子窗口的标识符。

*phWnd*<br/>
指向子窗口的指针。

### <a name="return-value"></a>返回值

指向给定控件或子窗口的指针。 如果不存在具有*nID*参数给定的整数 ID 的控件，则该值为 NULL。

返回的指针可能是暂时的，不应存储以供以后使用。

### <a name="remarks"></a>备注

返回的指针通常转换为*nID*标识的控件类型。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#97](../../mfc/reference/codesnippet/cpp/cwnd-class_36.cpp)]

##  <a name="getdlgitemint"></a>CWnd：： GetDlgItemInt

检索*nID*标识的控件的文本。

```
UINT GetDlgItemInt(
    int nID,
    BOOL* lpTrans = NULL,
    BOOL bSigned = TRUE) const;
```

### <a name="parameters"></a>parameters

*nID*<br/>
指定要转换的对话框控件的整数标识符。

*lpTrans*<br/>
指向要接收已转换标志的布尔变量。

*bSigned*<br/>
指定要检索的值是否已签名。

### <a name="return-value"></a>返回值

指定对话框项文本的已翻译值。 因为0是有效的返回值，所以必须使用*lpTrans*来检测错误。 如果需要已签名的返回值，请将其转换为**int**类型。

如果已转换的编号大于 INT_MAX （对于有符号数字）或 UINT_MAX （表示无符号），该函数将返回0。

发生错误时（例如遇到非数字字符，超过以上最大值），`GetDlgItemInt` 将0复制到*lpTrans*指向的位置。 如果没有错误， *lpTrans*将收到非零值。 如果*lpTrans*为 NULL，则 `GetDlgItemInt` 不会对错误发出警告。

### <a name="remarks"></a>备注

它将给定对话框中指定控件的文本转换为整数值，方法是在文本开头去除任何多余空格并将十进制数字转换为整数值。 它在到达文本末尾或遇到任何非数字字符时停止转换。

如果*bSigned*为 TRUE，则 `GetDlgItemInt` 检查文本开头的减号（-），并将文本转换为有符号数字。 否则，它将创建一个无符号值。

它将[WM_GETTEXT](/windows/win32/winmsg/wm-gettext)消息发送到控件。

##  <a name="getdlgitemtext"></a>CWnd：： GetDlgItemText

调用此成员函数以检索与对话框中的控件关联的标题或文本。

```
int GetDlgItemText(
    int nID,
    LPTSTR lpStr,
    int nMaxCount) const;

int GetDlgItemText(
    int nID,
    CString& rString) const;
```

### <a name="parameters"></a>parameters

*nID*<br/>
指定要检索其标题的控件的整数标识符。

*lpStr*<br/>
指向缓冲区以接收控件的标题或文本。

*nMaxCount*<br/>
指定要复制到*lpStr*的字符串的最大长度（以字符为字符）。 如果字符串的长度超过*nMaxCount*，则会被截断。

*rString*<br/>
对[CString](../../atl-mfc-shared/reference/cstringt-class.md)的引用。

### <a name="return-value"></a>返回值

指定复制到缓冲区的实际字符数，不包括终止 null 字符。 如果没有复制任何文本，则该值为0。

### <a name="remarks"></a>备注

`GetDlgItemText` 成员函数将文本复制到*lpStr*指向的位置，并返回其复制的字节数的计数。

##  <a name="getdsccursor"></a>CWnd：： GetDSCCursor

调用此成员函数以检索指向由数据源控件的数据源、用户名、密码和 SQL 属性定义的基础游标的指针。

```
IUnknown* GetDSCCursor();
```

### <a name="return-value"></a>返回值

一个指针，指向由数据源控件定义的游标。 MFC 负责为指针调用 `AddRef`。

### <a name="remarks"></a>备注

使用返回的指针设置复杂数据绑定控件（如数据绑定网格控件）的 ICursor 属性。 数据源控件将不会变为活动状态，直到第一个绑定控件请求其游标。 这可能是通过调用 `GetDSCCursor` 或由 MFC 绑定管理器隐式发生的。 在任一情况下，都可以通过调用 `GetDSCCursor`，然后在返回的指向 `IUnknown`的指针上调用 `Release` 来强制数据源控件变为活动状态。 激活将导致数据源控件尝试连接到基础数据源。 返回的指针可能用于以下上下文：

### <a name="example"></a>示例

[!code-cpp[NVC_MFC_AxDataBinding#5](../../mfc/reference/codesnippet/cpp/cwnd-class_37.cpp)]

##  <a name="getdynamiclayout"></a>CWnd：： GetDynamicLayout

检索指向动态布局管理器对象的指针。

```
CMFCDynamicLayout* GetDynamicLayout();
```

### <a name="return-value"></a>返回值

动态布局管理器对象的指针，如果未启用动态布局，则为 NULL。

### <a name="remarks"></a>备注

窗口对象拥有并管理返回的指针的生存期，因此它只应该用于访问对象；不要删除指针或永久存储指针。

##  <a name="getexstyle"></a>CWnd：： GetExStyle

返回窗口的扩展样式。

```
DWORD GetExStyle() const;
```

### <a name="return-value"></a>返回值

窗口的扩展样式。 有关 MFC 中使用的扩展窗口样式的详细信息，请参阅[扩展窗口样式](../../mfc/reference/styles-used-by-mfc.md#extended-window-styles)。

##  <a name="getfocus"></a>CWnd：： GetFocus

检索指向当前具有输入焦点的 `CWnd` 的指针。

```
static CWnd* PASCAL GetFocus();
```

### <a name="return-value"></a>返回值

指向具有当前焦点的窗口的指针; 如果没有焦点窗口，则为 NULL。

该指针可能是暂时的，不应存储起来供将来使用。

##  <a name="getfont"></a>CWnd：： Ivsfontandcolorstorage.getfont 错误

将 WM_GETFONT 消息发送到窗口以检索当前字体。

```
CFont* GetFont() const;
```

### <a name="return-value"></a>返回值

指向附加到窗口当前字体的[CFont](../../mfc/reference/cfont-class.md)对象的指针。

### <a name="remarks"></a>备注

此方法不起作用，除非窗口处理 WM_GETFONT 消息。 派生自的许多 MFC 类 `CWnd` 处理此消息，因为它们附加到包含 WM_GETFONT 消息的消息处理程序的预定义窗口类中。 若要使用此方法，从 `CWnd` 派生的类必须为 WM_GETFONT 消息定义方法处理程序。

##  <a name="getforegroundwindow"></a>CWnd：： GetForegroundWindow

返回指向前景窗口（用户当前正在使用的窗口）的指针。

```
static CWnd* PASCAL GetForegroundWindow();
```

### <a name="return-value"></a>返回值

指向前台窗口的指针。 这可能是暂时性的 `CWnd` 对象。

### <a name="remarks"></a>备注

前景窗口仅适用于顶级窗口（框架窗口或对话框）。

##  <a name="geticon"></a>CWnd：： GetIcon

调用此成员函数以获取大（32x32）或小（16x16）图标的句柄，如*bBigIcon*所示。

```
HICON GetIcon(BOOL bBigIcon) const;
```

### <a name="parameters"></a>parameters

*bBigIcon*<br/>
如果为 TRUE，则指定32像素 x 32 像素图标;如果为 FALSE，则指定 16 x 16 像素图标。

### <a name="return-value"></a>返回值

图标的图柄。 如果不成功，则返回 NULL。

##  <a name="getlastactivepopup"></a>CWnd：： GetLastActivePopup

确定最近处于活动状态的由 `CWnd` 拥有的弹出窗口。

```
CWnd* GetLastActivePopup() const;
```

### <a name="return-value"></a>返回值

标识最近活动的弹出窗口。 如果满足下列任一条件，则返回值将是窗口本身：

- 窗口本身为最近活动状态。

- 此窗口不拥有任何弹出窗口。

- 此窗口不是顶级窗口，或者是其他窗口所拥有的窗口。

该指针可能是暂时的，不应存储起来供将来使用。

### <a name="example"></a>示例

  请参阅[CWnd：： FindWindow](#findwindow)的示例。

##  <a name="getlayeredwindowattributes"></a>CWnd：： GetLayeredWindowAttributes

检索分层窗口的不透明度和透明度颜色键。

```
BOOL GetLayeredWindowAttributes(
    COLORREF* pcrKey,
    BYTE* pbAlpha,
    DWORD* pdwFlags) const;
```

### <a name="parameters"></a>parameters

*pcrKey*<br/>
指向 COLORREF 值的指针，该值用于在编写分层窗口时接收要使用的透明度颜色键。 此颜色的窗口绘制的所有像素都将是透明的。 如果不需要参数，则此值可以为 NULL。

*pbAlpha*<br/>
一个指向字节的指针，该字节接收用于描述分层窗口的不透明度的 Alpha 值。 当*pbAlpha*引用的变量为0时，窗口是完全透明的。 当*pbAlpha*引用的变量为255时，窗口是不透明的。 如果不需要参数，则此值可以为 NULL。

*pdwFlags*<br/>
指向接收分层标志的 DWORD 的指针。 如果不需要参数，则此值可以为 NULL。 有关可能值的完整列表，请参阅[GetLayeredWindowAttributes](/windows/win32/api/winuser/nf-winuser-getlayeredwindowattributes)。

### <a name="return-value"></a>返回值

如果函数成功，则为非零值；否则为

### <a name="remarks"></a>备注

此成员函数模拟函数[GetLayeredWindowAttributes](/windows/win32/api/winuser/nf-winuser-getlayeredwindowattributes)的功能，如 Windows SDK 中所述。

##  <a name="getmenu"></a>CWnd：： GetMenu

检索指向此窗口的菜单的指针。

```
CMenu* GetMenu() const;
```

### <a name="return-value"></a>返回值

标识菜单。 如果 `CWnd` 没有菜单，则该值为 NULL。 如果 `CWnd` 是子窗口，则返回值是不确定的。

返回的指针可能是暂时的，不应存储以供以后使用。

### <a name="remarks"></a>备注

此函数不应用于子窗口，因为它没有菜单。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#98](../../mfc/reference/codesnippet/cpp/cwnd-class_38.cpp)]

##  <a name="getmenubarinfo"></a>CWnd：： GetMenuBarInfo

检索有关指定菜单栏的信息。

```
BOOL GetMenuBarInfo(
    LONG idObject,
    LONG idItem,
    PMENUBARINFO pmbi) const;
```

### <a name="parameters"></a>parameters

*idObject*<br/>
指定菜单对象。 有关可能值的列表，请参阅[GetMenuBarInfo](/windows/win32/api/winuser/nf-winuser-getmenubarinfo)。

*idItem*<br/>
指定要为其检索信息的项。 如果此参数为零，则函数检索有关菜单本身的信息。 如果此参数为1，则该函数检索有关菜单上第一项的信息等。

*pmbi*<br/>
指向接收信息的[MENUBARINFO](/windows/win32/api/winuser/ns-winuser-menubarinfo)结构的指针。

### <a name="return-value"></a>返回值

如果函数成功，则为非零值；否则为

### <a name="remarks"></a>备注

此成员函数模拟函数[GetMenuBarInfo](/windows/win32/api/winuser/nf-winuser-getmenubarinfo)的功能，如 Windows SDK 中所述。

##  <a name="getnextdlggroupitem"></a>CWnd：： GetNextDlgGroupItem

在对话框中的一组控件内搜索上一个或下一个控件。

```
CWnd* GetNextDlgGroupItem(
    CWnd* pWndCtl,
    BOOL bPrevious = FALSE) const;

COleControlSiteOrWnd* GetNextDlgGroupItem(
    COleControlSiteOrWnd* pCurSiteOrWnd = NULL) const;
```

### <a name="parameters"></a>parameters

*pWndCtl*<br/>
标识要用作搜索开始点的控件。

*bPrevious*<br/>
指定函数在对话框中搜索控件组的方式。 如果为 TRUE，则函数将搜索组中的上一个控件;如果为 FALSE，则搜索组中的下一个控件。

*pCurSiteOrWnd*<br/>
标识 `COleControlSiteOrWnd` 控件。 有关 `COleControlSiteOrWnd`的详细信息，请参阅 "**备注**"。

### <a name="return-value"></a>返回值

如果成员函数成功，则为指向组中上一个或下一个控件的指针。

返回的指针可能是暂时的，不应存储以供以后使用。

### <a name="remarks"></a>备注

一组控件以[WS_GROUP](styles-used-by-mfc.md#window-styles)样式创建的控件开头，并以不是使用 WS_GROUP 样式创建的最后一个控件结束。

默认情况下，`GetNextDlgGroupItem` 成员函数返回指向组中下一个控件的指针。 如果*pWndCtl*标识组中的第一个控件并且*bPrevious*为 TRUE，则 `GetNextDlgGroupItem` 返回指向组中最后一个控件的指针。

> [!NOTE]
> 由于 MFC 支持无窗口 ActiveX 控件、标准 ActiveX 控件和 windows，因此仅通过 HWND 引用控件不再后缀。 `COleControlSiteOrWnd` 对象包括将对象标识为有窗口的 ActiveX 控件、无窗口 ActiveX 控件或窗口的信息，如下所示：

|控件或窗口类型|标识信息|
|----------------------------|-----------------------------|
|开窗 ActiveX 控件|包含 HWND 并将[COleControlSite](../../mfc/reference/colecontrolsite-class.md)对象与它相关联。 `COleControlSiteOrWnd` 的 `m_hWnd` 成员设置为控件的 HWND，`m_pSite` 成员指向控件的 `COleControlSite`。|
|无窗口 ActiveX 控件|不包含 HWND。 `COleControlSiteOrWnd` 的 `m_pSite` 成员指向控件的 `COleControlSite`，`m_hWnd` 成员为 NULL。|
|标准窗口|只包含一个 HWND。 `COleControlSiteOrWnd` 的 `m_hWnd` 成员设置为窗口的 HWND，`m_pSite` 成员为 NULL。|

##  <a name="getnextdlgtabitem"></a>CWnd：： GetNextDlgTabItem

检索一个指针，该指针指向使用[WS_TABSTOP](styles-used-by-mfc.md#window-styles)样式创建并在指定控件之前或之后的第一个控件。

```
CWnd* GetNextDlgTabItem(
    CWnd* pWndCtl,
    BOOL bPrevious = FALSE) const;

COleControlSiteOrWnd* GetNextDlgTabItem(
    COleControlSiteOrWnd* pCurSiteOrWnd,
    BOOL bPrevious) const;
```

### <a name="parameters"></a>parameters

*pWndCtl*<br/>
标识要用作搜索开始点的控件。

*pCurSiteOrWnd*<br/>
标识 `COleControlSiteOrWnd` 控件。 有关 `COleControlSiteOrWnd`的详细信息，请参阅[CWnd：： GetNextDlgGroupItem](#getnextdlggroupitem)。

*bPrevious*<br/>
指定函数在对话框中的搜索方式。 如果为 TRUE，则函数将在对话框中搜索上一个控件;如果为 FALSE，则搜索下一个控件。

### <a name="return-value"></a>返回值

指向具有 WS_TABSTOP 样式的上一页或下一页控件（如果成员函数成功）的指针。

返回的指针可能是暂时的，不应存储以供以后使用。

有关 `COleControlSiteOrWnd`的详细信息，请参阅[CWnd：： GetNextDlgGroupItem](#getnextdlggroupitem)。

##  <a name="getnextwindow"></a>CWnd：： GetNextWindow

搜索窗口管理器列表中的下一个（或上一个）窗口。

```
CWnd* GetNextWindow(UINT nFlag = GW_HWNDNEXT) const;
```

### <a name="parameters"></a>parameters

*nFlag*<br/>
指定函数是否返回指向下一窗口或上一窗口的指针。 它可以是 GW_HWNDNEXT （返回在窗口管理器列表中 `CWnd` 对象后的窗口），也可以是 GW_HWNDPREV，这将返回窗口管理器列表中的上一个窗口。

### <a name="return-value"></a>返回值

如果成员函数成功，则标识窗口管理器列表中的下一个（或上一个）窗口。

返回的指针可能是暂时的，不应存储以供以后使用。

### <a name="remarks"></a>备注

窗口管理器的列表包含所有顶级窗口、其关联的子窗口和任何子窗口的子窗口的条目。

如果 `CWnd` 是顶级窗口，则函数将搜索下一个（或上一个）顶级窗口;如果 `CWnd` 是子窗口，则函数将搜索下一个（或上一个）子窗口。

##  <a name="getolecontrolsite"></a>CWnd：： GetOleControlSite

检索指定 ActiveX 控件的自定义站点。

```
COleControlSite* GetOleControlSite(UINT idControl) const;
```

### <a name="parameters"></a>parameters

*idControl*<br/>
ActiveX 控件的 ID。

##  <a name="getopenclipboardwindow"></a>CWnd：： GetOpenClipboardWindow

检索当前打开剪贴板的窗口的句柄。

```
static CWnd* PASCAL GetOpenClipboardWindow();
```

### <a name="return-value"></a>返回值

如果函数成功，则为当前打开剪贴板的窗口的句柄;否则为 NULL。

##  <a name="getowner"></a>CWnd：： GetOwner

检索指向窗口所有者的指针。

```
CWnd* GetOwner() const;
```

### <a name="return-value"></a>返回值

一个指向 `CWnd` 对象的指针。

### <a name="remarks"></a>备注

如果窗口没有所有者，则默认情况下将返回一个指向父窗口对象的指针。 请注意，所有者和拥有方之间的关系与几个重要方面的父子特性不同。 例如，具有父级的窗口被限制为其父窗口的工作区。 可以在桌面上的任意位置绘制拥有的窗口。

此功能的所有权概念与[GetWindow](/windows/win32/api/winuser/nf-winuser-getwindow)的所有权概念不同。

##  <a name="getparent"></a>CWnd：： GetParent

调用此函数可获取指向子窗口的父窗口（如果有）的指针。

```
CWnd* GetParent() const;
```

### <a name="return-value"></a>返回值

请参阅 Windows SDK 中[GetParent](/windows/win32/api/winuser/nf-winuser-getparent)的返回值部分。

### <a name="remarks"></a>备注

`GetParent` 函数返回指向直接父项的指针（如果存在）。 与此相反， [GetParentOwner](#getparentowner)函数返回一个指针，指向最直接的父窗口或所有者窗口，该窗口不是子窗口（没有 WS_CHILD 样式）。 如果子窗口中有子窗口 `GetParent` 并且 `GetParentOwner` 返回不同的结果。

##  <a name="getparentframe"></a>CWnd：： GetParentFrame

调用此成员函数以检索父框架窗口。

```
CFrameWnd* GetParentFrame() const;
```

### <a name="return-value"></a>返回值

如果成功，则为指向帧窗口的指针;否则为 NULL。

### <a name="remarks"></a>备注

此成员函数在父链中向上搜索，直到找到[CFrameWnd](../../mfc/reference/cframewnd-class.md) （或派生类）对象。

##  <a name="getparentowner"></a>CWnd：： GetParentOwner

调用此成员函数以获取指向子窗口的父窗口或所有者窗口的指针。

```
CWnd* GetParentOwner() const;
```

### <a name="return-value"></a>返回值

一个指向 `CWnd` 对象的指针。 如果 `CWnd` 对象未附加到该句柄，则会创建并附加一个临时 `CWnd` 对象。 该指针可能是暂时的，不应存储起来供将来使用。

### <a name="remarks"></a>备注

`GetParentOwner` 返回指向最直接的父窗口或所有者窗口的指针，该指针不是子窗口（没有 WS_CHILD 样式）。 当前所有者窗口可以通过[SetOwner](#setowner)设置。 默认情况下，窗口的父级为其所有者。

与此相反， [GetParent](#getparent)函数将返回指向直接父级的指针，无论它是否为子窗口。 如果子窗口中有子窗口 `GetParent` 并且 `GetParentOwner` 返回不同的结果。

##  <a name="getproperty"></a>CWnd：： GetProperty

调用此成员函数以获取*dwDispID*指定的 ActiveX 控件属性。

```
void GetProperty(
    DISPID dwDispID,
    VARTYPE vtProp,
    void* pvProp)const;
```

### <a name="parameters"></a>parameters

*dwDispID*<br/>
标识要检索的属性。

*vtProp*<br/>
指定要检索的属性的类型。 有关可能的值，请参阅备注部分 [COleDispatchDriver::InvokeHelper](../../mfc/reference/coledispatchdriver-class.md#invokehelper)。

*pvProp*<br/>
将接收属性值的变量的地址。 它必须与*vtProp*指定的类型匹配。

### <a name="remarks"></a>备注

`GetProperty` 通过*pvProp*返回该值。

> [!NOTE]
> 只应在表示 ActiveX 控件的 `CWnd` 对象上调用此函数。

有关将此成员函数与 ActiveX 控件容器一起使用的详细信息，请参阅文章[Activex 控件容器：对 Activex 控件容器中的 Activex 控件进行编程](../../mfc/programming-activex-controls-in-a-activex-control-container.md)。

##  <a name="getrendertarget"></a>CWnd：： GetRenderTarget

获取与此窗口相关联的呈现目标。

```
CHwndRenderTarget* GetRenderTarget();
```

### <a name="return-value"></a>返回值

指向呈现器目标的指针或 NULL。

##  <a name="getsafehwnd"></a>CWnd：： GetSafeHwnd

返回 `m_hWnd`，如果**this**指针为 null，则返回 null。

```
HWND GetSafeHwnd() const;
```

### <a name="return-value"></a>返回值

返回窗口的窗口句柄。 如果 `CWnd` 未附加到窗口或者与 NULL `CWnd` 指针一起使用，则返回 NULL。

### <a name="example"></a>示例

  请参阅[CWnd：： SubclassWindow](#subclasswindow)的示例。

##  <a name="getsafeowner"></a>CWnd：： GetSafeOwner

调用此成员函数以检索应该用于对话框或其他模式窗口的所有者窗口。

```
static CWnd* GetSafeOwner(
    CWnd* pParent = NULL,
    HWND* pWndTop = NULL);
```

### <a name="parameters"></a>parameters

*pParent*<br/>
指向父级 `CWnd` 窗口的指针。 可以为 NULL。

*pWndTop*<br/>
指向当前位于顶部的窗口的指针。 可以为 NULL。

### <a name="return-value"></a>返回值

指向给定窗口的安全所有者的指针。

### <a name="remarks"></a>备注

安全所有者是*pParent*的第一个非子父窗口。 如果*pParent*为 NULL，则将使用线程的主窗口（通过[AfxGetMainWnd](../../mfc/reference/application-information-and-management.md#afxgetmainwnd)检索）来查找所有者。

> [!NOTE]
> 框架本身使用此函数来确定不指定所有者的对话框和属性表的正确所有者窗口。

##  <a name="getscrollbarctrl"></a>CWnd：： GetScrollBarCtrl

调用此成员函数以获取指向指定同级滚动条或拆分窗口的指针。

```
virtual CScrollBar* GetScrollBarCtrl(int nBar) const;
```

### <a name="parameters"></a>parameters

*nBar*<br/>
指定滚动条的类型。 参数可以采用下列值之一：

- SB_HORZ 检索水平滚动条的位置。

- SB_VERT 检索垂直滚动条的位置。

### <a name="return-value"></a>返回值

同级滚动条控件; 如果没有，则为 NULL。

### <a name="remarks"></a>备注

此成员函数不会对在创建窗口期间设置 WS_HSCROLL 或 WS_VSCROLL 位时创建的滚动条进行操作。 此函数的 `CWnd` 实现只返回 NULL。 派生类（如 `CView`）实现了所述功能。

##  <a name="getscrollbarinfo"></a>CWnd：： GetScrollBarInfo

检索有关指定滚动条的信息。

```
BOOL GetScrollBarInfo(
    LONG idObject,
    PSCROLLBARINFO psbi) const;
```

### <a name="parameters"></a>parameters

*idObject*<br/>
指定菜单对象。 有关可能值的列表，请参阅[GetScrollBarInfo](/windows/win32/api/winuser/nf-winuser-getscrollbarinfo)。

*psbi*<br/>
指向接收信息的[SCROLLBARINFO](/windows/win32/api/winuser/ns-winuser-scrollbarinfo)结构的指针。

### <a name="return-value"></a>返回值

如果函数成功，则为非零值；否则为

### <a name="remarks"></a>备注

此成员函数模拟函数[GetScrollBarInfo](/windows/win32/api/winuser/nf-winuser-getscrollbarinfo)的功能，如 Windows SDK 中所述。

##  <a name="getscrollinfo"></a>CWnd：： GetScrollInfo

调用此成员函数以检索 `SCROLLINFO` 结构对滚动条所维护的信息。

```
BOOL GetScrollInfo(
    int nBar,
    LPSCROLLINFO lpScrollInfo,
    UINT nMask = SIF_ALL);
```

### <a name="parameters"></a>parameters

*nBar*<br/>
指定滚动条是控件还是窗口的非工作区的一部分。 如果它是非工作区的一部分， *nBar*还指示是水平还是垂直定位滚动条。 它必须是以下各项之一：

- SB_CTL 检索滚动条控件的参数。 `m_hWnd` 数据成员必须是滚动条控件的句柄。

- SB_HORZ 检索窗口的标准水平滚动条的参数。

- SB_VERT 检索窗口标准垂直滚动条的参数。

*lpScrollInfo*<br/>
指向[SCROLLINFO](/windows/win32/api/winuser/ns-winuser-scrollinfo)结构的指针。 有关此结构的详细信息，请参阅 Windows SDK。

*nMask*<br/>
指定要检索的滚动条参数。 默认值指定 SIF_PAGE、SIF_POS、SIF_TRACKPOS 和 SIF_RANGE 的组合。 有关*nMask*值的详细信息，请参阅 `SCROLLINFO`。

### <a name="return-value"></a>返回值

如果消息检索到了任何值，则返回值为 TRUE。 否则为 FALSE。

### <a name="remarks"></a>备注

`GetScrollInfo` 使应用程序可以使用32位滚动位置。

[SCROLLINFO](/windows/win32/api/winuser/ns-winuser-scrollinfo)结构包含滚动条的相关信息，包括最小和最大滚动位置、页面大小和滚动框（滚动块）的位置。 有关更改结构默认值的详细信息，请参阅 Windows SDK 中的 `SCROLLINFO` 结构主题。

MFC Windows 消息处理程序（指示滚动条位置， [CWnd：： OnHScroll](#onhscroll)和[CWnd：： OnVScroll](#onvscroll)）仅提供16位的位置数据。 `GetScrollInfo` 和 `SetScrollInfo` 提供32位的滚动条位置数据。 因此，应用程序在处理 `CWnd::OnHScroll` 或 `CWnd::OnVScroll` 以获取32位滚动条位置数据时，可以调用 `GetScrollInfo`。

##  <a name="getscrolllimit"></a>CWnd：： GetScrollLimit

调用此成员函数以检索滚动条的最大滚动位置。

```
int GetScrollLimit(int nBar);
```

### <a name="parameters"></a>parameters

*nBar*<br/>
指定滚动条的类型。 参数可以采用下列值之一：

- SB_HORZ 检索水平滚动条的滚动限制。

- SB_VERT 检索垂直滚动条的滚动限制。

### <a name="return-value"></a>返回值

指定滚动条成功的最大位置;否则为0。

##  <a name="getscrollpos"></a>CWnd：： GetScrollPos

检索滚动条的滚动框的当前位置。

```
int GetScrollPos(int nBar) const;
```

### <a name="parameters"></a>parameters

*nBar*<br/>
指定要检查的滚动条。 参数可以采用下列值之一：

- SB_HORZ 检索水平滚动条的位置。

- SB_VERT 检索垂直滚动条的位置。

### <a name="return-value"></a>返回值

指定滚动条中滚动框的当前位置（如果成功）;否则为0。

### <a name="remarks"></a>备注

当前位置是依赖于当前滚动范围的相对值。 例如，如果滚动范围为50到100，滚动框处于条形的中间，则当前位置为75。

##  <a name="getscrollrange"></a>CWnd：： GetScrollRange

将给定滚动条的当前最小和最大滚动条位置复制到*lpMinPos*和*lpMaxPos*指定的位置。

```
void GetScrollRange(
    int nBar,
    LPINT lpMinPos,
    LPINT lpMaxPos) const;
```

### <a name="parameters"></a>parameters

*nBar*<br/>
指定要检查的滚动条。 参数可以采用下列值之一：

- SB_HORZ 检索水平滚动条的位置。

- SB_VERT 检索垂直滚动条的位置。

*lpMinPos*<br/>
指向要接收最小位置的整数变量。

*lpMaxPos*<br/>
指向要接收最大位置的整数变量。

### <a name="remarks"></a>备注

如果 `CWnd` 没有滚动条，则 `GetScrollRange` 成员函数将0复制到*lpMinPos*和*lpMaxPos*。

标准滚动条的默认范围为0到100。 滚动条控件的默认范围为空（这两个值均为0）。

##  <a name="getstyle"></a>CWnd：： GetStyle

返回当前窗口样式。

```
DWORD GetStyle() const;
```

### <a name="return-value"></a>返回值

窗口的样式。 有关 MFC 中使用的窗口样式的详细信息，请参阅[窗口样式](styles-used-by-mfc.md#window-styles)。

##  <a name="getsystemmenu"></a>CWnd：： GetSystemMenu

允许应用程序访问控件菜单以进行复制和修改。

```
CMenu* GetSystemMenu(BOOL bRevert) const;
```

### <a name="parameters"></a>parameters

*bRevert*<br/>
指定要执行的操作。 如果*bRevert*为 FALSE，`GetSystemMenu` 将返回当前正在使用的控件菜单副本的句柄。 此副本最初与控制菜单相同，但可以修改。 如果*bRevert*为 TRUE，`GetSystemMenu` 会将控制菜单重置回默认状态。 以前的可能修改的控制菜单（如果有）被销毁。 在这种情况下，返回值未定义。

### <a name="return-value"></a>返回值

如果*bRevert*为 FALSE，则标识控制菜单的副本。 如果*bRevert*为 TRUE，则返回值为 undefined。

返回的指针可能是暂时的，不应存储以供以后使用。

### <a name="remarks"></a>备注

不使用 `GetSystemMenu` 来创建其自己的 "控制" 菜单副本的任何窗口都将接收标准控制菜单。

`GetSystemMenu` 成员函数返回的指针可用于[CMenu：： AppendMenu](../../mfc/reference/cmenu-class.md#appendmenu)、 [CMenu：： InsertMenu](../../mfc/reference/cmenu-class.md#insertmenu)或[CMenu：： ModifyMenu](../../mfc/reference/cmenu-class.md#modifymenu)函数，以更改控制菜单。

"控制菜单" 最初包含用各种 ID 值标识的项目，例如 SC_CLOSE、SC_MOVE 和 SC_SIZE。 "控件" 菜单上的项生成[WM_SYSCOMMAND](#onsyscommand)消息。 所有预定义的控件菜单项的 ID 号都大于0xF000。 如果应用程序将项添加到 "控制" 菜单，则它应使用小于 F000 的 ID 号。

Windows 可能会自动使项目在标准控制菜单上不可用。 `CWnd` 可以通过响应[WM_INITMENU](#oninitmenu)消息来执行自己的选择或不可用，并在显示任何菜单之前发送这些消息。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#99](../../mfc/reference/codesnippet/cpp/cwnd-class_39.cpp)]

##  <a name="gettitlebarinfo"></a>CWnd：： GetTitleBarInfo

检索有关指定标题栏的信息。

```
BOOL GetTitleBarInfo(PTITLEBARINFO pti) const;
```

### <a name="parameters"></a>parameters

*pti*<br/>
指向接收信息的[TITLEBARINFO](/windows/win32/api/winuser/ns-winuser-titlebarinfo)结构的指针。

### <a name="remarks"></a>备注

此成员函数模拟函数[GetTitleBarInfo](/windows/win32/api/winuser/nf-winuser-gettitlebarinfo)的功能，如 Windows SDK 中所述。

##  <a name="gettoplevelframe"></a>CWnd：： GetTopLevelFrame

调用此成员函数以检索窗口的顶级框架窗口（如果有）。

```
CFrameWnd* GetTopLevelFrame() const;
```

### <a name="return-value"></a>返回值

标识窗口的顶级框架窗口。

返回的指针可能是暂时的，不应存储以供以后使用。

### <a name="remarks"></a>备注

如果 `CWnd` 没有附加窗口，或者其顶级父级不是[CFrameWnd](../../mfc/reference/cframewnd-class.md)派生的对象，则此函数将返回 NULL。

##  <a name="gettoplevelowner"></a>CWnd：： GetTopLevelOwner

调用此成员函数以检索顶级窗口。

```
CWnd* GetTopLevelOwner() const;
```

### <a name="return-value"></a>返回值

标识顶级窗口。 返回的指针可能是暂时的，不应存储以供以后使用。

### <a name="remarks"></a>备注

顶级窗口是桌面的一个子窗口。 如果 `CWnd` 没有附加窗口，此函数将返回 NULL。

##  <a name="gettoplevelparent"></a>CWnd：： GetTopLevelParent

调用此成员函数以检索窗口的顶级父级。

```
CWnd* GetTopLevelParent() const;
```

### <a name="return-value"></a>返回值

标识窗口的顶级父窗口。

返回的指针可能是暂时的，不应存储以供以后使用。

### <a name="remarks"></a>备注

`GetTopLevelParent` 类似于[GetTopLevelFrame](#gettoplevelframe)和[GetTopLevelOwner](#gettoplevelowner);但是，它将忽略设置为当前所有者窗口的值。

##  <a name="gettopwindow"></a>CWnd：： GetTopWindow

搜索属于 `CWnd`的顶级子窗口。

```
CWnd* GetTopWindow() const;
```

### <a name="return-value"></a>返回值

标识子窗口的 `CWnd` 链接列表中的顶级子窗口。 如果不存在子窗口，则该值为 NULL。

返回的指针可能是暂时的，不应存储以供以后使用。

### <a name="remarks"></a>备注

如果 `CWnd` 没有任何子级，则此函数将返回 NULL。

##  <a name="getupdaterect"></a>CWnd：： GetUpdateRect

检索完全包围更新区域的最小矩形的坐标。

```
BOOL GetUpdateRect(
    LPRECT lpRect,
    BOOL bErase = FALSE);
```

### <a name="parameters"></a>parameters

*lpRect*<br/>
指向用于接收包含更新区域的更新的客户端坐标的 `CRect` 对象或[RECT 结构](/windows/win32/api/windef/ns-windef-rect)。

将此参数设置为 NULL，以确定 `CWnd`中是否存在更新区域。 如果*lpRect*为 NULL，则 `GetUpdateRect` 成员函数将返回非零值（如果存在更新区域），如果不存在，则返回0。 这提供了一种方法，用于确定 WM_PAINT 消息是否是由无效区域导致的。 不要在 Windows 版本3.0 及更早版本中将此参数设置为 NULL。

*bErase*<br/>
指定是否要清除更新区域中的背景。

### <a name="return-value"></a>返回值

指定更新区域的状态。 如果更新区域不为空，则值为非零值;否则为0。

如果*lpRect*参数设置为 NULL，则如果存在更新区域，则返回值为非零值;否则为0。

### <a name="remarks"></a>备注

如果 `CWnd` 是用 CS_OWNDC 样式创建的，并且映射模式未 MM_TEXT，则 `GetUpdateRect` 成员函数将以逻辑坐标为矩形。 否则，`GetUpdateRect` 将为矩形提供工作区坐标。 如果没有更新区域，`GetUpdateRect` 会将该矩形设置为空（将所有坐标设置为0）。

*BErase*参数指定 `GetUpdateRect` 是否应删除更新区域的背景。 如果*bErase*为 TRUE，并且更新区域不为空，则将清除背景。 若要清除背景，`GetUpdateRect` 发送[WM_ERASEBKGND](#onerasebkgnd)消息。

[BeginPaint](#beginpaint)成员函数检索到的更新矩形与 `GetUpdateRect` 成员函数检索的完全相同。

`BeginPaint` 成员函数自动验证更新区域，因此对 `BeginPaint` 的调用后立即进行的任何 `GetUpdateRect` 调用都将检索空的更新区域。

##  <a name="getupdatergn"></a>CWnd：： GetUpdateRgn

检索由*pRgn*标识的区域中的更新区域。

```
int GetUpdateRgn(
    CRgn* pRgn,
    BOOL bErase = FALSE);
```

### <a name="parameters"></a>parameters

*pRgn*<br/>
标识更新区域。

*bErase*<br/>
指定是否要清除背景以及子窗口的非工作区。 如果该值为 FALSE，则不会进行任何绘制。

### <a name="return-value"></a>返回值

指定一个短整型标志，该标志指示生成的区域的类型。 此值可以采用以下任意一种：

- SIMPLEREGION 区域没有重叠的边框。

- COMPLEXREGION 区域包含重叠的边框。

- NULLREGION 区域为空。

- 错误：未创建区域。

### <a name="remarks"></a>备注

此区域的坐标是相对于左上角（工作区坐标）的。

[BeginPaint](#beginpaint)成员函数自动验证更新区域，因此对 `BeginPaint` 的调用在调用后立即进行的任何 `GetUpdateRgn` 调用都将检索空的更新区域。

##  <a name="getwindow"></a>CWnd：： GetWindow

返回一个指向所请求窗口的指针; 如果没有，则返回 NULL。

```
CWnd* GetWindow(UINT nCmd) const;
```

### <a name="parameters"></a>parameters

*nCmd*<br/>
指定 `CWnd` 和返回的窗口之间的关系。 它可以采用以下值之一：

- GW_CHILD 标识第一个 `CWnd` 子窗口。

- GW_HWNDFIRST 如果 `CWnd` 为子窗口，则返回第一个同级窗口。 否则，它将返回列表中的第一个顶级窗口。

- GW_HWNDLAST 如果 `CWnd` 为子窗口，则返回最后一个同级窗口。 否则，它将返回列表中的最后一个顶级窗口。

- GW_HWNDNEXT 返回窗口管理器列表中的下一个窗口。

- GW_HWNDPREV 返回窗口管理器列表中的上一个窗口。

- GW_OWNER 标识 `CWnd` 所有者。

### <a name="return-value"></a>返回值

返回的指针可能是暂时的，不应存储以供以后使用。

##  <a name="getwindowcontexthelpid"></a>CWnd：： GetWindowContextHelpId

调用此成员函数以检索与窗口关联的帮助上下文标识符（如果有）。

```
DWORD GetWindowContextHelpId() const;
```

### <a name="return-value"></a>返回值

帮助上下文标识符。 如果窗口没有，则返回0。

##  <a name="getwindowedchildcount"></a>CWnd：： GetWindowedChildCount

调用此成员函数以检索关联的子窗口的数目。

```
long GetWindowedChildCount();
```

### <a name="return-value"></a>返回值

与 `CWnd` 对象关联的子窗口的数目。

##  <a name="getwindowdc"></a>CWnd：： GetWindowDC

检索整个窗口的显示上下文，包括标题栏、菜单和滚动条。

```
CDC* GetWindowDC();
```

### <a name="return-value"></a>返回值

如果函数成功，则标识给定窗口的显示上下文;否则为 NULL。

返回的指针可能是暂时的，不应存储以供以后使用。 对于 `GetWindowDC`的每个成功调用，应调用一次[ReleaseDC](#releasedc) 。

### <a name="remarks"></a>备注

窗口显示上下文允许在 `CWnd`中的任何位置进行绘制，因为上下文的原点是 `CWnd` 而不是工作区的左上角。

每次检索上下文时，默认属性都将分配给显示上下文。 以前的属性将丢失。

`GetWindowDC` 用于 `CWnd` 非工作区内的特殊绘制效果。 不建议在任何窗口的非工作区中进行绘制。

可以使用[GetSystemMetrics](/windows/win32/api/winuser/nf-winuser-getsystemmetrics) Windows 函数来检索非工作区的各个部分的尺寸，如标题栏、菜单和滚动条。

完成绘制后，必须调用[ReleaseDC](#releasedc)成员函数以释放显示上下文。 如果无法释放显示上下文，则会严重影响应用程序所请求的绘制，因为可以同时打开的设备上下文数存在限制。

##  <a name="getwindowinfo"></a>CWnd：： GetWindowInfo

检索有关窗口的信息。

```
BOOL GetWindowInfo(PWINDOWINFO pwi) const;
```

### <a name="parameters"></a>parameters

*pwi*<br/>
指向[WINDOWINFO](/windows/win32/api/winuser/ns-winuser-windowinfo)结构的指针。

### <a name="remarks"></a>备注

此成员函数模拟函数[GetWindowInfo](/windows/win32/api/winuser/nf-winuser-getwindowinfo)的功能，如 Windows SDK 中所述。

##  <a name="getwindowlesschildcount"></a>CWnd：： GetWindowlessChildCount

检索关联的无窗口子窗口的数目。

```
long GetWindowlessChildCount();
```

### <a name="return-value"></a>返回值

与 `CWnd` 对象关联的无窗口子窗口的数目。

##  <a name="getwindowplacement"></a>CWnd：： GetWindowPlacement

检索窗口的显示状态以及正常（已还原）、最小化和最大化位置。

```
BOOL GetWindowPlacement(WINDOWPLACEMENT* lpwndpl) const;
```

### <a name="parameters"></a>parameters

*lpwndpl*<br/>
指向接收显示状态和位置信息的 `WINDOWPLACEMENT` 结构。

### <a name="return-value"></a>返回值

如果该函数成功，则为非 0；否则为 0。

### <a name="remarks"></a>备注

此函数检索的[WINDOWPLACEMENT](/windows/win32/api/winuser/ns-winuser-windowplacement)结构的 `flags` 成员始终为0。 如果 `CWnd` 已最大化，则 SW_SHOWMAXIMIZED `WINDOWPLACEMENT` 的 `showCmd` 成员。 如果窗口已最小化，则 SW_SHOWMINIMIZED。 否则 SW_SHOWNORMAL。

##  <a name="getwindowrect"></a>CWnd：： GetWindowRect

将 `CWnd` 对象的边框的尺寸复制到*lpRect*指向的结构。

```
void GetWindowRect(LPRECT lpRect) const;
```

### <a name="parameters"></a>parameters

*lpRect*<br/>
指向将接收左上角和右下角的屏幕坐标的 `CRect` 对象或[RECT 结构](/windows/win32/api/windef/ns-windef-rect)。

### <a name="remarks"></a>备注

在屏幕坐标中相对于显示屏幕的左上角提供尺寸。 包括标题、边框和滚动条的尺寸（如果存在）。

##  <a name="getwindowrgn"></a>CWnd：： GetWindowRgn

调用此成员函数以获取窗口的窗口区域。

```
int GetWindowRgn(HRGN hRgn)const;
```

### <a name="parameters"></a>parameters

*hRgn*<br/>
窗口区域的句柄。

### <a name="return-value"></a>返回值

返回值指定函数获取的区域的类型。 可以为下列值之一：

- NULLREGION 区域为空。

- SIMPLEREGION 该区域是一个矩形。

- COMPLEXREGION 区域为多个矩形。

- 错误发生错误;区域不受影响。

### <a name="remarks"></a>备注

窗口区域确定操作系统允许在窗口中绘制的区域。 操作系统不显示窗口区域外的窗口的任何部分。

窗口的窗口区域坐标相对于窗口的左上角，而不是窗口的工作区。

若要设置窗口的窗口区域，请调用[CWnd：： SetWindowRgn](#setwindowrgn)。

##  <a name="getwindowtext"></a>CWnd：： GetWindowText

将 `CWnd` 标题标题（如果有）复制到由*lpszStringBuf*或目标字符串*rString*指向的缓冲区中。

```
int GetWindowText(
    LPTSTR lpszStringBuf,
    int nMaxCount) const;

void GetWindowText(
    CString& rString) const;
```

### <a name="parameters"></a>parameters

*lpszStringBuf*<br/>
指向用于接收复制的窗口标题字符串的缓冲区。

*nMaxCount*<br/>
指定要复制到缓冲区中的最大字符数，包括终止 null 字符。 如果字符串的长度超过*nMaxCount*中指定的字符数，则将被截断。

*rString*<br/>
一个[CString](../../atl-mfc-shared/reference/cstringt-class.md)对象，用于接收复制的窗口标题的字符串。

### <a name="return-value"></a>返回值

指定复制的字符串的长度（以字符数表示），不包括终止 null 字符。 如果 `CWnd` 没有标题或标题为空，则为0。

### <a name="remarks"></a>备注

如果 `CWnd` 对象是一个控件，则 `GetWindowText` 成员函数将复制控件中的文本，而不是复制标题。

此成员函数导致[WM_GETTEXT](/windows/win32/winmsg/wm-gettext)消息发送到 `CWnd` 对象。

### <a name="example"></a>示例

  请参阅[CWnd：： SetWindowText](#setwindowtext)的示例。

##  <a name="getwindowtextlength"></a>CWnd：： GetWindowTextLength

返回 `CWnd` 对象标题标题的长度。

```
int GetWindowTextLength() const;
```

### <a name="return-value"></a>返回值

指定文本长度（字符数），不包括任何 null 终止字符。 如果不存在这样的文本，则该值为0。

### <a name="remarks"></a>备注

如果 `CWnd` 是控件，则 `GetWindowTextLength` 成员函数将返回控件中的文本长度，而不是标题。

此成员函数导致[WM_GETTEXTLENGTH](/windows/win32/winmsg/wm-gettextlength)消息发送到 `CWnd` 对象。

### <a name="example"></a>示例

  请参阅[CWnd：： SetWindowText](#setwindowtext)的示例。

##  <a name="hidecaret"></a>CWnd：： HideCaret

通过从显示屏幕中移除来隐藏插入符号。

```
void HideCaret();
```

### <a name="remarks"></a>备注

尽管脱字号不再可见，但可以使用[ShowCaret](#showcaret)成员函数再次显示它。 隐藏脱字号不会损坏其当前形状。

隐藏是累积性的。 如果在一行中调用了 `HideCaret` 五次，则在显示脱字号之前，必须调用 `ShowCaret` 成员函数5次。

##  <a name="hilitemenuitem"></a>CWnd：： HiliteMenuItem

突出显示或删除顶级（菜单栏）菜单项中的突出显示。

```
BOOL HiliteMenuItem(
    CMenu* pMenu,
    UINT nIDHiliteItem,
    UINT nHilite);
```

### <a name="parameters"></a>parameters

*pMenu*<br/>
标识包含要突出显示的项的顶级菜单。

*nIDHiliteItem*<br/>
根据*nHilite*参数的值，指定要突出显示的菜单项。

*nHilite*<br/>
指定是否突出显示菜单项或突出显示突出显示。 它可以是 MF_BYCOMMAND 或 MF_BYPOSITION MF_HILITE 或 MF_UNHILITE 的组合。 可以使用按位 "或" 运算符组合这些值。 这些值将具有以下含义：

- MF_BYCOMMAND 解释*nIDHiliteItem*作为菜单项 ID （默认解释）。

- MF_BYPOSITION 将*NIDHiliteItem*解释为菜单项的从零开始的偏移量。

- MF_HILITE 突出显示项。 如果未指定此值，则将从该项中移除突出显示。

- MF_UNHILITE 从该项中移除突出显示。

### <a name="return-value"></a>返回值

指定是否突出显示菜单项。 如果突出显示该项，则为非零值;否则为0。

### <a name="remarks"></a>备注

MF_HILITE 和 MF_UNHILITE 标志只能与此成员函数一起使用;它们不能用于[CMenu：： ModifyMenu](../../mfc/reference/cmenu-class.md#modifymenu)成员函数。

##  <a name="htmlhelp"></a>CWnd：： HtmlHelp

调用此成员函数以调用 HTMLHelp 应用程序。

```
virtual void HtmlHelp(
    DWORD_PTR dwData,
    UINT nCmd = 0x000F);
```

### <a name="parameters"></a>parameters

*dwData*<br/>
指定其他数据。 使用的值取决于*nCmd*参数的值。

*nCmd*<br/>
指定请求的帮助的类型。 有关可能值的列表以及这些值如何影响*dwData*参数，请参阅 Windows SDK 中的 HTML 帮助 API 参考中所述的*uCommand*参数。

### <a name="remarks"></a>备注

有关详细信息，请参阅[CWinApp：： HtmlHelp](../../mfc/reference/cwinapp-class.md#htmlhelp) 。

##  <a name="initdynamiclayout"></a>CWnd：： InitDynamicLayout

由框架调用以初始化窗口的动态布局。

```
void InitDynamicLayout();
```

### <a name="remarks"></a>备注

请勿直接调用此方法。

##  <a name="invalidate"></a>CWnd：：无效

使 `CWnd`的整个工作区失效。

```
void Invalidate(BOOL bErase = TRUE);
```

### <a name="parameters"></a>parameters

*bErase*<br/>
指定是否要清除更新区域中的背景。

### <a name="remarks"></a>备注

发生下一[WM_PAINT](#onpaint)消息时，会将工作区标记为用于绘制。 还可以在[ValidateRect](#validaterect)或[ValidateRgn](#validatergn)成员函数出现 WM_PAINT 消息之前验证区域。

*BErase*参数指定在处理更新区域时是否清除更新区域中的背景。 如果*bErase*为 TRUE，则当调用[BeginPaint](#beginpaint)成员函数时，将清除背景;如果*bErase*为 FALSE，则背景将保持不变。 如果*bErase*在更新区域的任何部分都为 TRUE，则将清除整个区域中的背景，而不只是给定部件的背景。

只要 `CWnd` 更新区域不为空，并且应用程序队列中的该窗口中不存在其他消息，Windows 就会发送[WM_PAINT](#onpaint)消息。

### <a name="example"></a>示例

  请参阅[CWnd：： UpdateWindow](#updatewindow)的示例。

##  <a name="invalidaterect"></a>CWnd：： InvalidateRect

通过将矩形添加到 `CWnd` 更新区域来使给定矩形内的工作区失效。

```
void InvalidateRect(
    LPCRECT lpRect,
    BOOL bErase = TRUE);
```

### <a name="parameters"></a>parameters

*lpRect*<br/>
指向一个 `CRect` 对象或[矩形结构](/windows/win32/api/windef/ns-windef-rect)，其中包含要添加到更新区域的矩形（在工作区坐标中）。 如果*lpRect*为 NULL，则会将整个工作区添加到区域。

*bErase*<br/>
指定是否要清除更新区域中的背景。

### <a name="remarks"></a>备注

在发送下一[WM_PAINT](#onpaint)消息时，无效矩形以及更新区域中的所有其他区域都标记为要进行绘制。 失效区域会在更新区域中累积，直到下一次 WM_PAINT 调用发生时，或在区域通过[ValidateRect](#validaterect)或[ValidateRgn](#validatergn)成员函数验证之前。

*BErase*参数指定在处理更新区域时是否清除更新区域中的背景。 如果*bErase*为 TRUE，则当调用[BeginPaint](#beginpaint)成员函数时，将清除背景;如果*bErase*为 FALSE，则背景将保持不变。 如果*bErase*在更新区域的任何部分都为 TRUE，则整个区域中的背景将被擦除，而不只是在给定的部分中。

只要 `CWnd` 更新区域不为空，并且应用程序队列中的该窗口中不存在其他消息，Windows 就会发送[WM_PAINT](#onpaint)消息。

##  <a name="invalidatergn"></a>CWnd：： InvalidateRgn

通过将工作区添加到 `CWnd`的当前更新区域，使该区域内的工作区失效。

```
void InvalidateRgn(
    CRgn* pRgn,
    BOOL bErase = TRUE);
```

### <a name="parameters"></a>parameters

*pRgn*<br/>
指向[CRgn](../../mfc/reference/crgn-class.md)对象的指针，该对象标识要添加到更新区域的区域。 假定区域具有客户端坐标。 如果此参数为 NULL，则会将整个工作区添加到更新区域。

*bErase*<br/>
指定是否要清除更新区域中的背景。

### <a name="remarks"></a>备注

在下一次发送[WM_PAINT](#onpaint)消息时，无效区域与更新区域中的所有其他区域一起标记为进行绘制。 在下一次发送 WM_PAINT 消息时，或在通过[ValidateRect](#validaterect)或[ValidateRgn](#validatergn)成员函数验证区域之前，无效区域将在更新区域中累积。

*BErase*参数指定在处理更新区域时是否清除更新区域中的背景。 如果*bErase*为 TRUE，则当调用[BeginPaint](#beginpaint)成员函数时，将清除背景;如果*bErase*为 FALSE，则背景将保持不变。 如果*bErase*在更新区域的任何部分都为 TRUE，则将清除整个区域中的背景，而不只是给定部件的背景。

只要 `CWnd` 更新区域不为空，并且应用程序队列中的该窗口中不存在其他消息，Windows 就会发送[WM_PAINT](#onpaint)消息。

给定区域以前必须已由某个区域函数创建。

##  <a name="invokehelper"></a>CWnd：： InvokeHelper

调用此成员函数可在*wFlags*指定的上下文中调用*DwDispID*指定的 ActiveX 控件方法或属性。

```
void AFX_CDECL InvokeHelper(
    DISPID dwDispID,
    WORD wFlags,
    VARTYPE vtRet,
    void* pvRet,
    const BYTE* pbParamInfo,
    ... );
```

### <a name="parameters"></a>parameters

*dwDispID*<br/>
标识要调用的方法或属性。

*wFlags*<br/>
描述对 `IDispatch::Invoke`的调用的上下文的标志。

*vtRet*<br/>
指定返回值的类型。 有关可能的值，请参阅备注部分 [COleDispatchDriver::InvokeHelper](../../mfc/reference/coledispatchdriver-class.md#invokehelper)。

*pvRet*<br/>
将接收属性值或返回值的变量的地址。 它必须与*vtRet*指定的类型匹配。

*pbParamInfo*<br/>
指向以 null 结尾的字节字符串的指针，该字符串指定*pbParamInfo*后面的参数类型。 有关可能的值，请参阅 `COleDispatchDriver::InvokeHelper`的 "备注" 部分。

*...*<br/>
在*pbParamInfo*中指定的类型的参数的变量列表。

### <a name="remarks"></a>备注

*PbParamInfo*参数指定传递到方法或属性的参数的类型。 参数的变量列表在语法声明中通过 *...* 进行表示。

此函数将参数转换为 VARIANTARG 值，然后调用 ActiveX 控件上的 `IDispatch::Invoke` 方法。 如果 `IDispatch::Invoke` 调用失败，则此函数会引发异常。 如果 `IDispatch::Invoke` DISP_E_EXCEPTION 返回的 SCODE （状态代码），则此函数将引发[COleException](../../mfc/reference/coleexception-class.md)对象，否则将引发[COleDispatchException](../../mfc/reference/coledispatchexception-class.md)。

> [!NOTE]
> 只应在表示 ActiveX 控件的 `CWnd` 对象上调用此函数。

有关将此成员函数与 ActiveX 控件容器一起使用的详细信息，请参阅文章[Activex 控件容器：对 Activex 控件容器中的 Activex 控件进行编程](../../mfc/programming-activex-controls-in-a-activex-control-container.md)。

##  <a name="ischild"></a>CWnd：： IsChild

指示由*pWnd*指定的窗口是 `CWnd`的子窗口还是其他直接子代。

```
BOOL IsChild(const CWnd* pWnd) const;
```

### <a name="parameters"></a>parameters

*pWnd*<br/>
标识要测试的窗口。

### <a name="return-value"></a>返回值

指定函数的结果。 如果由*pWnd*标识的窗口是 `CWnd`的子窗口，则值为非零值;否则为0。

### <a name="remarks"></a>备注

如果 `CWnd` 对象位于从原始弹出窗口进入子窗口的父窗口链中，则子窗口是 `CWnd` 的直接子代。

##  <a name="isd2dsupportenabled"></a>CWnd：： IsD2DSupportEnabled

确定是否启用 D2D 支持。

```
BOOL IsD2DSupportEnabled();
```

### <a name="return-value"></a>返回值

如果启用该功能，则为 TRUE;否则为 FALSE。

##  <a name="isdialogmessage"></a>CWnd：： IsDialogMessage

调用此成员函数以确定给定的消息是否用于无模式对话框;如果是，则此函数将处理该消息。

```
BOOL IsDialogMessage(LPMSG lpMsg);
```

### <a name="parameters"></a>parameters

*lpMsg*<br/>
指向包含要检查的[消息的消息结构。](/windows/win32/api/winuser/ns-winuser-msg)

### <a name="return-value"></a>返回值

指定成员函数是否已处理给定的消息。 如果消息已处理，则为非零值;否则为0。 如果返回的是0，则调用基类的[CWnd：:P retranslatemessage](#pretranslatemessage)成员函数来处理该消息。 在 `CWnd::PreTranslateMessage` 成员函数的重写中，代码如下所示：

[!code-cpp[NVC_MFCWindowing#100](../../mfc/reference/codesnippet/cpp/cwnd-class_40.cpp)]

### <a name="remarks"></a>备注

当 `IsDialogMessage` 函数处理消息时，它会检查键盘消息并将其转换为相应对话框的选择命令。 例如，TAB 键选择下一个控件或一组控件，向下键选择组中的下一个控件。

不能将 `IsDialogMessage` 处理的消息传递给[TranslateMessage](/windows/win32/api/winuser/nf-winuser-translatemessage)或[DispatchMessage](/windows/win32/api/winuser/nf-winuser-dispatchmessage) Windows 函数，因为已对其进行了处理。

##  <a name="isdlgbuttonchecked"></a>CWnd：： IsDlgButtonChecked

确定按钮控件旁边是否有一个复选标记。

```
UINT IsDlgButtonChecked(int nIDButton) const;
```

### <a name="parameters"></a>parameters

*nIDButton*<br/>
指定按钮控件的整数标识符。

### <a name="return-value"></a>返回值

如果选中了给定的控件，则为非零; 否则为0。 只能选中单选按钮和复选框。 对于三状态按钮，如果该按钮是不确定的，则返回值可以为2。 对于按钮，此成员函数将返回0。

### <a name="remarks"></a>备注

如果该按钮是三状态控件，则成员函数将确定它是灰显还是选中，或者两者都不是。

##  <a name="isdynamiclayoutenabled"></a>CWnd：： IsDynamicLayoutEnabled

确定是否在此窗口上启用动态布局。 如果启用动态布局，则子窗口的位置和大小可以在用户调整父窗口大小时进行更改。

```
BOOL IsDynamicLayoutEnabled() const;
```

### <a name="return-value"></a>返回值

如果启用了动态布局，则为 TRUE；否则为 FALSE。

### <a name="remarks"></a>备注

##  <a name="isiconic"></a>CWnd：： IsIconic

指定是否将 `CWnd` 最小化（图标）。

```
BOOL IsIconic() const;
```

### <a name="return-value"></a>返回值

如果 `CWnd` 最小化，则为非零值;否则为0。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#101](../../mfc/reference/codesnippet/cpp/cwnd-class_41.cpp)]

##  <a name="istouchwindow"></a>CWnd：： IsTouchWindow

指定 `CWnd` 是否具有触摸支持。

```
BOOL IsTouchWindow() const;
```

### <a name="return-value"></a>返回值

如果 `CWnd` 具有触控支持，则为 TRUE;否则为 FALSE。

### <a name="remarks"></a>备注

##  <a name="iswindowenabled"></a>CWnd：： IsWindowEnabled

指定是否为鼠标和键盘输入启用 `CWnd`。

```
BOOL IsWindowEnabled() const;
```

### <a name="return-value"></a>返回值

如果启用 `CWnd`，则为非零值;否则为0。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#102](../../mfc/reference/codesnippet/cpp/cwnd-class_42.cpp)]

##  <a name="iswindowvisible"></a>CWnd：： IsWindowVisible

确定给定窗口的可见性状态。

```
BOOL IsWindowVisible() const;
```

### <a name="return-value"></a>返回值

如果 `CWnd` 可见（设置了[WS_VISIBLE](styles-used-by-mfc.md#window-styles)样式位并且父窗口可见），则为非零值。 由于返回值反映 WS_VISIBLE 样式位的状态，因此，返回值可能为非零值，即使其他窗口完全掩盖了 `CWnd`。

### <a name="remarks"></a>备注

窗口拥有由 WS_VISIBLE 样式位指示的可见性状态。 当使用对[ShowWindow](#showwindow)成员函数的调用来设置此样式位时，只要窗口设置了样式位，就会显示窗口，并在窗口中显示后续绘图。

如果窗口被其他窗口所覆盖或已被其父窗口剪裁，则不会显示对具有 WS_VISIBLE 样式的窗口的任何绘制。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#103](../../mfc/reference/codesnippet/cpp/cwnd-class_43.cpp)]

##  <a name="iszoomed"></a>CWnd：： IsZoomed

确定 `CWnd` 是否已最大化。

```
BOOL IsZoomed() const;
```

### <a name="return-value"></a>返回值

如果 `CWnd` 最大化，则为非零值;否则为0。

##  <a name="killtimer"></a>CWnd：： KillTimer

中止由*nIDEvent*标识的计时器事件，从前面调用到 `SetTimer`。

```
BOOL KillTimer(UINT_PTR nIDEvent);
```

### <a name="parameters"></a>parameters

*nIDEvent*<br/>
传递给[SetTimer](#settimer)的计时器事件的值。

### <a name="return-value"></a>返回值

指定函数的结果。 如果事件已终止，则值为非零值。 如果 `KillTimer` 成员函数找不到指定的计时器事件，则为0。

### <a name="remarks"></a>备注

挂起[WM_TIMER](#ontimer)与计时器关联的消息不会从消息队列中删除。

### <a name="example"></a>示例

  请参阅[CWnd：： SetTimer](#settimer)的示例。

##  <a name="loaddynamiclayoutresource"></a>CWnd：： LoadDynamicLayoutResource

由框架调用，以从资源文件加载动态布局信息。

```
BOOL LoadDynamicLayoutResource(LPCTSTR lpszResourceName);
```

### <a name="parameters"></a>parameters

*lpszResourceName*<br/>
包含此窗口所需的动态布局信息的资源名称。

### <a name="return-value"></a>返回值

如果函数运行成功，则为非零。 如果发生故障，则为 0。

### <a name="remarks"></a>备注

请勿直接调用此方法。

##  <a name="lockwindowupdate"></a>CWnd：： LockWindowUpdate

在给定的窗口中禁用绘制。

```
BOOL LockWindowUpdate();
```

### <a name="return-value"></a>返回值

如果函数运行成功，则为非零。 如果发生故障，或者 `LockWindowUpdate` 函数已用于锁定其他窗口，则为0。

### <a name="remarks"></a>备注

锁定的窗口不能移动。 一次只能锁定一个窗口。 若要解除锁定使用 `LockWindowUpdate`锁定的窗口，请调用[UnlockWindowUpdate](#unlockwindowupdate)。

如果具有锁定窗口（或任何锁定的子窗口）的应用程序调用[GetDC、](/windows/win32/api/winuser/nf-winuser-getdc) [GetDCEx](/windows/win32/api/winuser/nf-winuser-getdcex)或[BeginPaint](/windows/win32/api/winuser/nf-winuser-beginpaint) windows 函数，则被调用的函数将返回可见区域为空的设备上下文。 这会在应用程序通过调用 `UnlockWindowUpdate` 成员函数来解锁窗口之前发生。

当窗口更新被锁定时，系统会将任何绘图操作的边框跟踪到与锁定窗口关联的设备上下文中。 重新启用绘图时，此边框在锁定的窗口及其子窗口中失效，从而强制最终[WM_PAINT](/windows/win32/gdi/wm-paint)的消息更新屏幕。 如果在窗口更新被锁定时未发生任何绘制，则不会使区域无效。

`LockWindowUpdate` 成员函数不会使给定的窗口不可见，且不会清除[WS_VISIBLE](styles-used-by-mfc.md#window-styles)样式位。

##  <a name="m_hwnd"></a>CWnd：： m_hWnd

附加到此 `CWnd`的 Windows 窗口的句柄。

```
HWND m_hWnd;
```

### <a name="remarks"></a>备注

`m_hWnd` 数据成员是类型 HWND 的公共变量。

##  <a name="mapwindowpoints"></a>CWnd：： MapWindowPoints

将一组点从 `CWnd` 的坐标空间转换（映射）到另一个窗口的坐标空间。

```
void MapWindowPoints(
    CWnd* pwndTo,
    LPRECT lpRect) const;

void MapWindowPoints(
    CWnd* pwndTo,
    LPPOINT lpPoint,
    UINT nCount) const;
```

### <a name="parameters"></a>parameters

*pwndTo*<br/>
标识点要转换到的窗口。 如果此参数为 NULL，则将这些点转换为屏幕坐标。

*lpRect*<br/>
指定要转换其点的矩形。 此函数的第一个版本仅适用于 Windows 3.1 和更高版本。

*lpPoint*<br/>
指向一个[点结构](/windows/win32/api/windef/ns-windef-point)数组的指针，该结构包含要转换的点集。

*nCount*<br/>
指定*lpPoint*所指向的数组中 `POINT` 结构的数目。

##  <a name="messagebox"></a>CWnd：： MessageBox

创建并显示一个窗口，其中包含应用程序提供的消息和标题，以及 "[消息框样式](../../mfc/reference/styles-used-by-mfc.md#message-box-styles)" 列表中所述的预定义图标和普通按钮的组合。

```
int MessageBox(
    LPCTSTR lpszText,
    LPCTSTR lpszCaption = NULL,
    UINT nType = MB_OK);
```

### <a name="parameters"></a>parameters

*lpszText*<br/>
指向一个 `CString` 对象或以 null 结尾的字符串，其中包含要显示的消息。

*lpszCaption*<br/>
指向要用于消息框标题的 `CString` 对象或以 null 结尾的字符串。 如果*lpszCaption*为 NULL，则使用默认标题 "错误"。

nType<br/>
指定消息框的内容和行为。

### <a name="return-value"></a>返回值

此方法利用 Windows SDK 中定义的[MessageBox](/windows/win32/api/winuser/nf-winuser-messagebox)函数。 此方法返回调用此函数的结果。

### <a name="remarks"></a>备注

使用 global function [AfxMessageBox](../../mfc/reference/cstring-formatting-and-message-box-display.md#afxmessagebox) （而不是此成员函数）在应用程序中实现消息框。

下面显示了可在消息框中使用的各种系统图标：

|||
|-|-|
|![停止&#40;x&#41;图标](../../mfc/reference/media/vc364f1.gif "停止&#40;x&#41;图标")|MB_ICONHAND、MB_ICONSTOP 和 MB_ICONERROR|
|![帮助&#40;？&#41;图标](../../mfc/reference/media/vc364f2.gif "帮助&#40;？&#41;图标")|MB_ICONQUESTION|
|![&#40; &#33;重要&#41;图标](../../mfc/reference/media/vc364f3.gif "&#40; &#33;重要&#41;图标")|MB_ICONEXCLAMATION 和 MB_ICONWARNING|
|![信息&#40;i&#41;图标](../../mfc/reference/media/vc364f4.gif "信息&#40;i&#41;图标")|MB_ICONASTERISK 和 MB_ICONINFORMATION|

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#104](../../mfc/reference/codesnippet/cpp/cwnd-class_44.cpp)]

##  <a name="modifystyle"></a>CWnd：： ModifyStyle

调用此成员函数以修改窗口的样式。

```
BOOL ModifyStyle(
    DWORD dwRemove,
    DWORD dwAdd,
    UINT nFlags = 0);
```

### <a name="parameters"></a>parameters

*dwRemove*<br/>
指定要在样式修改过程中删除的窗口样式。

*dwAdd*<br/>
指定要在样式修改过程中添加的窗口样式。

*nFlags*<br/>
要传递给[SetWindowPos](#setwindowpos)的标志; 如果不应调用 `SetWindowPos`，则为零。 默认值为 0。 有关预设标志的列表，请参阅 "备注" 部分。

### <a name="return-value"></a>返回值

如果成功修改了样式，则为非零值;否则为0。

### <a name="remarks"></a>备注

要添加或删除的样式可以使用按位 OR （&#124;）运算符组合在一起。 有关可用的窗口样式的信息，请参阅中的主题[窗口样式](/windows/win32/winmsg/window-styles)和[CreateWindow](/windows/win32/api/winuser/nf-winuser-createwindoww) Windows SDK。

如果*nFlags*为非零值，`ModifyStyle` 将调用 Windows API 函数[SetWindowPos](/windows/win32/api/winuser/nf-winuser-setwindowpos) ，并通过将*nFlags*与以下四个预设标志组合来重绘窗口：

- SWP_NOSIZE 保留当前大小。

- SWP_NOMOVE 保留当前位置。

- SWP_NOZORDER 保留当前 Z 顺序。

- SWP_NOACTIVATE 不会激活窗口。

若要修改窗口的扩展样式，请参阅[ModifyStyleEx](#modifystyleex)。

> [!NOTE]
> 对于某些控件中的某些样式（例如，编辑控件中的 ES_READONLY 样式），`ModifyStyle` 可能无法正确更改样式，因为控件可能需要执行特殊的内部处理。 在这些情况下，将提供相应的更改样式的消息 EM_SETREADONLY （如示例中所述）。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#105](../../mfc/reference/codesnippet/cpp/cwnd-class_45.cpp)]

##  <a name="modifystyleex"></a>CWnd：： ModifyStyleEx

调用此成员函数以修改窗口的扩展样式。

```
BOOL ModifyStyleEx(
    DWORD dwRemove,
    DWORD dwAdd,
    UINT nFlags = 0);
```

### <a name="parameters"></a>parameters

*dwRemove*<br/>
指定要在样式修改过程中删除的扩展样式。

*dwAdd*<br/>
指定要在样式修改期间添加的扩展样式。

*nFlags*<br/>
要传递给[SetWindowPos](#setwindowpos)的标志; 如果不应调用 `SetWindowPos`，则为零。 默认值为 0。 有关预设标志的列表，请参阅 "备注" 部分。

### <a name="return-value"></a>返回值

如果成功修改了样式，则为非零值;否则为0。

### <a name="remarks"></a>备注

要添加或删除的样式可以使用按位 OR （&#124;）运算符组合在一起。 有关可用扩展样式的信息，请参阅本书中的 "[扩展窗口样式](../../mfc/reference/styles-used-by-mfc.md#extended-window-styles)" 和 "Windows SDK 中的[CreateWindowEx](/windows/win32/api/winuser/nf-winuser-createwindowexw)

如果*nFlags*为非零值，`ModifyStyleEx` 将调用 Windows API 函数[SetWindowPos](/windows/win32/api/winuser/nf-winuser-setwindowpos) ，并通过将*nFlags*与以下四个预设标志组合来重绘窗口：

- SWP_NOSIZE 保留当前大小。

- SWP_NOMOVE 保留当前位置。

- SWP_NOZORDER 保留当前 Z 顺序。

- SWP_NOACTIVATE 不会激活窗口。

若要使用常规窗口样式修改 windows，请参阅[ModifyStyle](#modifystyle)。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#106](../../mfc/reference/codesnippet/cpp/cwnd-class_46.cpp)]

##  <a name="movewindow"></a>CWnd：： MoveWindow

更改位置和尺寸。

```
void MoveWindow(
    int x,
    int y,
    int nWidth,
    int nHeight,
    BOOL bRepaint = TRUE);

void MoveWindow(
    LPCRECT lpRect,
    BOOL bRepaint = TRUE);
```

### <a name="parameters"></a>parameters

*x*<br/>
指定 `CWnd`左侧的新位置。

*y*<br/>
指定 `CWnd`顶部的新位置。

*nWidth*<br/>
指定 `CWnd`的新宽度。

*nHeight*<br/>
指定 `CWnd`的新高度。

*bRepaint*<br/>
指定是否要重新绘制 `CWnd`。 如果为 TRUE，则 `CWnd` 在其[OnPaint](#onpaint)消息处理程序中照常接收[WM_PAINT](/windows/win32/gdi/wm-paint)消息。 如果此参数为 FALSE，则不会进行任何类型的重画。 这适用于工作区、非工作区（包括标题和滚动条）以及作为 `CWnd`移动结果的父窗口的任何部分。 当此参数为 FALSE 时，应用程序必须显式失效或重绘必须重绘的 `CWnd` 和父窗口的任何部分。

*lpRect*<br/>
指定新大小和位置的[CRect](../../atl-mfc-shared/reference/crect-class.md)对象或[RECT 结构](/windows/win32/api/windef/ns-windef-rect)。

### <a name="remarks"></a>备注

对于顶级 `CWnd` 对象， *x*和*y*参数是相对于屏幕左上角的。 对于子 `CWnd` 对象，它们相对于父窗口的工作区的左上角。

`MoveWindow` 函数发送[WM_GETMINMAXINFO](#ongetminmaxinfo)消息。 处理此消息后 `CWnd` 有机会修改最大和最小的可能窗口的默认值。 如果 `MoveWindow` 成员函数的参数超出这些值，则可以将这些值替换为 WM_GETMINMAXINFO 处理程序中的最小值或最大值。

### <a name="example"></a>示例

  请参阅[CWnd：： ClientToScreen](#clienttoscreen)的示例。

##  <a name="notifywinevent"></a>CWnd：： NotifyWinEvent

向系统发出信号，指出发生了预定义事件。 如果任何客户端应用程序为事件注册了挂钩函数，则系统会调用客户端的挂钩函数。

```
void NotifyWinEvent(
    DWORD event,
    LONG idObjectType,
    LONG idObject);
```

### <a name="parameters"></a>parameters

*event*<br/>
指定发生的事件。 此值必须是一个[事件常量](/windows/win32/WinAuto/event-constants)。

*idObjectType*<br/>
标识生成事件的对象的类型。 此值是预定义的[对象标识符](/windows/win32/WinAuto/object-identifiers)之一或自定义对象 ID 值。

*idObject*<br/>
标识事件是由对象生成还是由对象的子元素生成。 如果此值为 CHILDID_SELF，则该事件是由对象本身生成的。 否则，此值是生成事件的元素的子 ID。

### <a name="remarks"></a>备注

此成员函数模拟函数[NotifyWinEvent](/windows/win32/api/winuser/nf-winuser-notifywinevent)的功能，如 Windows SDK 中所述。

##  <a name="onactivate"></a>CWnd：： OnActivate

当激活或停用 `CWnd` 对象时，框架会调用此成员函数。

```
afx_msg void OnActivate(
    UINT nState,
    CWnd* pWndOther,
    BOOL bMinimized);
```

### <a name="parameters"></a>parameters

*nState*<br/>
指定是否正在激活或停用 `CWnd`。 可以为下列值之一：

- 正在停用窗口 WA_INACTIVE。

- WA_ACTIVE 通过鼠标单击之外的某种方法激活窗口（例如，通过使用键盘界面选择窗口）。

- WA_CLICKACTIVE 通过鼠标单击激活窗口。

*pWndOther*<br/>
指向正在激活或停用的 `CWnd` 的指针。 指针可以为 NULL，它可能是暂时性的。

*bMinimized*<br/>
指定正在激活或停用 `CWnd` 的最小化状态。 如果值为 TRUE，则表示窗口已最小化。

如果为 TRUE，则将激活 `CWnd`;否则停用。

### <a name="remarks"></a>备注

如果使用鼠标单击激活 `CWnd` 对象，它还会收到[OnMouseActivate](#onmouseactivate)成员函数调用。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onactivateapp"></a>CWnd：： OnActivateApp

框架将此成员函数调用到正在激活的任务的所有顶级窗口，以及要停用的任务的所有顶级窗口。

```
afx_msg void OnActivateApp(
    BOOL bActive,
    DWORD dwThreadID);
```

### <a name="parameters"></a>parameters

*bActive*<br/>
指定是否正在激活或停用 `CWnd`。 如果为 TRUE，则表示正在激活 `CWnd`。 FALSE 表示 `CWnd` 将被停用。

*dwThreadID*<br/>
指定线程 ID 的值。 如果*bActive*为 TRUE，则*dwThreadID*将标识拥有要停用的 `CWnd` 的线程。 如果*bActive*为 FALSE，则*dwThreadID*将标识拥有正在激活的 `CWnd` 的线程。

### <a name="remarks"></a>备注

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onambientproperty"></a>CWnd：： OnAmbientProperty

框架调用此成员函数从包含 OLE 控件的窗口中获取环境属性值。

```
virtual BOOL OnAmbientProperty(
    COleControlSite* pSite,
    DISPID dispid,
    VARIANT* pvar);
```

### <a name="parameters"></a>parameters

*pSite*<br/>
一个指针，指向请求环境属性的控件的站点。

*dispid*<br/>
请求的环境属性的调度 ID。

*pvar*<br/>
一个指针，指向由调用方分配的 `VARIANT` 结构，通过该结构，将返回环境属性的值。

### <a name="return-value"></a>返回值

如果支持环境属性，则为 TRUE;如果不是，则为 FALSE。

### <a name="remarks"></a>备注

重写此函数可将 OLE 控件容器返回的默认环境属性值更改为控件。 重写函数未处理的任何环境属性请求应转发到基类实现。

##  <a name="onappcommand"></a>CWnd：： OnAppCommand

用户生成应用程序命令事件时，框架会调用此成员函数。 当用户单击应用程序命令按钮或键入应用程序命令键时发生此类事件。

```
afx_msg void OnAppCommand(
    CWnd* pWnd,
    UINT nCmd,
    UINT nDevice,
    UINT nKey);
```

### <a name="parameters"></a>parameters

|参数|说明|
|---------------|-----------------|
|*pWnd*|中指向一个 `CWnd` 对象的指针，该对象表示用户单击了命令按钮或按了命令键的窗口。 此窗口可以是接收消息的窗口的子窗口。|
|*nCmd*|中指示应用程序命令。 有关可能值的列表，请参阅[WM_APPCOMMAND](/windows/win32/inputdev/wm-appcommand)的*lParam*参数的*cmd*部分下的命令。|
|*nDevice*|中生成输入事件的输入设备。 有关可能值的列表，请参阅[WM_APPCOMMAND](/windows/win32/inputdev/wm-appcommand)的*LParam*参数的*uDevice*部分下的设备。|
|*nKey*|中指示任何关闭的虚拟键，如 CTRL 键或鼠标左键。 有关可能值的列表，请参阅[WM_APPCOMMAND](/windows/win32/inputdev/wm-appcommand)的*LParam*参数的*dwKeys*部分下的键。 有关详细信息，请参阅[关于鼠标输入](/windows/win32/inputdev/about-mouse-input)中的 "消息参数" 标题。|

### <a name="remarks"></a>备注

此方法接收 Windows SDK 中描述的[WM_APPCOMMAND](/windows/win32/inputdev/wm-appcommand)通知。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onaskcbformatname"></a>CWnd：： OnAskCbFormatName

当剪贴板包含 CF_OWNERDISPLAY 格式的数据句柄（即，当剪贴板所有者显示剪贴板内容时），框架将调用此成员函数。

```
afx_msg void OnAskCbFormatName(
    UINT nMaxCount,
    LPTSTR lpszString);
```

### <a name="parameters"></a>parameters

*nMaxCount*<br/>
指定要复制的最大字节数。

*lpszString*<br/>
指向要存储格式名副本的缓冲区。

### <a name="remarks"></a>备注

剪贴板所有者应为其格式提供名称。

重写此成员函数并将 CF_OWNERDISPLAY 格式的名称复制到指定的缓冲区中，而不是超过指定的最大字节数。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="oncancelmode"></a>CWnd：： OnCancelMode

框架调用此成员函数来通知 `CWnd` 取消任何内部模式。

```
afx_msg void OnCancelMode();
```

### <a name="remarks"></a>备注

如果 `CWnd` 对象具有焦点，则在显示对话框或消息框时将调用其 `OnCancelMode` 成员函数。 这为 `CWnd` 了取消模式（如鼠标捕获）的机会。

默认实现通过调用[ReleaseCapture](/windows/win32/api/winuser/nf-winuser-releasecapture) Windows 函数来做出响应。 在派生类中重写此成员函数以处理其他模式。

##  <a name="oncapturechanged"></a>CWnd：： OnCaptureChanged

框架调用此成员函数来通知窗口丢失了鼠标捕获。

```
afx_msg void OnCaptureChanged(CWnd* pWnd);
```

### <a name="parameters"></a>parameters

*pWnd*<br/>
指向用于获取鼠标捕获的窗口的指针

### <a name="remarks"></a>备注

即使窗口调用[ReleaseCapture](/windows/win32/api/winuser/nf-winuser-releasecapture)本身，也会收到此消息。 应用程序不应尝试设置鼠标捕获来响应此消息。 当它收到此消息时，窗口应重绘其自身（如有必要），以反映新的鼠标捕获状态。

有关 `ReleaseCapture` Windows 函数的信息，请参阅 Windows SDK。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onchangecbchain"></a>CWnd：： OnChangeCbChain

框架为剪贴板查看器链中的每个窗口调用此成员函数，以通知其窗口正在从链中删除。

```
afx_msg void OnChangeCbChain(
    HWND hWndRemove,
    HWND hWndAfter);
```

### <a name="parameters"></a>parameters

*hWndRemove*<br/>
指定要从剪贴板查看器链中删除的窗口句柄。

*hWndAfter*<br/>
指定在要从剪贴板查看器链中删除的窗口之后的窗口句柄。

### <a name="remarks"></a>备注

接收 `OnChangeCbChain` 调用的每个 `CWnd` 对象都应使用[SendMessage](/windows/win32/api/winuser/nf-winuser-sendmessage) Windows 函数将[WM_CHANGECBCHAIN](/windows/win32/dataxchg/wm-changecbchain)消息发送到剪贴板链接器（`SetClipboardViewer`返回的句柄）的下一个窗口。 如果*hWndRemove*是链中的下一个窗口，则由*hWndAfter*指定的窗口将成为下一窗口，并将剪贴板消息传递给它。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onchangeuistate"></a>CWnd：： OnChangeUIState

在应更改用户界面 (UI) 状态时调用。

```
afx_msg void OnChangeUIState(
    UINT nAction,
    UINT nUIElement);
```

### <a name="parameters"></a>parameters

*N 操作*<br/>
指定要执行的操作。 可以是以下值之一：

- UIS_CLEAR 应隐藏 UI state 元素（由*nUIElement*指定）。

- UIS_INITIALIZE 应根据最后一个输入事件更改 UI state 元素（由*nUIElement*指定）。 有关详细信息，请参阅[WM_CHANGEUISTATE](/windows/win32/menurc/wm-changeuistate)的 "**备注**" 部分。

- UIS_SET UI state 元素（由*nUIElement*指定）应可见。

*nUIElement*<br/>
指定受影响的 UI 状态元素或控件的样式。 可以是以下值之一：

- UISF_HIDEACCEL 键盘快捷键。

- UISF_HIDEFOCUS 焦点指示器。

- UISF_ACTIVE Windows XP：应以用于活动控件的样式绘制控件。

### <a name="remarks"></a>备注

此成员函数模拟[WM_CHANGEUISTATE](/windows/win32/menurc/wm-changeuistate)消息的功能，如 Windows SDK 中所述。

##  <a name="onchar"></a>CWnd：： OnChar

当击键转换为非系统字符时，框架会调用此成员函数。

```
afx_msg void OnChar(
    UINT nChar,
    UINT nRepCnt,
    UINT nFlags);
```

### <a name="parameters"></a>parameters

*nChar*<br/>
包含键的字符代码值。

*nRepCnt*<br/>
包含重复次数，即用户按住该键时击键重复的次数。

*nFlags*<br/>
包含扫描代码、键转换代码、上一个密钥状态和上下文代码，如下面的列表所示：

|值|含义|
|-----------|-------------|
|0-15|指定重复计数。 值是用户按下键时，击键重复的次数。|
|16-23|指定扫描代码。 此值取决于原始设备制造商（OEM）|
|24|指定该密钥是否是扩展密钥，如在增强的101或102键盘上显示的右 ALT 和 CTRL 键。 如果是扩展键，则值为 1; 否则为。否则，为0。|
|25-28|由 Windows 在内部使用。|
|29|指定上下文代码。 如果按下了该键，则值为 1; 否则，值为 1;否则，该值为0。|
|30|指定上一个密钥状态。 如果在发送消息前键关闭，则值为 1; 如果键已启动，则该值为0。|
|31|指定转换状态。 如果释放密钥，则值为 1; 如果按下该键，则值为0。|

### <a name="remarks"></a>备注

此函数在[OnKeyUp](#onkeyup)成员函数之前和在调用[OnKeyDown](#onkeydown)成员函数后调用。 `OnChar` 包含按下或释放的键盘键的值。

由于所按下的键与 `OnChar` 的调用之间不一定存在一对一的对应关系，因此， *nFlags*中的信息通常对应用程序并不有用。 *NFlags*中的信息仅适用于 `OnKeyUp` 对 `OnKeyDown` 成员函数的最近调用，或在调用 `OnChar`之前的成员函数。

对于 IBM 增强的101和102键盘，增强型密钥是右 ALT，键盘主要部分的右 CTRL 键;数字键盘左侧分类中的 INS、DEL、HOME、END、PAGE UP、PAGE DOWN 和箭头键;和斜线（/），然后在数字键盘中输入键。 其他一些键盘可能支持*nFlags*中的扩展密钥位。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onchartoitem"></a>CWnd：： OnCharToItem

当带有[LBS_WANTKEYBOARDINPUT](../../mfc/reference/styles-used-by-mfc.md#list-box-styles)样式的列表框向其所有者发送[WM_CHARTOITEM](/windows/win32/Controls/wm-chartoitem)消息以响应[WM_CHAR](#onchar)消息时调用。

```
afx_msg int OnCharToItem(
    UINT nChar,
    CListBox* pListBox,
    UINT nIndex);
```

### <a name="parameters"></a>parameters

*nChar*<br/>
指定用户按下的键的值。

*pListBox*<br/>
指定指向列表框的指针。 这可能是临时性的。

*nIndex*<br/>
指定当前的插入符号位置。

### <a name="return-value"></a>返回值

框架调用此成员函数以指定应用程序为响应调用而执行的操作。 如果返回值为-2，则表示应用程序处理了选择该项的所有方面，但列表框不需要进一步操作。 返回值-1 指示列表框应执行默认操作以响应击键。 如果返回值为0或更大，则指定列表框中项的从零开始的索引，指示列表框应为给定项的键击执行默认操作。

### <a name="remarks"></a>备注

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onchildactivate"></a>CWnd：： OnChildActivate

如果 `CWnd` 对象是多文档界面（MDI）子窗口，则当用户单击窗口的标题栏或窗口被激活、移动或调整大小时，框架将调用 `OnChildActivate`。

```
afx_msg void OnChildActivate();
```

##  <a name="onchildnotify"></a>CWnd：： OnChildNotify

此成员函数在收到应用于该窗口的通知消息时由该窗口的父窗口调用。

```
virtual BOOL OnChildNotify(
    UINT message,
    WPARAM wParam,
    LPARAM lParam,
    LRESULT* pResult);
```

### <a name="parameters"></a>parameters

message<br/>
发送到父窗口的 Windows 消息编号。

*wParam*<br/>
与消息关联的*wparam* 。

*lParam*<br/>
与消息关联的*lparam* 。

*pLResult*<br/>
指向要从父窗口过程返回的值的指针。 如果不需要返回值，则此指针将为 NULL。

### <a name="return-value"></a>返回值

如果此窗口负责处理发送到其父级的消息，则为非零值;否则为0。

### <a name="remarks"></a>备注

切勿直接调用此成员函数。

此成员函数的默认实现将返回0，这意味着父代应处理该消息。

重写此成员函数以扩展控件响应通知消息的方式。

##  <a name="onclipboardupdate"></a>CWnd：： OnClipboardUpdate

当剪贴板的内容已更改时，框架会调用此成员函数。

```
afx_msg void OnClipboardUpdate();
```

##  <a name="onclose"></a>CWnd：： OnClose

框架将此成员函数调用为 `CWnd` 或应用程序要终止的信号。

```
afx_msg void OnClose();
```

### <a name="remarks"></a>备注

默认实现将调用 `DestroyWindow`。

##  <a name="oncolorizationcolorchanged"></a>CWnd：： OnColorizationColorChanged

当非工作区的呈现策略发生更改时，框架会调用此成员。

```
afx_msg void OnColorizationColorChanged(
    DWORD dwColorizationColor,
    BOOL bOpacity);
```

### <a name="parameters"></a>parameters

|参数|说明|
|---------------|-----------------|
|*dwColorizationColor*|中指定新的着色颜色。<br /><br /> 颜色格式是0xAARRGGBB 形式的十六进制数，其中，四个分量的范围为0x00 到0xFF。 AA 组件是 alpha 值，RR 为红色，GG 为绿色，BB 为蓝色。|
|*bOpacity*|中如果新颜色与不透明度混合，则为 TRUE;如果不是，则为 FALSE。|

### <a name="remarks"></a>备注

此方法接收 Windows SDK 中描述的[WM_DWMNCRENDERINGCHANGED](/windows/win32/dwm/wm-dwmcolorizationcolorchanged)通知消息。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="oncommand"></a>CWnd：： OnCommand

当用户从菜单中选择项、当子控件发送通知消息时，或在翻译加速键击时，框架会调用此成员函数。

```
virtual BOOL OnCommand(
    WPARAM wParam,
    LPARAM lParam);
```

### <a name="parameters"></a>parameters

*wParam*<br/>
*WParam*的低序位字标识菜单项、控件或快捷键的命令 ID。 如果消息来自控件，则*wParam*的高序位字指定通知消息。 如果消息来自加速器，则高阶字为1。 如果消息来自菜单，则高序位字为0。

*lParam*<br/>
标识当消息来自控件时发送消息的控件。 否则， *lParam*为0。

### <a name="return-value"></a>返回值

如果应用程序处理此消息，则它将返回非零值;否则为0。

### <a name="remarks"></a>备注

`OnCommand` 处理控件通知和 ON_COMMAND 项的消息映射，并调用适当的成员函数。

在派生类中重写此成员函数可处理[WM_COMMAND](/windows/win32/menurc/wm-command)消息。 除非调用了基类 `OnCommand`，否则重写不会处理消息映射。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="oncompacting"></a>CWnd：： OnCompacting

当 Windows 检测到超过30到60秒的时间间隔内的系统时间超过12.5% 时，框架将为所有顶级窗口调用此成员函数以压缩内存。

```
afx_msg void OnCompacting(UINT nCpuTime);
```

### <a name="parameters"></a>parameters

*nCpuTime*<br/>
指定 Windows 压缩内存到执行其他操作所用 CPU 时间的当前所用 CPU 时间的比率。 例如，8000h 表示压缩内存占用的 CPU 时间的50%。

### <a name="remarks"></a>备注

这表明系统内存不足。

当 `CWnd` 对象收到此调用时，它应尽可能多地释放内存，同时考虑应用程序的当前活动级别以及 Windows 中运行的应用程序总数。 应用程序可以调用 Windows 函数来确定正在运行的应用程序的数量。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="oncompareitem"></a>CWnd：： OnCompareItem

框架调用此成员函数以指定新项在子排序的所有者描述组合框或列表框中的相对位置。

```
afx_msg int OnCompareItem(
    int nIDCtl,
    LPCOMPAREITEMSTRUCT lpCompareItemStruct);
```

### <a name="parameters"></a>parameters

*nIDCtl*<br/>
发送 WM_COMPAREITEM 消息的控件的标识符。

*lpCompareItemStruct*<br/>
包含指向[COMPAREITEMSTRUCT](/windows/win32/api/winuser/ns-winuser-compareitemstruct)数据结构的长指针，该指针包含组合框或列表框中两个项的标识符和应用程序提供的数据。

### <a name="return-value"></a>返回值

指示两个项的相对位置。 它可以是下列值之一：

|值|含义|
|-----------|-------------|
|-1|项目1排在第2项之前。|
|0|项1和项2排序相同。|
|1|项1在项2之后排序。|

### <a name="remarks"></a>备注

如果使用[CBS_SORT](../../mfc/reference/styles-used-by-mfc.md#combo-box-styles)或[LBS_SORT](../../mfc/reference/styles-used-by-mfc.md#list-box-styles)样式创建组合框或列表框，则每当应用程序添加新项时，Windows 都会向组合框或列表框所有者发送 WM_COMPAREITEM 消息。

组合框或列表框中的两个项 reformed 由*lpCompareItemStruct*指向的 `COMPAREITEMSTRUCT` 结构。 `OnCompareItem` 应返回一个值，该值指示应在其他项之前出现的项。 通常，Windows 将多次进行此调用，直到它确定新项的准确位置。

如果 `COMPAREITEMSTRUCT` 结构的 `hwndItem` 成员属于[CListBox](../../mfc/reference/clistbox-class.md)或[CComboBox](../../mfc/reference/ccombobox-class.md)对象，则调用相应类的 `CompareItem` 虚拟函数。 重写派生 `CListBox` 或 `CComboBox` 类中的 `CComboBox::CompareItem` 或 `CListBox::CompareItem` 以执行项比较。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="oncompositionchanged"></a>CWnd：： OnCompositionChanged

当启用或禁用桌面窗口管理器（DWM）组合时，框架将为所有顶级窗口调用此成员函数。

```
afx_msg void OnCompositionChanged();
```

### <a name="remarks"></a>备注

此方法接收 Windows SDK 中描述的[WM_DWMCOMPOSITIONCHANGED](/windows/win32/dwm/wm-dwmcompositionchanged)通知。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="oncontextmenu"></a>CWnd：： OnContextMenu

当用户在窗口中单击鼠标右键（右键单击）时，由框架调用。

```
afx_msg void OnContextMenu(
    CWnd* pWnd,
    CPoint pos);
```

### <a name="parameters"></a>parameters

*pWnd*<br/>
用户右键单击鼠标的窗口的句柄。 这可以是接收消息的窗口的子窗口。 有关处理此消息的详细信息，请参阅 "备注" 部分。

pos<br/>
鼠标单击时光标的位置（以屏幕坐标表示）。

### <a name="remarks"></a>备注

可以通过使用[TrackPopupMenu](../../mfc/reference/cmenu-class.md#trackpopupmenu)显示上下文菜单来处理此消息。

如果不显示上下文菜单，则应将此消息传递到[DefWindowProc](#defwindowproc)函数。 如果窗口是子窗口，`DefWindowProc` 会将消息发送到父级。 否则，如果指定位置在窗口标题中，`DefWindowProc` 将显示默认上下文菜单。

##  <a name="oncopydata"></a>CWnd：： OnCopyData

此成员函数由框架调用，以将数据从一个应用程序复制到另一个应用程序。

```
afx_msg BOOL OnCopyData(
    CWnd* pWnd,
    COPYDATASTRUCT* pCopyDataStruct);
```

### <a name="parameters"></a>parameters

*pWnd*<br/>
指向发送数据的 `CWnd` 对象的指针。

*pCopyDataStruct*<br/>
指向[COPYDATASTRUCT](/windows/win32/api/winuser/ns-winuser-copydatastruct)结构的指针，该结构包含要发送的数据。

### <a name="return-value"></a>返回值

如果接收应用程序成功接受数据，则返回 TRUE。 否则，返回 FALSE。

### <a name="remarks"></a>备注

要传递的数据不能包含指针或对接收数据的应用程序无法访问的对象的其他引用。

在复制数据时，不能由发送过程的另一个线程更改数据。

接收应用程序应将数据视为只读。 参数*pCopyDataStruct*指向的结构仅在数据传输过程中有效;但接收应用程序不应释放与该结构关联的内存。

如果接收应用程序在此函数返回后需要访问数据，则必须将接收的数据复制到本地缓冲区。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="oncreate"></a>CWnd：： OnCreate

当应用程序请求通过调用[Create](#create)或[CreateEx](#createex)成员函数创建 Windows 窗口时，框架会调用此成员函数。

```
afx_msg int OnCreate(LPCREATESTRUCT lpCreateStruct);
```

### <a name="parameters"></a>parameters

*lpCreateStruct*<br/>
指向[CREATESTRUCT](/windows/win32/api/winuser/ns-winuser-createstructw)结构，其中包含有关所创建的 `CWnd` 对象的信息。

### <a name="return-value"></a>返回值

`OnCreate` 必须返回0才能继续创建 `CWnd` 对象。 如果应用程序返回-1，则该窗口将被销毁。

### <a name="remarks"></a>备注

`CWnd` 对象在创建窗口之后但在窗口可见之前接收此调用。 `OnCreate` 在 `Create` 或 `CreateEx` 成员函数返回前调用。

重写此成员函数以执行任何所需的派生类初始化。

`CREATESTRUCT` 结构包含用于创建窗口的参数的副本。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onctlcolor"></a>CWnd：： OnCtlColor

当要绘制子控件时，框架会调用此成员函数。

```
afx_msg HBRUSH OnCtlColor(
    CDC* pDC,
    CWnd* pWnd,
    UINT nCtlColor);
```

### <a name="parameters"></a>parameters

*pDC*<br/>
包含指向子窗口的显示上下文的指针。 可能是临时性的。

*pWnd*<br/>
包含一个指针，该指针指向要求提供颜色的控件。 可能是临时性的。

*nCtlColor*<br/>
包含以下值之一，指定控件的类型：

- CTLCOLOR_BTN 按钮控件

- CTLCOLOR_DLG "对话框

- CTLCOLOR_EDIT 编辑控件

- CTLCOLOR_LISTBOX 列表框控件

- CTLCOLOR_MSGBOX 消息框

- CTLCOLOR_SCROLLBAR 滚动条控件

- CTLCOLOR_STATIC 静态控件

### <a name="return-value"></a>返回值

`OnCtlColor` 必须返回要用于绘制控件背景的画笔的句柄。

### <a name="remarks"></a>备注

大多数控件将此消息发送到它们的父级（通常是一个对话框），以便为使用正确的颜色绘制控件准备*pDC* 。

若要更改文本颜色，请用所需的红色、绿色和蓝色（RGB）值调用 `SetTextColor` 成员函数。

若要更改单行编辑控件的背景色，请在 CTLCOLOR_EDIT 和 CTLCOLOR_MSGBOX 消息代码中设置画笔句柄，并调用[CDC：： SetBkColor](../../mfc/reference/cdc-class.md#setbkcolor)函数以响应 CTLCOLOR_EDIT 代码。

不会为下拉组合框的列表框调用 `OnCtlColor`，因为下拉列表框实际上是组合框的子级，而不是窗口的子级。 若要更改下拉列表框的颜色，请创建一个 `CComboBox`，其重写 `OnCtlColor` 检查 `nCtlColor` 参数中的 CTLCOLOR_LISTBOX。 在此处理程序中，必须使用 `SetBkColor` 成员函数设置文本的背景色。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。 若要将以下方法添加到对话框类，请使用 Visual Studio 的 "属性" 窗格为 WM_CTLCOLOR 添加消息处理程序。 或者，您可以手动将 ON_WM_CTLCOLOR （）条目添加到消息映射。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#107](../../mfc/reference/codesnippet/cpp/cwnd-class_47.cpp)]

##  <a name="ondeadchar"></a>CWnd：： OnDeadChar

当调用[OnKeyUp](#onkeyup)成员函数和[OnKeyDown](#onkeydown)成员函数时，框架会调用此成员函数。

```
afx_msg void OnDeadChar(
    UINT nChar,
    UINT nRepCnt,
    UINT nFlags);
```

### <a name="parameters"></a>parameters

*nChar*<br/>
指定死键字符值。

*nRepCnt*<br/>
指定重复计数。

*nFlags*<br/>
指定扫描代码、键转换代码、上一个密钥状态和上下文代码，如下面的列表所示：

|值|说明|
|-----------|-----------------|
|0-7|扫描代码（与 OEM 相关的值）。 高序位字的低字节。|
|8|扩展键，如数字键盘上的函数键或键（如果是扩展键，则为 1; 否则为0）。|
|9-10|未使用。|
|11-12|由 Windows 在内部使用。|
|13|上下文代码（如果按下了键，则为 1; 否则为0）。|
|14|上一个键状态（如果键在调用之前关闭，则为 1; 如果键已启动，则为0）。|
|15|转换状态（如果正在释放密钥，则为 1; 如果按下该键，则为0）。|

### <a name="remarks"></a>备注

此成员函数可用于指定死键的字符值。 "死密钥" 是一种与其他字符组合在一起形成一个组合字符的键，如经过变音符（双点）的字符。 例如，已元音输入的-O 字符包含死信键、元音变音符和 O 键。

应用程序通常使用 `OnDeadChar` 向用户提供有关每个按下的键的反馈。 例如，应用程序可以在当前字符位置显示重音，而不移动插入符号。

由于在按下键和 `OnDeadChar` 调用之间并不一定存在一对一的对应关系，因此， *nFlags*中的信息通常对应用程序并不有用。 *NFlags*中的信息仅适用于对[OnKeyUp](#onkeyup)成员函数的最近调用或位于 `OnDeadChar` 调用之前的[OnKeyDown](#onkeydown)成员函数。

对于 IBM 增强的101和102键盘，增强型密钥是右 ALT，键盘主要部分的右 CTRL 键;数字键盘左侧分类中的 INS、DEL、HOME、END、PAGE UP、PAGE DOWN 和箭头键;和斜线（/），然后在数字键盘中输入键。 其他一些键盘可能支持*nFlags*中的扩展密钥位。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="ondeleteitem"></a>CWnd：： OnDeleteItem

框架调用此成员函数来通知所有者描述的列表框或组合框的所有者，列表框或组合框被销毁或已被[CComboBox 删除：:D eletestring](../../mfc/reference/ccombobox-class.md#deletestring)， [CListBox：:D eletestring](../../mfc/reference/clistbox-class.md#deletestring)， [CComboBox：： ResetContent](../../mfc/reference/ccombobox-class.md#resetcontent)或[CListBox：： ResetContent](../../mfc/reference/clistbox-class.md#resetcontent)。

```
afx_msg void OnDeleteItem(
    int nIDCtl,
    LPDELETEITEMSTRUCT lpDeleteItemStruct);
```

### <a name="parameters"></a>parameters

*nIDCtl*<br/>
发送 WM_DELETEITEM 消息的控件的标识符。

*lpDeleteItemStruct*<br/>
指定指向[DELETEITEMSTRUCT](/windows/win32/api/winuser/ns-winuser-deleteitemstruct)数据结构的长指针，该指针包含有关已删除的列表框项的信息。

### <a name="remarks"></a>备注

如果 `DELETEITEMSTRUCT` 结构的 `hwndItem` 成员属于组合框或列表框，则会调用相应类的 `DeleteItem` 虚函数。 重写适当控件的类的 `DeleteItem` 成员函数以删除特定于项的数据。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="ondestroy"></a>CWnd：： OnDestroy

框架调用此成员函数来通知 `CWnd` 对象正在被销毁。

```
afx_msg void OnDestroy();
```

### <a name="remarks"></a>备注

从屏幕中删除 `CWnd` 对象后，将调用 `OnDestroy`。

首先为正在销毁的 `CWnd` 调用 `OnDestroy`，然后在销毁 `CWnd` 的子窗口时调用。 可以假定在 `OnDestroy` 运行时，所有子窗口仍然存在。

如果被销毁的 `CWnd` 对象是剪贴板-查看器链（通过调用[SetClipboardViewer](#setclipboardviewer)成员函数设置）的一部分，则 `CWnd` 必须通过在从 `OnDestroy` 函数返回之前调用[ChangeClipboardChain](#changeclipboardchain)成员函数从剪贴板查看器链中移除自身。

##  <a name="ondestroyclipboard"></a>CWnd：： OnDestroyClipboard

当通过调用[EmptyClipboard](/windows/win32/api/winuser/nf-winuser-emptyclipboard) Windows 函数清空剪贴板时，框架会为剪贴板所有者调用此成员函数。

```
afx_msg void OnDestroyClipboard();
```

##  <a name="ondevicechange"></a>CWnd：： OnDeviceChange

框架调用此成员函数来通知应用程序或设备驱动程序对设备或计算机的硬件配置的更改。

```
afx_msg BOOL OnDeviceChange(
    UINT nEventType,
    DWORD_PTR dwData);
```

### <a name="parameters"></a>parameters

*nEventType*<br/>
事件类型。 有关可用值的说明，请参阅 "备注" 部分

*dwData*<br/>
包含特定于事件的数据的结构的地址。 其含义取决于给定的事件。

### <a name="remarks"></a>备注

对于提供软件控制功能的设备（如弹出和锁定），操作系统通常会发送 DBT_DEVICEREMOVEPENDING 消息，使应用程序和设备驱动程序能够正常使用设备。

如果操作系统强制删除设备，则在执行此操作之前，可能不会发送 DBT_DEVICEQUERYREMOVE 消息。

*NEvent*参数可以是以下值之一：

- [DBT_DEVICEARRIVAL](/windows/win32/DevIO/dbt-devicearrival)设备已插入，现已可用。

- [DBT_DEVICEQUERYREMOVE](/windows/win32/DevIO/dbt-devicequeryremove)请求删除设备的权限。 任何应用程序都可以拒绝此请求并取消删除操作。

- [DBT_DEVICEQUERYREMOVEFAILED](/windows/win32/DevIO/dbt-devicequeryremovefailed)删除设备的请求已被取消。

- [DBT_DEVICEREMOVEPENDING](/windows/win32/DevIO/dbt-deviceremovepending)将删除设备。 不能被拒绝。

- [DBT_DEVICEREMOVECOMPLETE](/windows/win32/DevIO/dbt-deviceremovecomplete)设备已被删除。

- [DBT_DEVICETYPESPECIFIC](/windows/win32/DevIO/dbt-devicetypespecific)特定于设备的事件。

- [DBT_CONFIGCHANGED](/windows/win32/DevIO/dbt-configchanged)当前配置已更改。

- DBT_DEVNODES_CHANGED 设备节点已更改。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="ondevmodechange"></a>CWnd：： OnDevModeChange

当用户更改设备模式设置时，框架将为所有顶级 `CWnd` 对象调用此成员函数。

```
afx_msg void OnDevModeChange(LPTSTR lpDeviceName);
```

### <a name="parameters"></a>parameters

*lpDeviceName*<br/>
指向 Windows 初始化文件中指定的设备名称，WIN.INI.

### <a name="remarks"></a>备注

处理 WM_DEVMODECHANGE 消息的应用程序可能会重新初始化其设备模式设置。 使用 Windows `ExtDeviceMode` 函数保存和还原设备设置的应用程序通常不处理此函数。

当用户从 "控制面板" 更改默认打印机时，不会调用此函数。 在这种情况下，将调用 `OnWinIniChange` 函数。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="ondrawclipboard"></a>CWnd：： OnDrawClipboard

当剪贴板的内容更改时，框架会为剪贴板查看器链中的每个窗口调用此成员函数。

```
afx_msg void OnDrawClipboard();
```

### <a name="remarks"></a>备注

只有已通过调用[SetClipboardViewer](#setclipboardviewer)成员函数联接了剪贴板查看器链的应用程序需要响应此调用。

接收 `OnDrawClipboard` 调用的每个窗口都应调用[SendMessage](/windows/win32/api/winuser/nf-winuser-sendmessage) Windows 函数，将[WM_DRAWCLIPBOARD](/windows/win32/dataxchg/wm-drawclipboard)消息传递到剪贴板上的下一个窗口。 下一窗口的句柄由[SetClipboardViewer](#setclipboardviewer)成员函数返回;可对其进行修改以响应[OnChangeCbChain](#onchangecbchain)成员函数调用。

##  <a name="ondrawiconicthumbnailorlivepreview"></a>CWnd：： OnDrawIconicThumbnailOrLivePreview

由框架在需要获取要在 Windows 7 选项卡缩略图上或客户端上（进行应用程序速览）显示的位图时进行调用。

```
virtual void OnDrawIconicThumbnailOrLivePreview(
    CDC& dc,
    CRect rect,
    CSize szRequiredThumbnailSize,
    BOOL bIsThumbnail,
    BOOL& bAlphaChannelSet);
```

### <a name="parameters"></a>parameters

*dc*<br/>
指定设备上下文。

*rect*<br/>
指定要呈现的区域的边框。

*szRequiredThumbnailSize*<br/>
指定目标缩略图的大小。 如果*bIsThumbnail*为 FALSE，则应忽略。

*bIsThumbnail*<br/>
指定是否为图标缩略图或实时预览（速览）调用此方法。

*bAlphaChannelSet*<br/>
弄如果实现初始化在*dc*中选定的位图的 alpha 通道，则将其设置为 TRUE。

### <a name="remarks"></a>备注

在派生类中重写此方法，并在指定的设备上下文中绘制，以便自定义缩略图和速览。 如果*bThumbnail*为 TRUE，则可以忽略*szRequiredThumbnailSize* 。 在这种情况下，应注意绘制完全大小的位图（即包含整个工作区的位图）。 设备上下文（ *dc*）随附选定的32位位图。 默认实现通过 PRF_CLIENT、PRF_CHILDREN 和 PRF_NONCLIENT 标志向此窗口发送 WM_PRINT。

##  <a name="ondrawitem"></a>CWnd：： OnDrawItem

在控件或菜单的可视方面发生更改时，框架为所有者描述的按钮控件、组合框控件、列表框控件或菜单的所有者调用此成员函数。

```
afx_msg void OnDrawItem(
    int nIDCtl,
    LPDRAWITEMSTRUCT lpDrawItemStruct);
```

### <a name="parameters"></a>parameters

*nIDCtl*<br/>
包含发送 WM_DRAWITEM 消息的控件的标识符。 如果某个菜单发送了该消息，则*nIDCtl*包含0。

*lpDrawItemStruct*<br/>
指定指向 `DRAWITEMSTRUCT` 数据结构的长指针，该指针包含要绘制的项的相关信息以及所需的绘制类型。

### <a name="remarks"></a>备注

[DRAWITEMSTRUCT](/windows/win32/api/winuser/ns-winuser-drawitemstruct)结构的 `itemAction` 成员定义要执行的绘制操作。 此成员中的数据允许控件的所有者确定所需的绘制操作。

在从处理此消息返回之前，应用程序应确保 `DRAWITEMSTRUCT` 结构的*hDC*成员标识的设备上下文还原为默认状态。

如果 `hwndItem` 成员属于[CButton](../../mfc/reference/cbutton-class.md)、 [CMenu](../../mfc/reference/cmenu-class.md)、 [CListBox](../../mfc/reference/clistbox-class.md)或[CComboBox](../../mfc/reference/ccombobox-class.md)对象，则将调用相应类的 `DrawItem` 虚函数。 重写适当控件的类的 `DrawItem` 成员函数以绘制项。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="ondropfiles"></a>CWnd：： OnDropFiles

当用户将鼠标左键向已注册为删除文件的接收方的窗口上释放鼠标左键时，框架将调用此成员函数。

```
afx_msg void OnDropFiles(HDROP hDropInfo);
```

### <a name="parameters"></a>parameters

*hDropInfo*<br/>
指向用于描述已删除文件的内部数据结构的指针。 `DragFinish`、`DragQueryFile`和 `DragQueryPoint` Windows 函数使用此句柄来检索有关删除的文件的信息。

### <a name="remarks"></a>备注

通常，派生类将设计为支持已删除的文件，并且它将在窗口构造过程中自行注册。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onenable"></a>CWnd：： OnEnable

当应用程序更改 `CWnd` 对象的启用状态时，框架会调用此成员函数。

```
afx_msg void OnEnable(BOOL bEnable);
```

### <a name="parameters"></a>parameters

*bEnable*<br/>
指定 `CWnd` 对象已启用还是已禁用。 如果 `CWnd` 已启用，则此参数为 TRUE;如果已禁用 `CWnd`，则为 FALSE。

### <a name="remarks"></a>备注

`OnEnable` 在[EnableWindow](#enablewindow)成员函数返回之前调用，但在窗口启用状态（ [WS_DISABLED](styles-used-by-mfc.md#window-styles)样式位）已更改后。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onendsession"></a>CWnd：： OnEndSession

在 `CWnd` 对象从[OnQueryEndSession](#onqueryendsession)成员函数调用返回非零值后，框架将调用此成员函数。

```
afx_msg void OnEndSession(BOOL bEnding);
```

### <a name="parameters"></a>parameters

*装入*<br/>
指定会话是否正在结束。 如果会话正在结束，则为 TRUE;否则为 FALSE。

### <a name="remarks"></a>备注

`OnEndSession` 调用通知 `CWnd` 对象是否确实正在结束会话。

如果*为 TRUE，则在*所有应用程序都从处理此调用返回后，Windows 可能会终止。 因此，让应用程序执行在 `OnEndSession`中终止所需的所有任务。

当会话结束时，无需调用[DestroyWindow](#destroywindow)成员函数或[PostQuitMessage](/windows/win32/api/winuser/nf-winuser-postquitmessage) Windows 函数。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onenteridle"></a>CWnd：： OnEnterIdle

框架调用此成员函数来通知应用程序的主窗口过程模式对话框或菜单进入空闲状态。

```
afx_msg void OnEnterIdle(
    UINT nWhy,
    CWnd* pWho);
```

### <a name="parameters"></a>parameters

*nWhy*<br/>
指定消息是由对话框还是显示菜单的结果。 此参数可以是下列值之一：

- MSGF_DIALOGBOX 系统处于空闲状态，因为正在显示一个对话框。

- MSGF_MENU 系统处于空闲状态，因为正在显示菜单。

*pWho*<br/>
指定指向对话框的指针（如果*nWhy*是 MSGF_DIALOGBOX）或包含所显示菜单的窗口（如果 MSGF_MENU 为*nWhy* ）。 此指针可能是暂时的，不应存储以供以后使用。

### <a name="remarks"></a>备注

模式对话框或菜单在处理完一个或多个以前的消息后，将进入空闲状态。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onentermenuloop"></a>CWnd：： OnEnterMenuLoop

进入菜单模式循环后，框架将调用此成员函数。

```
afx_msg void OnEnterMenuLoop(BOOL bIsTrackPopupMenu);
```

### <a name="parameters"></a>parameters

*bIsTrackPopupMenu*<br/>
指定所涉及的菜单是否是一个弹出菜单。 如果函数成功，则为非零值;否则为0。

### <a name="remarks"></a>备注

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onentersizemove"></a>CWnd：： OnEnterSizeMove

框架在受影响的窗口进入移动或大小调整模式循环后一次调用此成员函数。

```
afx_msg void OnEnterSizeMove();
```

### <a name="remarks"></a>备注

此方法接收 Windows SDK 中描述的[WM_ENTERSIZEMOVE](/windows/win32/winmsg/wm-entersizemove)通知。

当用户单击窗口的标题栏或调整边框时，或当窗口将[WM_SYSCOMMAND](/windows/win32/menurc/wm-syscommand)消息传递给[CWnd：:D efwindowproc](#defwindowproc)函数，并且该消息的*wParam*参数指定 SC_MOVE 或 SC_SIZE 时，窗口将进入移动或调整模式模式循环。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onerasebkgnd"></a>CWnd：： OnEraseBkgnd

当需要擦除 `CWnd` 对象背景时，框架会调用此成员函数（例如，调整大小时）。

```
afx_msg BOOL OnEraseBkgnd(CDC* pDC);
```

### <a name="parameters"></a>parameters

*pDC*<br/>
指定设备上下文对象。

### <a name="return-value"></a>返回值

如果删除背景，则为非零值;否则为0。

### <a name="remarks"></a>备注

将调用它来准备用于绘制的无效区域。

默认实现使用窗口类结构的 `hbrBackground` 成员指定的窗口类背景画笔来清除背景。

如果 `hbrBackground` 成员为 NULL，则 `OnEraseBkgnd` 的重写版本应删除背景色。 您的版本还应将目标画笔的原点与 `CWnd` 坐标对齐，方法是首先为画笔调用[UnrealizeObject](/windows/win32/api/wingdi/nf-wingdi-unrealizeobject) ，然后选择画笔。

重写的 `OnEraseBkgnd` 应返回非零值，以响应 WM_ERASEBKGND 如果它处理消息并清除后台;这表示不需要进一步擦除。 如果返回0，则窗口将保持标记为需要擦除。 （通常，这意味着 `PAINTSTRUCT` 结构的 `fErase` 成员将为 TRUE。）

Windows 假定背景是用 MM_TEXT 映射模式计算的。 如果设备上下文正在使用任何其他映射模式，则清除的区域可能不在工作区的可见部分内。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onexitmenuloop"></a>CWnd：： OnExitMenuLoop

退出菜单模式循环时，框架会调用此成员函数。

```
afx_msg void OnExitMenuLoop(BOOL bIsTrackPopupMenu);
```

### <a name="parameters"></a>parameters

*bIsTrackPopupMenu*<br/>
指定所涉及的菜单是否是一个弹出菜单。 如果函数成功，则为非零值;否则为0。

### <a name="remarks"></a>备注

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onexitsizemove"></a>CWnd：： OnExitSizeMove

在受影响的窗口退出移动或大小调整模式循环后，框架将调用此成员函数一次。

```
afx_msg void OnExitSizeMove();
```

### <a name="remarks"></a>备注

此方法接收 Windows SDK 中描述的[WM_EXITSIZEMOVE](/windows/win32/winmsg/wm-exitsizemove)通知。

当用户单击窗口的标题栏或调整边框时，或当窗口将[WM_SYSCOMMAND](/windows/win32/menurc/wm-syscommand)消息传递给[CWnd：:D efwindowproc](#defwindowproc)函数，并且该消息的*wParam*参数指定 SC_MOVE 或 SC_SIZE 时，窗口将进入移动或调整模式模式循环。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onfontchange"></a>CWnd：： OnFontChange

在应用程序更改字体资源池之后，系统中的所有顶级窗口都将从框架收到 `OnFontChange` 调用。

```
afx_msg void OnFontChange();
```

### <a name="remarks"></a>备注

在系统中添加或删除字体的应用程序（例如，通过[AddFontResource](/windows/win32/api/wingdi/nf-wingdi-addfontresourcew)或[RemoveFontResource](/windows/win32/api/wingdi/nf-wingdi-removefontresourcew) Windows 函数）应将[WM_FONTCHANGE](/windows/win32/gdi/wm-fontchange)消息发送到所有顶级窗口。

若要发送此消息，请使用[SendMessage](/windows/win32/api/winuser/nf-winuser-sendmessage) Windows 函数，并将*hWnd*参数设置为 HWND_BROADCAST。

##  <a name="ongetdlgcode"></a>CWnd：： OnGetDlgCode

针对控件进行调用，以便控件可以自己处理箭头键和 TAB 键输入。

```
afx_msg UINT OnGetDlgCode();
```

### <a name="return-value"></a>返回值

以下一个或多个值，指示应用程序处理的输入类型：

- DLGC_BUTTON 按钮（通用）。

- DLGC_DEFPUSHBUTTON 默认按钮。

- DLGC_HASSETSEL EM_SETSEL 消息。

- DLGC_UNDEFPUSHBUTTON 无默认按键处理。 （应用程序可以将此标志与 DLGC_BUTTON 一起使用，以指示它处理按钮输入，但依赖系统进行默认按键处理。）

- DLGC_RADIOBUTTON "单选按钮。

- DLGC_STATIC 静态控件。

- DLGC_WANTALLKEYS 所有键盘输入。

- DLGC_WANTARROWS 箭头键。

- DLGC_WANTCHARS WM_CHAR 消息。

- DLGC_WANTMESSAGE 所有键盘输入。 应用程序将此消息传递到控件。

- DLGC_WANTTAB TAB 键。

### <a name="remarks"></a>备注

通常，Windows 处理 `CWnd` 控件的所有箭头键和 TAB 键输入。 通过重写 `OnGetDlgCode`，`CWnd` 控件可以选择特定类型的输入来自行处理。

预定义控件类的默认 `OnGetDlgCode` 函数返回适用于每个类的代码。

##  <a name="ongetminmaxinfo"></a>CWnd：： OnGetMinMaxInfo

每当 Windows 需要了解最大化的位置或维度，或者最小或最大跟踪大小时，框架都会调用此成员函数。

```
afx_msg void OnGetMinMaxInfo(MINMAXINFO* lpMMI);
```

### <a name="parameters"></a>parameters

*lpMMI*<br/>
指向一个 `MINMAXINFO` 结构，该结构包含有关窗口最大化的大小和位置以及最小和最大跟踪大小的信息。 有关此结构的详细信息，请参阅[MINMAXINFO](/windows/win32/api/winuser/ns-winuser-minmaxinfo)结构。

### <a name="remarks"></a>备注

最大大小是窗口边框完全扩展时窗口的大小。 窗口的最大跟踪大小是窗口大小的最大值，可以通过使用边框来调整窗口的大小。 窗口的最小跟踪大小是窗口大小的最小值，可通过使用边框来调整窗口的大小。

Windows 在指定各个位置和维度的默认值的点数组中填充。 应用程序可以在 `OnGetMinMaxInfo`中更改这些值。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onhelp"></a>CWnd：： OnHelp

处理应用程序中的 F1 帮助（使用当前上下文）。

```
afx_msg void OnHelp();
```

### <a name="remarks"></a>备注

有关详细信息，请参阅[CWinApp：： OnHelp](../../mfc/reference/cwinapp-class.md#onhelp) 。

##  <a name="onhelpfinder"></a>CWnd：： OnHelpFinder

处理 ID_HELP_FINDER 和 ID_DEFAULT_HELP 命令。

```
afx_msg void OnHelpFinder();
```

### <a name="remarks"></a>备注

有关详细信息，请参阅[CWinApp：： OnHelpFinder](../../mfc/reference/cwinapp-class.md#onhelpfinder) 。

##  <a name="onhelpindex"></a>CWnd：： OnHelpIndex

处理 ID_HELP_INDEX 命令并提供默认帮助主题。

```
afx_msg void OnHelpIndex();
```

### <a name="remarks"></a>备注

有关详细信息，请参阅[CWinApp：： OnHelpIndex](../../mfc/reference/cwinapp-class.md#onhelpindex) 。

##  <a name="onhelpinfo"></a>CWnd：： OnHelpInfo

当用户按 F1 键时，由框架调用。

```
afx_msg BOOL OnHelpInfo(HELPINFO* lpHelpInfo);
```

### <a name="parameters"></a>parameters

*lpHelpInfo*<br/>
指向[HELPINFO](/windows/win32/api/winuser/ns-winuser-helpinfo)结构的指针，该结构包含有关为其请求帮助的菜单项、控件、对话框或窗口的信息。

### <a name="return-value"></a>返回值

如果窗口具有键盘焦点或者菜单在窗口内处于活动状态，则返回 TRUE。 如果没有窗口具有键盘焦点，则返回 FALSE。

### <a name="remarks"></a>备注

如果按 F1 时菜单处于活动状态，则会将 WM_HELP 发送到与菜单关联的窗口;否则，WM_HELP 将发送到具有键盘焦点的窗口。 如果没有窗口具有键盘焦点，则将 WM_HELP 发送到当前活动的窗口。

##  <a name="onhelpusing"></a>CWnd：： OnHelpUsing

处理 ID_HELP_USING 命令。

```
afx_msg void OnHelpUsing();
```

### <a name="remarks"></a>备注

有关详细信息，请参阅[CWinApp：： OnHelpUsing](../../mfc/reference/cwinapp-class.md#onhelpusing) 。

##  <a name="onhotkey"></a>CWnd：： OnHotKey

当用户按系统范围的热键时，框架会调用此成员函数。

```
afx_msg void OnHotKey(
    UINT nHotKeyId,
    UINT nKey1,
    UINT nKey2);
```

### <a name="parameters"></a>parameters

|参数|说明|
|---------------|-----------------|
|*nHotKeyId*|中生成消息的热键的标识符。 如果消息是由系统定义的热键生成的，则此参数将为下列值之一：<br /><br /> -IDHOT_SNAPDESKTOP-按下了 snap 桌面热键。<br />-IDHOT_SNAPWINDOW-已按下 "snap" 窗口热键。|
|*nKey1*|中标志的按位组合（OR），指示按*nKey2*参数指定的键组合在一起的键。 可能的值包括：<br /><br /> -MOD_ALT-按住 ALT 键。<br />-MOD_CONTROL-按住 CTRL 键。<br />-MOD_SHIFT-按住 SHIFT 键。<br />-MOD_WIN-已关闭 WINDOWS 项。 这些密钥带有 Microsoft Windows 徽标标记。|
|*nKey2*|中热键的虚拟键代码。|

### <a name="remarks"></a>备注

此方法接收 Windows SDK 中描述的[WM_HOTKEY](/windows/win32/inputdev/wm-hotkey)通知。 此消息位于与注册了热密钥的线程关联的消息队列的顶部。 使用[RegisterHotKey](/windows/win32/api/winuser/nf-winuser-registerhotkey)函数可注册系统范围的热键。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onhscroll"></a>CWnd：： OnHScroll

用户单击窗口的水平滚动条时，框架会调用此成员函数。

```
afx_msg void OnHScroll(
    UINT nSBCode,
    UINT nPos,
    CScrollBar* pScrollBar);
```

### <a name="parameters"></a>parameters

*nSBCode*<br/>
指定一个指示用户滚动请求的滚动条代码。 此参数可以是以下项之一：

- SB_LEFT 向左上方滚动。

- SB_ENDSCROLL 结束滚动。

- SB_LINELEFT 向左滚动。

- SB_LINERIGHT 向右滚动。

- SB_PAGELEFT 向左滚动一页。

- SB_PAGERIGHT 向右滚动一页。

- SB_RIGHT 向右滚动。

- SB_THUMBPOSITION 滚动到绝对位置。 当前位置由*nPos*参数指定。

- SB_THUMBTRACK 将滚动框拖到指定位置。 当前位置由*nPos*参数指定。

*nPos*<br/>
指定滚动条代码 SB_THUMBPOSITION 或 SB_THUMBTRACK 时的滚动框位置;否则，不使用。 根据初始滚动范围， *nPos*可能为负数，并且应在必要时强制转换为**int** 。

*pScrollBar*<br/>
如果滚动消息来自滚动条控件，则包含指向控件的指针。 如果用户单击了窗口的滚动条，则此参数为 NULL。 该指针可能是暂时的，不应存储起来供将来使用。

### <a name="remarks"></a>备注

SB_THUMBTRACK 滚动条代码通常由在拖动滚动框时提供一些反馈的应用程序使用。

如果应用程序滚动滚动条控制的内容，它还必须使用[SetScrollPos](#setscrollpos)成员函数重置滚动框的位置。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#108](../../mfc/reference/codesnippet/cpp/cwnd-class_48.cpp)]

##  <a name="onhscrollclipboard"></a>CWnd：： OnHScrollClipboard

当剪贴板数据具有 `CF_OWNERDISPLAY` 格式且剪贴板查看器的水平滚动条中存在事件时，剪贴板查看器将调用剪贴板所有者的 `OnHScrollClipboard` 成员函数。

```
afx_msg void OnHScrollClipboard(
    CWnd* pClipAppWnd,
    UINT nSBCode,
    UINT nPos);
```

### <a name="parameters"></a>parameters

*pClipAppWnd*<br/>
指定指向剪贴板查看器窗口的指针。 该指针可能是暂时的，不应存储起来供将来使用。

*nSBCode*<br/>
指定低序位字中的下列滚动条代码之一：

- SB_BOTTOM 向右滚动。

- SB_ENDSCROLL 结束滚动。

- SB_LINEDOWN 向下滚动一行。

- SB_LINEUP 向上滚动一行。

- SB_PAGEDOWN 向下滚动一页。

- SB_PAGEUP 向上滚动一页。

- SB_THUMBPOSITION 滚动到绝对位置。 当前位置是在*nPos*中提供的。

- SB_TOP 向左上方滚动。

*nPos*<br/>
如果滚动条代码是 SB_THUMBPOSITION，则包含滚动框位置;否则，不使用。

### <a name="remarks"></a>备注

所有者应滚动剪贴板图像、使相应部分失效以及更新滚动条值。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="oniconerasebkgnd"></a>CWnd：： OnIconEraseBkgnd

当必须在绘制图标之前填充图标的背景时，框架会为最小化（图标） `CWnd` 对象调用此成员函数。

```
afx_msg void OnIconEraseBkgnd(CDC* pDC);
```

### <a name="parameters"></a>parameters

*pDC*<br/>
指定图标的设备上下文对象。 可能是临时性的，不应存储以供以后使用。

### <a name="remarks"></a>备注

仅当为窗口默认实现定义了类图标时，`CWnd` 才接收此调用;否则，将调用[OnEraseBkgnd](#onerasebkgnd) 。

[DefWindowProc](#defwindowproc)成员函数用父窗口的背景画笔填充图标背景。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="oninitmenu"></a>CWnd：： OnInitMenu

当菜单即将变为活动状态时，框架会调用此成员函数。

```
afx_msg void OnInitMenu(CMenu* pMenu);
```

### <a name="parameters"></a>parameters

*pMenu*<br/>
指定要初始化的菜单。 可能是临时性的，不应存储以供以后使用。

### <a name="remarks"></a>备注

当用户单击菜单栏上的某个项或按下菜单键时，将调用 `OnInitMenu`。 重写此成员函数可在菜单显示之前修改它。

首次访问菜单时（例如，当用户单击菜单栏上的项时），只调用一次 `OnInitMenu`。 此方法不提供有关菜单项的信息。 当用户移到菜单内的项（例如，通过将鼠标移动到多个菜单项）时，不会再次调用该函数。 用户退出菜单（例如，单击 "应用程序" 工作区，然后单击菜单栏上的项）后，将再次调用该函数。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="oninitmenupopup"></a>CWnd：： OnInitMenuPopup

当弹出菜单即将变为活动状态时，框架会调用此成员函数。

```
afx_msg void OnInitMenuPopup(
    CMenu* pPopupMenu,
    UINT nIndex,
    BOOL bSysMenu);
```

### <a name="parameters"></a>parameters

*pPopupMenu*<br/>
指定弹出菜单的菜单对象。 可能是临时性的，不应存储以供以后使用。

*nIndex*<br/>
指定主菜单中弹出菜单的索引。

*bSysMenu*<br/>
如果弹出菜单为 "控制" 菜单，则为 TRUE;否则为 FALSE。

### <a name="remarks"></a>备注

这样，应用程序便可以在显示弹出菜单之前修改它，而无需更改整个菜单。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="oninputdevicechange"></a>CWnd：： OnInputDeviceChange

当在系统中添加或删除 i/o 设备时，框架会调用此成员函数。

```
afx_msg void OnInputDeviceChange(unsigned short uFlag);
```

### <a name="parameters"></a>parameters

|参数|说明|
|---------------|-----------------|
|*uFlag*|中此标志可以包含以下值：<br /><br /> -GIDC_ARRIVAL-新设备已添加到系统中。<br />-GIDC_REMOVAL-设备已从系统中删除。|

### <a name="remarks"></a>备注

此方法接收 Windows SDK 中描述的[WM_INPUT_DEVICE_CHANGE](/windows/win32/inputdev/wm-input-device-change)通知。 是泛型输入设备消息。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="oninputlangchange"></a>CWnd：： OnInputLangChange

在应用程序的输入语言被更改后，框架将为最顶层的受影响窗口调用此成员。

```
afx_msg void OnInputLangChange(
    UINT nCharSet,
    UINT nLocaleId);
```

### <a name="parameters"></a>parameters

|参数|说明|
|---------------|-----------------|
|*nCharSet*|中新区域设置的字符集。 有关详细信息，请参阅[LOGFONT](/windows/win32/api/wingdi/ns-wingdi-logfontw)结构的*lf.lfcharset*参数。|
|*nLocaleId*|中输入区域设置标识符。 有关详细信息，请参阅[语言标识符常量和字符串](/windows/win32/Intl/language-identifier-constants-and-strings)。|

### <a name="remarks"></a>备注

此方法接收 Windows SDK 中描述的[WM_INPUTLANGCHANGE](/windows/win32/winmsg/wm-inputlangchange)通知消息。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="oninputlangchangerequest"></a>CWnd：： OnInputLangChangeRequest

当用户选择新的输入语言时，框架将为具有焦点的窗口调用此成员。

```
afx_msg void OnInputLangChangeRequest(
    UINT nFlags,
    UINT nLocaleId);
```

### <a name="parameters"></a>parameters

|参数|说明|
|---------------|-----------------|
|*nFlags*|中标志的按位（或）组合，这些标志指示新区域设置是从已安装的区域设置列表中的上一个或下一个区域设置中选择的，或者新的输入区域设置的键盘布局可以与系统字符集一起使用。<br /><br /> 可能的值为 INPUTLANGCHANGE_BACKWARD、INPUTLANGCHANGE_FORWARD 和 INPUTLANGCHANGE_SYSCHARSET。|
|*nLocaleId*|中输入区域设置标识符。 有关详细信息，请参阅[语言标识符常量和字符串](/windows/win32/Intl/language-identifier-constants-and-strings)。|

### <a name="remarks"></a>备注

此方法接收 Windows SDK 中描述的[WM_INPUTLANGCHANGEREQUEST](/windows/win32/winmsg/wm-inputlangchangerequest)通知消息。 当用户使用键盘控制面板应用程序中指定的热键或系统任务栏上的指示器选择新的输入语言时，会发布此消息。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onkeydown"></a>CWnd：： OnKeyDown

按下非系统键时，框架会调用此成员函数。

```
afx_msg void OnKeyDown(
    UINT nChar,
    UINT nRepCnt,
    UINT nFlags);
```

### <a name="parameters"></a>parameters

*nChar*<br/>
指定给定键的虚拟键代码。 有关标准虚拟键代码的列表，请参阅 Winuser。h

*nRepCnt*<br/>
重复计数（用户按住该键时，重复击键的次数）。

*nFlags*<br/>
指定扫描代码、键转换代码、上一个密钥状态和上下文代码，如下面的列表所示：

|值|说明|
|-----------|-----------------|
|0-7|扫描代码（与 OEM 相关的值）。|
|8|扩展键，如数字键盘上的函数键或键（如果它是扩展键，则为1）。|
|9-10|未使用。|
|11-12|由 Windows 在内部使用。|
|13|上下文代码（如果按下了键，则为 1; 否则为0）。|
|14|上一个键状态（如果键在调用之前关闭，则为 1; 如果键已启动，则为0）。|
|15|转换状态（如果正在释放密钥，则为 1; 如果按下该键，则为0）。|

对于 WM_KEYDOWN 消息，键转换位（位15）为0，上下文代码位（第13）为0。

### <a name="remarks"></a>备注

非系统键是指未按下 ALT 键时按下的键盘键，或者是 `CWnd` 具有输入焦点时按下的键盘键。

由于自动重复，因此在调用[OnKeyUp](#onkeyup)成员函数之前，可能会发生多个 `OnKeyDown` 调用。 指示上一键状态的位可用于确定 `OnKeyDown` 调用是第一个向下转换还是重复向下转换。

对于 IBM 增强的101和102键盘，增强型密钥是右 ALT，键盘主要部分的右 CTRL 键;数字键盘左侧分类中的 INS、DEL、HOME、END、PAGE UP、PAGE DOWN 和箭头键;和斜线（/），然后在数字键盘中输入键。 其他一些键盘可能支持*nFlags*中的扩展密钥位。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onkeyup"></a>CWnd：： OnKeyUp

释放非系统键时，框架会调用此成员函数。

```
afx_msg void OnKeyUp(
    UINT nChar,
    UINT nRepCnt,
    UINT nFlags);
```

### <a name="parameters"></a>parameters

*nChar*<br/>
指定给定键的虚拟键代码。 有关标准虚拟键代码的列表，请参阅 Winuser。h

*nRepCnt*<br/>
重复计数（用户按住该键时，重复击键的次数）。

*nFlags*<br/>
指定扫描代码、键转换代码、上一个密钥状态和上下文代码，如下面的列表所示：

|值|说明|
|-----------|-----------------|
|0-7|扫描代码（与 OEM 相关的值）。 高序位字的低字节。|
|8|扩展键，如数字键盘上的函数键或键（如果是扩展键，则为 1; 否则为0）。|
|9-10|未使用。|
|11-12|由 Windows 在内部使用。|
|13|上下文代码（如果按下了键，则为 1; 否则为0）。|
|14|上一个键状态（如果键在调用之前关闭，则为 1; 如果键已启动，则为0）。|
|15|转换状态（如果正在释放密钥，则为 1; 如果按下该键，则为0）。|

对于 WM_KEYUP 消息，键转换位（位15）为1，上下文代码位（第13）为0。

### <a name="remarks"></a>备注

非系统键是指未按下 ALT 键时按下的键盘键，或在 `CWnd` 具有输入焦点时按下的键盘键。

对于 IBM 增强的101和102键盘，增强型密钥是右 ALT，键盘主要部分的右 CTRL 键;数字键盘左侧分类中的 INS、DEL、HOME、END、PAGE UP、PAGE DOWN 和箭头键;和斜线（/），然后在数字键盘中输入键。 其他一些键盘可能支持*nFlags*中的扩展密钥位。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onkillfocus"></a>CWnd：： OnKillFocus

框架在丢失输入焦点之前立即调用此成员函数。

```
afx_msg void OnKillFocus(CWnd* pNewWnd);
```

### <a name="parameters"></a>parameters

*pNewWnd*<br/>
指定一个指针，该指针指向接收输入焦点的窗口（可以为 NULL，也可以是临时的）。

### <a name="remarks"></a>备注

如果 `CWnd` 对象正在显示插入符号，此时应销毁插入符号。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onlbuttondblclk"></a>CWnd：： OnLButtonDblClk

当用户双击鼠标左键时，框架会调用此成员函数。

```
afx_msg void OnLButtonDblClk(
    UINT nFlags,
    CPoint point);
```

### <a name="parameters"></a>parameters

*nFlags*<br/>
指示各种虚拟键是否已关闭。 此参数可以是下列值的任意组合：

- 如果按下 CTRL 键，则 MK_CONTROL 设置。

- 如果鼠标左键已关闭，则 MK_LBUTTON 设置。

- 如果鼠标中键为关闭状态，则 MK_MBUTTON 设置。

- 如果鼠标右键处于关闭状态，则 MK_RBUTTON 设置。

- 如果 SHIFT 键为 down，则 MK_SHIFT 设置。

*情况*<br/>
指定光标的 x 坐标和 y 坐标。 这些坐标始终相对于窗口的左上角。

### <a name="remarks"></a>备注

只有具有 CS_DBLCLKS [WNDCLASS](/windows/win32/api/winuser/ns-winuser-wndclassw)样式的窗口才能接收 `OnLButtonDblClk` 调用。 这是 Microsoft 基础类窗口的默认值。 当用户按下、松开，然后在系统的双击时间限制内再次按下鼠标左键时，Windows 将调用 `OnLButtonDblClk`。 双击鼠标左键实际上会生成四个事件： [WM_LBUTTONDOWN](#onlbuttondown)、 [WM_LBUTTONUP](#onlbuttonup)消息、WM_LBUTTONDBLCLK 调用，以及当按钮被释放时另一 WM_LBUTTONUP 消息。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onlbuttondown"></a>CWnd：： OnLButtonDown

当用户按下鼠标左键时，框架将调用此成员函数。

```
afx_msg void OnLButtonDown(
    UINT nFlags,
    CPoint point);
```

### <a name="parameters"></a>parameters

*nFlags*<br/>
指示各种虚拟键是否已关闭。 此参数可以是下列值的任意组合：

- 如果按下 CTRL 键，则 MK_CONTROL 设置。

- 如果鼠标左键已关闭，则 MK_LBUTTON 设置。

- 如果鼠标中键为关闭状态，则 MK_MBUTTON 设置。

- 如果鼠标右键处于关闭状态，则 MK_RBUTTON 设置。

- 如果 SHIFT 键为 down，则 MK_SHIFT 设置。

*情况*<br/>
指定光标的 x 坐标和 y 坐标。 这些坐标始终相对于窗口的左上角。

### <a name="remarks"></a>备注

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onlbuttonup"></a>CWnd：： OnLButtonUp

当用户释放鼠标左键时，框架会调用此成员函数。

```
afx_msg void OnLButtonUp(
    UINT nFlags,
    CPoint point);
```

### <a name="parameters"></a>parameters

*nFlags*<br/>
指示各种虚拟键是否已关闭。 此参数可以是下列值的任意组合：

- 如果按下 CTRL 键，则 MK_CONTROL 设置。

- 如果鼠标中键为关闭状态，则 MK_MBUTTON 设置。

- 如果鼠标右键处于关闭状态，则 MK_RBUTTON 设置。

- 如果 SHIFT 键为 down，则 MK_SHIFT 设置。

*情况*<br/>
指定光标的 x 坐标和 y 坐标。 这些坐标始终相对于窗口的左上角。

### <a name="remarks"></a>备注

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onmbuttondblclk"></a>CWnd：： OnMButtonDblClk

当用户双击鼠标中键时，框架会调用此成员函数。

```
afx_msg void OnMButtonDblClk(
    UINT nFlags,
    CPoint point);
```

### <a name="parameters"></a>parameters

*nFlags*<br/>
指示各种虚拟键是否已关闭。 此参数可以是下列值的任意组合：

- 如果按下 CTRL 键，则 MK_CONTROL 设置。

- 如果鼠标左键已关闭，则 MK_LBUTTON 设置。

- 如果鼠标中键为关闭状态，则 MK_MBUTTON 设置。

- 如果鼠标右键处于关闭状态，则 MK_RBUTTON 设置。

- 如果 SHIFT 键为 down，则 MK_SHIFT 设置。

*情况*<br/>
指定光标的 x 坐标和 y 坐标。 这些坐标始终相对于窗口的左上角。

### <a name="remarks"></a>备注

只有具有 CS_DBLCLKS [WNDCLASS](/windows/win32/api/winuser/ns-winuser-wndclassw)样式的窗口才能接收 `OnMButtonDblClk` 调用。 这是所有 Microsoft 基础类窗口的默认值。 当用户按下、松开后按下鼠标中键并在系统的双击时间限制内再次按下鼠标按钮时，Windows 将生成 `OnMButtonDblClk` 调用。 双击鼠标中键实际上会生成四个事件： [WM_MBUTTONDOWN](#onmbuttondown)和[WM_MBUTTONUP](#onmbuttonup)消息、WM_MBUTTONDBLCLK 调用，以及另一个 WM_MBUTTONUP 消息。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onmbuttondown"></a>CWnd：： OnMButtonDown

当用户按下鼠标中键时，框架会调用此成员函数。

```
afx_msg void OnMButtonDown(
    UINT nFlags,
    CPoint point);
```

### <a name="parameters"></a>parameters

*nFlags*<br/>
指示各种虚拟键是否已关闭。 此参数可以是下列值的任意组合：

- 如果按下 CTRL 键，则 MK_CONTROL 设置。

- 如果鼠标左键已关闭，则 MK_LBUTTON 设置。

- 如果鼠标中键为关闭状态，则 MK_MBUTTON 设置。

- 如果鼠标右键处于关闭状态，则 MK_RBUTTON 设置。

- 如果 SHIFT 键为 down，则 MK_SHIFT 设置。

*情况*<br/>
指定光标的 x 坐标和 y 坐标。 这些坐标始终相对于窗口的左上角。

### <a name="remarks"></a>备注

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onmbuttonup"></a>CWnd：： OnMButtonUp

当用户释放鼠标中键时，框架会调用此成员函数。

```
afx_msg void OnMButtonUp(
    UINT nFlags,
    CPoint point);
```

### <a name="parameters"></a>parameters

*nFlags*<br/>
指示各种虚拟键是否已关闭。 此参数可以是下列值的任意组合：

- 如果按下 CTRL 键，则 MK_CONTROL 设置。

- 如果鼠标左键已关闭，则 MK_LBUTTON 设置。

- 如果鼠标右键处于关闭状态，则 MK_RBUTTON 设置。

- 如果 SHIFT 键为 down，则 MK_SHIFT 设置。

*情况*<br/>
指定光标的 x 坐标和 y 坐标。 这些坐标始终相对于窗口的左上角。

### <a name="remarks"></a>备注

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onmdiactivate"></a>CWnd：： OnMDIActivate

框架为要停用的子窗口和正在激活的子窗口调用此成员函数。

```
afx_msg void OnMDIActivate(
    BOOL bActivate,
    CWnd* pActivateWnd,
    CWnd* pDeactivateWnd);
```

### <a name="parameters"></a>parameters

*bActivate*<br/>
如果子项正在激活，则为 TRUE; 否则为 FALSE。

*pActivateWnd*<br/>
包含指向要激活的 MDI 子窗口的指针。 当由 MDI 子窗口接收时， *pActivateWnd*包含指向正在激活的子窗口的指针。 此指针可能是暂时的，不应存储以供以后使用。

*pDeactivateWnd*<br/>
包含指向要停用的 MDI 子窗口的指针。 此指针可能是暂时的，不应存储以供以后使用。

### <a name="remarks"></a>备注

将独立于 MDI 框架窗口激活 MDI 子窗口。 当框架变为活动状态时，最后使用 `OnMDIActivate` 调用激活的子窗口会接收[WM_NCACTIVATE](#onncactivate)消息来绘制活动窗口框架和标题栏，但不会收到另一个 `OnMDIActivate` 调用。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onmeasureitem"></a>CWnd：： OnMeasureItem

框架为创建控件时所有者描述的按钮、组合框、列表框或菜单项的所有者调用此成员函数。

```
afx_msg void OnMeasureItem(
    int nIDCtl, LPMEASUREITEMSTRUCT lpMeasureItemStruct);
```

### <a name="parameters"></a>parameters

*nIDCtl*<br/>
控件的 ID。

*lpMeasureItemStruct*<br/>
指向包含所有者描述的控件的尺寸的[MEASUREITEMSTRUCT](/windows/win32/api/winuser/ns-winuser-measureitemstruct)数据结构。

### <a name="remarks"></a>备注

重写此成员函数并填写*lpMeasureItemStruct*所指向的 `MEASUREITEMSTRUCT` 数据结构并返回;这会告知 Windows 控件尺寸，并允许 Windows 正确处理用户与控件的交互。

如果列表框或组合框是使用[LBS_OWNERDRAWVARIABLE](../../mfc/reference/styles-used-by-mfc.md#list-box-styles)或[CBS_OWNERDRAWVARIABLE](../../mfc/reference/styles-used-by-mfc.md#combo-box-styles)样式创建的，则框架将为控件中的每一项的所有者调用此函数;否则，将调用此函数一次。

Windows 将对通过 OWNERDRAWFIXED 样式创建的组合框和列表框的所有者发起对 `OnMeasureItem` 的调用，然后再发送[WM_INITDIALOG](/windows/win32/dlgbox/wm-initdialog)消息。 因此，当所有者收到此调用时，Windows 尚未确定控件中使用的字体的高度和宽度;需要这些值的函数调用和计算应出现在应用程序或库的 main 函数中。

如果要测量的项是 `CMenu`、`CListBox` 或 `CComboBox` 对象，则将调用相应类的 `MeasureItem` 虚函数。 重写适当控件的类的 `MeasureItem` 成员函数以计算和设置每个项的大小。

仅当控件的类在运行时创建，或用 LBS_OWNERDRAWVARIABLE 或 CBS_OWNERDRAWVARIABLE 样式创建时，才会调用 `OnMeasureItem`。 如果控件是由对话框编辑器创建的，则不会调用 `OnMeasureItem`。 这是因为[WM_MEASUREITEM](/windows/win32/Controls/wm-measureitem)消息是在控件的创建进程早期发送的。 如果使用 `DDX_Control`、`SubclassDlgItem`或 `SubclassWindow`为子类创建子类，通常是在创建过程之后发生的。 因此，无法在控件的 `OnChildNotify` 函数中处理[WM_MEASUREITEM](/windows/win32/Controls/wm-measureitem)消息，这是 MFC 用于实现 ON_WM_MEASUREITEM_REFLECT 的机制。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onmenuchar"></a>CWnd：： OnMenuChar

当用户按下与当前菜单中任何预定义的助记键都不匹配的菜单助记键字符时，框架将调用此成员函数。

```
afx_msg LRESULT OnMenuChar(
    UINT nChar,
    UINT nFlags,
    CMenu* pMenu);
```

### <a name="parameters"></a>parameters

*nChar*<br/>
根据生成设置，指定用户按下的 ANSI 或 Unicode 字符。

*nFlags*<br/>
如果菜单是一个弹出菜单，则包含 MF_POPUP 标志。 如果菜单是 "控制" 菜单，则它包含 MF_SYSMENU 标志。

*pMenu*<br/>
包含指向选定 `CMenu`的指针。 指针可能是暂时的，不应存储。

### <a name="return-value"></a>返回值

返回值的高序位字应包含以下命令代码之一：

|值|说明|
|-----------|-----------------|
|0|告诉 Windows 丢弃用户按下的字符，并在系统扬声器上发出短暂的嘟嘟声。|
|1|告诉 Windows 关闭当前菜单。|
|2|通知 Windows 返回值的低序位字包含特定项的项编号。 此项目是由 Windows 选择的。|

如果高位字包含0或1，则将忽略低序位字。 当使用快捷键（快捷方式）键选择菜单中放置的位图时，应用程序应处理此消息。

### <a name="remarks"></a>备注

它将发送到拥有菜单的 `CWnd`。 当用户按下 ALT 和其他任何键时，也会调用 `OnMenuChar`，即使该键不对应于助记键字符也是如此。 在这种情况下， *pMenu*将指向 `CWnd`拥有的菜单， *nFlags*为0。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onmenudrag"></a>CWnd：： OnMenuDrag

当用户开始拖动菜单项时，框架将调用当前拖放菜单的此成员函数。

```
afx_msg UINT OnMenuDrag(
    UINT nPos,
    CMenu* pMenu);
```

### <a name="parameters"></a>parameters

|参数|说明|
|---------------|-----------------|
|*nPos*|中拖动操作开始时菜单项的索引位置。|
|*pMenu*|中指向包含菜单项的[CMenu](../../mfc/reference/cmenu-class.md)对象的指针。|

### <a name="return-value"></a>返回值

|返回值|含义|
|------------------|-------------|
|MND_CONTINUE|菜单应保持活动状态。 如果释放了鼠标，则应将其忽略。|
|MND_ENDMENU|菜单应结束。|

### <a name="remarks"></a>备注

此方法接收 Windows SDK 中描述的[WM_MENUDRAG](/windows/win32/menurc/wm-menudrag)通知。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onmenugetobject"></a>CWnd：： OnMenuGetObject

当鼠标光标进入菜单项或从该项的中心移动到该项的顶部或底部时，框架将调用当前拖放菜单的此成员函数。

```
afx_msg UINT OnMenuGetObject(MENUGETOBJECTINFO* pMenuGetObjectInfo);
```

### <a name="parameters"></a>parameters

|参数|说明|
|---------------|-----------------|
|*pMenu*|中指向[MENUGETOBJECTINFO](/windows/win32/api/winuser/ns-winuser-menugetobjectinfo)结构的指针，该结构包含有关鼠标光标所在的拖放菜单的信息。|

### <a name="return-value"></a>返回值

|返回值|含义|
|------------------|-------------|
|MNGO_NOERROR|支持拖放操作的接口指针在[MENUGETOBJECTINFO](/windows/win32/api/winuser/ns-winuser-menugetobjectinfo)结构的 `pvObj` 成员中返回。 目前仅支持[IDropTarget](/windows/win32/api/oleidl/nn-oleidl-idroptarget)接口。|
|MNGO_NOINTERFACE|不支持拖放接口。|

### <a name="remarks"></a>备注

此方法接收 Windows SDK 中描述的[WM_MENUGETOBJECT](/windows/win32/menurc/wm-menugetobject)通知。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onmenurbuttonup"></a>CWnd：： OnMenuRButtonUp

当光标位于菜单项上并且用户释放鼠标右键时，框架将调用此成员函数。

```
afx_msg void OnMenuRButtonUp(
    UINT nPos,
    CMenu* pMenu);
```

### <a name="parameters"></a>parameters

|参数|说明|
|---------------|-----------------|
|*nPos*|中释放鼠标右键时菜单项的索引位置。|
|*pMenu*|中指向包含菜单项的[CMenu](../../mfc/reference/cmenu-class.md)对象的指针。|

### <a name="remarks"></a>备注

此方法接收 Windows SDK 中描述的[WM_MENURBUTTONUP](/windows/win32/menurc/wm-menurbuttonup)通知。 使用[WM_MENURBUTTONUP](/windows/win32/menurc/wm-menurbuttonup)消息，应用程序可以为消息中指定的菜单项提供上下文相关菜单。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onmenuselect"></a>CWnd：： OnMenuSelect

如果 `CWnd` 对象与菜单相关联，则当用户选择菜单项时，框架将调用 `OnMenuSelect`。

```
afx_msg void OnMenuSelect(
    UINT nItemID,
    UINT nFlags,
    HMENU hSysMenu);
```

### <a name="parameters"></a>parameters

*nItemID*<br/>
标识所选的项。 如果所选项是菜单项，则*nItemID*包含菜单项 ID。 如果所选项包含弹出菜单，则*nItemID*包含弹出菜单索引，而*hSysMenu*包含 main （单击）菜单的句柄。

*nFlags*<br/>
包含以下菜单标志的组合：

- MF_BITMAP 项是位图。

- 已选中 MF_CHECKED 项。

- 已禁用 MF_DISABLED 项。

- MF_GRAYED 项灰显。

- 使用鼠标选择 MF_MOUSESELECT 项。

- MF_OWNERDRAW 项是所有者描述项。

- MF_POPUP 项包含一个弹出菜单。

- MF_SEPARATOR 项是菜单项分隔符。

- "控件" 菜单中包含 MF_SYSMENU 项。

*hSysMenu*<br/>
如果*nFlags*包含 MF_SYSMENU，则标识与消息关联的菜单。 如果*nFlags*包含 MF_POPUP，则标识主菜单的句柄。 如果*nFlags*既不 MF_SYSMENU 也不包含 MF_POPUP，则不会使用它。

### <a name="remarks"></a>备注

如果*nFlags*包含0Xffff 并且*hSysMenu*包含0，则 Windows 将关闭菜单，因为用户按了 ESC 键或在菜单外部单击了。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onmouseactivate"></a>CWnd：： OnMouseActivate

当光标位于非活动窗口中并且用户按下鼠标按钮时，框架将调用此成员函数。

```
afx_msg int OnMouseActivate(
    CWnd* pDesktopWnd,
    UINT nHitTest,
    UINT message);
```

### <a name="parameters"></a>parameters

*pDesktopWnd*<br/>
指定指向正在激活的窗口的顶级父窗口的指针。 指针可能是暂时的，不应存储。

*nHitTest*<br/>
指定[命中测试](#onnchittest)区域代码。 命中测试是确定游标位置的测试。

message<br/>
指定鼠标消息号。

### <a name="return-value"></a>返回值

指定是否激活 `CWnd` 以及是否丢弃鼠标事件。 它必须是下列值之一：

- MA_ACTIVATE 激活 `CWnd` 对象。

- MA_NOACTIVATE 不激活 `CWnd` 对象。

- MA_ACTIVATEANDEAT 激活 `CWnd` 对象并放弃鼠标事件。

- MA_NOACTIVATEANDEAT 不激活 `CWnd` 对象并放弃鼠标事件。

### <a name="remarks"></a>备注

在进行任何处理之前，默认实现会将此消息传递给父窗口。 如果父窗口返回 TRUE，则停止处理。

有关各个命中测试区域代码的说明，请参阅[OnNcHitTest](#onnchittest)成员函数

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCAxCtl#9](../../mfc/reference/codesnippet/cpp/cwnd-class_49.cpp)]

##  <a name="onmousehover"></a>CWnd：： OnMouseHover

当光标悬停在窗口的工作区上时，如果在之前对[TrackMouseEvent](/windows/win32/api/winuser/nf-winuser-trackmouseevent)的调用中指定的时间段，框架将调用此成员函数。

```
afx_msg void OnMouseHover(
    UINT nFlags,
    CPoint point);
```

### <a name="parameters"></a>parameters

|参数|说明|
|---------------|-----------------|
|*nFlags*|中标志的按位组合（OR），指示按下的修改键。 例如，MK_CONTROL 标志指示按下了 CTRL 键。|
|*情况*|中一个[CPoint](../../atl-mfc-shared/reference/cpoint-class.md)对象，该对象指定光标相对于工作区左上角的*x*和*y*坐标。|

### <a name="remarks"></a>备注

此方法接收 Windows SDK 中描述的[WM_MOUSEHOVER](/windows/win32/inputdev/wm-mousehover)通知。

*NFlags*参数可以是下表中列出的修改键的组合。 有关详细信息，请参阅[关于鼠标输入](/windows/win32/inputdev/about-mouse-input)。

|修改键|说明|
|------------------|-----------------|
|MK_CONTROL|按下了 CTRL 键。|
|MK_LBUTTON|鼠标左键已按下。|
|MK_MBUTTON|鼠标中键已按下。|
|MK_RBUTTON|鼠标右键已按下。|
|MK_SHIFT|按下 SHIFT 键。|
|MK_XBUTTON1|按下了 Microsoft 智能鼠标的 XBUTTON1 鼠标按钮。|
|MK_XBUTTON2|按下了 Microsoft 智能鼠标的 XBUTTON2 鼠标按钮。|

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onmousehwheel"></a>CWnd：： OnMouseHWheel

当当前窗口由桌面窗口管理器（DWM）组合并且该窗口处于最大化状态时，框架会调用此成员。

```
afx_msg void OnMouseHWheel(
    UINT nFlags,
    short zDelta,
    CPoint pt);
```

### <a name="parameters"></a>parameters

|参数|说明|
|---------------|-----------------|
|*nFlags*|中标志的按位组合（OR），指示按下的修改键。 例如，MK_CONTROL 标志指示按下了 CTRL 键。<br /><br /> 有关标志的列表，请参阅[关于鼠标输入](/windows/win32/inputdev/about-mouse-input)中的 "消息参数" 小标题。|
|*zDelta*|中指示滚轮旋转的距离，以 WHEEL_DELTA 的倍数表示，为120。 正值表示滚轮向右旋转;负值表示滚轮旋转到左侧。|
|*pt*|中一个[CPoint](../../atl-mfc-shared/reference/cpoint-class.md)对象，该对象指定光标相对于工作区左上角的*x*和*y*坐标。|

### <a name="remarks"></a>备注

此方法接收 Windows SDK 中描述的[WM_MOUSEHWHEEL](/windows/win32/inputdev/wm-mousehwheel)通知消息。 当鼠标的水平滚轮倾斜或旋转时，此消息将发送到具有焦点的窗口。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onmouseleave"></a>CWnd：： OnMouseLeave

当光标离开在先前对[TrackMouseEvent](/windows/win32/api/winuser/nf-winuser-trackmouseevent)的调用中指定的窗口工作区时，框架将调用此成员函数。

```
afx_msg void OnMouseLeave();
```

### <a name="remarks"></a>备注

此方法接收 Windows SDK 中描述的[WM_MOUSELEAVE](/windows/win32/inputdev/wm-mouseleave)通知。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onmousemove"></a>CWnd：： OnMouseMove

当鼠标光标移动时，框架会调用此成员函数。

```
afx_msg void OnMouseMove(
    UINT nFlags,
    CPoint point);
```

### <a name="parameters"></a>parameters

*nFlags*<br/>
指示各种虚拟键是否已关闭。 此参数可以是下列值的任意组合：

- 如果按下 CTRL 键，则 MK_CONTROL 设置。

- 如果鼠标左键已关闭，则 MK_LBUTTON 设置。

- 如果鼠标中键为关闭状态，则 MK_MBUTTON 设置。

- 如果鼠标右键处于关闭状态，则 MK_RBUTTON 设置。

- 如果 SHIFT 键为 down，则 MK_SHIFT 设置。

*情况*<br/>
指定光标的 x 坐标和 y 坐标。 这些坐标始终相对于窗口的左上角。

### <a name="remarks"></a>备注

如果未捕获鼠标，则鼠标光标下的 `CWnd` 对象将接收 WM_MOUSEMOVE 消息;否则，消息将进入已捕获鼠标的窗口。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onmousewheel"></a>CWnd：： OnMouseWheel

框架将调用此成员函数，因为用户会旋转鼠标滚轮并遇到滚轮的下一个凹槽。

```
afx_msg BOOL OnMouseWheel(
    UINT nFlags,
    short zDelta,
    CPoint pt);
```

### <a name="parameters"></a>parameters

*nFlags*<br/>
指示各种虚拟键是否已关闭。 此参数可以是下列值的任意组合：

- 如果按下 CTRL 键，则 MK_CONTROL 设置。

- 如果鼠标左键已关闭，则 MK_LBUTTON 设置。

- 如果鼠标中键为关闭状态，则 MK_MBUTTON 设置。

- 如果鼠标右键处于关闭状态，则 MK_RBUTTON 设置。

- 如果 SHIFT 键为 down，则 MK_SHIFT 设置。

*zDelta*<br/>
指示旋转距离。 *ZDelta*值以多个 WHEEL_DELTA （即120）表示。 如果值小于零，则表示向后旋转（朝向用户），而大于零的值表示向前旋转（远离用户）。 用户可以通过在鼠标软件中更改滚轮设置来撤消此响应。 有关此参数的详细信息，请参阅 "备注"。

*pt*<br/>
指定光标的 x 坐标和 y 坐标。 这些坐标始终是相对于屏幕左上角的坐标。

### <a name="return-value"></a>返回值

如果启用鼠标滚轮滚动，则为非零值;否则为0。

### <a name="remarks"></a>备注

除非重写，否则 `OnMouseWheel` 将调用[WM_MOUSEWHEEL](/windows/win32/inputdev/wm-mousewheel)的默认值。 Windows 自动将消息路由到具有焦点的控件或子窗口。 Win32 函数[DefWindowProc](/windows/win32/api/winuser/nf-winuser-defwindowprocw)将消息的父链向上传播到处理它的窗口。

*ZDelta*参数是 WHEEL_DELTA 的多个，其设置为120。 此值是要执行的操作的阈值，并且应为每个增量执行一种此类操作（例如，向前滚动一个刻度）。

WHEEL_DELTA 设置为120，以允许更精细的轮式轮，例如无凹槽的自由旋转滚轮。 更精细的轮轮按旋转发送更多的消息，但每条消息的增量值更小。 若要使用此类轮，请在达到 WHEEL_DELTA 之前添加传入的*zDelta*值（以便您获取给定增量轮换的相同响应），或滚动部分行以响应更频繁的消息。 还可以选择滚动粒度并累积增量，直到达到 WHEEL_DELTA。

重写此成员函数以提供您自己的鼠标滚轮滚动行为。

> [!NOTE]
> `OnMouseWheel` 处理 Windows NT 4.0 及更高版本的消息。 对于 Windows 95/98 或 Windows NT 3.51 消息处理，请使用[OnRegisteredMouseWheel](#onregisteredmousewheel)。

##  <a name="onmove"></a>CWnd：： OnMove

在移动 `CWnd` 对象后，框架将调用此成员函数。

```
afx_msg void OnMove(
    int x,
    int y);
```

### <a name="parameters"></a>parameters

*x*<br/>
指定工作区左上角的新 x 坐标位置。 此新位置在重叠和弹出窗口的屏幕坐标中给定，子窗口的父工作区坐标。

*y*<br/>
指定工作区左上角的新 y 坐标位置。 此新位置在重叠和弹出窗口的屏幕坐标中给定，子窗口的父工作区坐标。

### <a name="remarks"></a>备注

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onmoving"></a>CWnd：： OnMoving

当用户移动 `CWnd` 对象时，框架会调用此成员函数。

```
afx_msg void OnMoving(
    UINT nSide,
    LPRECT lpRect);
```

### <a name="parameters"></a>parameters

*nSide*<br/>
要移动的窗口的边缘。

*lpRect*<br/>
将包含项坐标的[CRect](../../atl-mfc-shared/reference/crect-class.md)或[RECT 结构](/windows/win32/api/windef/ns-windef-rect)的地址。

### <a name="remarks"></a>备注

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onncactivate"></a>CWnd：： OnNcActivate

当需要更改非工作区以指示活动或非活动状态时，框架会调用此成员函数。

```
afx_msg BOOL OnNcActivate(BOOL bActive);
```

### <a name="parameters"></a>parameters

*bActive*<br/>
指定何时需要更改标题栏或图标以指示活动或非活动状态。 如果要绘制活动标题或图标，则*bActive*参数为 TRUE。 对于非活动标题或图标，此值为 FALSE。

### <a name="return-value"></a>返回值

如果 Windows 应继续默认处理，则为非零值;0，阻止隐藏标题栏或图标。

### <a name="remarks"></a>备注

如果*bActive*为 FALSE，则默认*实现将按照*活动的颜色绘制标题栏和标题栏文本。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onnccalcsize"></a>CWnd：： OnNcCalcSize

需要计算客户端区域的大小和位置时，框架会调用此成员函数。

```
afx_msg void OnNcCalcSize(
    BOOL bCalcValidRects,
    NCCALCSIZE_PARAMS* lpncsp);
```

### <a name="parameters"></a>parameters

*bCalcValidRects*<br/>
指定应用程序是否应指定包含有效信息的工作区部分。 Windows 会将有效信息复制到新工作区中的指定区域。 如果此参数为 TRUE，则应用程序应指定工作区的哪个部分有效。

*lpncsp*<br/>
指向一个[NCCALCSIZE_PARAMS](/windows/win32/api/winuser/ns-winuser-nccalcsize_params)数据结构，该结构包含应用程序可用于计算 `CWnd` 矩形（包括客户端区域、边框、标题、滚动条等）的新大小和位置的信息。

### <a name="remarks"></a>备注

通过处理此消息，当窗口的大小或位置发生更改时，应用程序可以控制窗口的工作区的内容。

无论*bCalcValidRects*的值是什么，`NCCALCSIZE_PARAMS` 结构的 `rgrc` 结构成员指定的数组中的第一个矩形都包含窗口的坐标。 对于子窗口，坐标相对于父窗口的工作区。 对于顶级窗口，坐标为屏幕坐标。 应用程序应修改 `rgrc[0]` 矩形，以反映客户端区域的大小和位置。

仅当*bCalcValidRects*为 TRUE 时，`rgrc[1]` 和 `rgrc[2]` 矩形才有效。 在这种情况下，`rgrc[1]` 矩形包含窗口在移动或调整大小之前的坐标。 `rgrc[2]` 矩形包含窗口移动之前窗口的工作区坐标。 所有坐标都是相对于父窗口或屏幕的。

默认实现根据窗口特性（滚动条、菜单等）来计算客户端区域的大小，并将结果放置在*lpncsp*中。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onnccreate"></a>CWnd：： OnNcCreate

第一次创建 `CWnd` 对象时，框架会在[WM_CREATE](#oncreate)消息之前调用此成员函数。

```
afx_msg BOOL OnNcCreate(LPCREATESTRUCT lpCreateStruct);
```

### <a name="parameters"></a>parameters

*lpCreateStruct*<br/>
指向 `CWnd`的[CREATESTRUCT](/windows/win32/api/winuser/ns-winuser-createstructw)数据结构。

### <a name="return-value"></a>返回值

如果创建非工作区，则为非零值。 如果发生错误，则为 0;在这种情况下，`Create` 函数将返回**失败**。

### <a name="remarks"></a>备注

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onncdestroy"></a>CWnd：： OnNcDestroy

当非工作区被销毁时由框架调用，并且是在 Windows 窗口销毁时调用的最后一个成员函数。

```
afx_msg void OnNcDestroy();
```

### <a name="remarks"></a>备注

默认实现执行一些清理，然后调用虚拟成员函数[PostNcDestroy](#postncdestroy)。

如果要执行自己的清理操作（如**删除此**操作），请重写 `PostNcDestroy`。 如果重写 `OnNcDestroy`，则必须在基类中调用 `OnNcDestroy`，以确保释放为窗口内部分配的任何内存。

##  <a name="onnchittest"></a>CWnd：： OnNcHitTest

框架在每次移动鼠标时，为包含光标的 `CWnd` 对象（或使用[SetCapture](#setcapture)成员函数捕获鼠标输入的 `CWnd` 对象）调用此成员函数。

```
afx_msg LRESULT OnNcHitTest(CPoint point);
```

### <a name="parameters"></a>parameters

*情况*<br/>
包含光标的 x 坐标和 y 坐标。 这些坐标始终是屏幕坐标。

### <a name="return-value"></a>返回值

鼠标命中测试枚举值之一。 有关值的列表，请参阅[WM_NCHITTEST](/windows/win32/inputdev/wm-nchittest) 。

### <a name="remarks"></a>备注

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onnclbuttondblclk"></a>CWnd：： OnNcLButtonDblClk

当光标位于 `CWnd`的非工作区中时，框架会调用此成员函数。

```
afx_msg void OnNcLButtonDblClk(
    UINT nHitTest,
    CPoint point);
```

### <a name="parameters"></a>parameters

*nHitTest*<br/>
指定[命中测试代码](#onnchittest)。 命中测试是确定游标位置的测试。 有关值的列表，请参阅[WM_NCHITTEST](/windows/win32/inputdev/wm-nchittest) 。

*情况*<br/>
指定包含光标位置的 x 和 y 屏幕坐标的 `CPoint` 对象。 这些坐标始终是相对于屏幕左上角的坐标。

### <a name="remarks"></a>备注

如果需要，则发送[WM_SYSCOMMAND](#onsyscommand)消息。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onnclbuttondown"></a>CWnd：： OnNcLButtonDown

当光标位于 `CWnd` 对象的非工作区中时，框架会调用此成员函数。

```
afx_msg void OnNcLButtonDown(
    UINT nHitTest,
    CPoint point);
```

### <a name="parameters"></a>parameters

*nHitTest*<br/>
指定[命中测试代码](#onnchittest)。 命中测试是确定游标位置的测试。 有关值的列表，请参阅[WM_NCHITTEST](/windows/win32/inputdev/wm-nchittest) 。

*情况*<br/>
指定包含光标位置的 x 和 y 屏幕坐标的 `CPoint` 对象。 这些坐标始终是相对于屏幕左上角的坐标。

### <a name="remarks"></a>备注

如果需要，则发送[WM_SYSCOMMAND](#onsyscommand) 。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递给函数的参数反映了收到消息时框架接收的参数。如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给函数的参数。

##  <a name="onnclbuttonup"></a>CWnd：： OnNcLButtonUp

当光标位于非工作区时，框架会调用此成员函数。

```
afx_msg void OnNcLButtonUp(
    UINT nHitTest,
    CPoint point);
```

### <a name="parameters"></a>parameters

*nHitTest*<br/>
指定[命中测试代码](#onnchittest)。 命中测试是确定游标位置的测试。 有关值的列表，请参阅[WM_NCHITTEST](/windows/win32/inputdev/wm-nchittest) 。

*情况*<br/>
指定包含光标位置的 x 和 y 屏幕坐标的 `CPoint` 对象。 这些坐标始终是相对于屏幕左上角的坐标。

### <a name="remarks"></a>备注

如果适合，则发送[WM_SYSCOMMAND](#onsyscommand) 。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onncmbuttondblclk"></a>CWnd：： OnNcMButtonDblClk

当光标位于非工作区中时，框架会调用此成员函数。

```
afx_msg void OnNcMButtonDblClk(
    UINT nHitTest,
    CPoint point);
```

### <a name="parameters"></a>parameters

*nHitTest*<br/>
指定[命中测试代码](#onnchittest)。 命中测试是确定游标位置的测试。

*情况*<br/>
指定包含光标位置的 x 和 y 屏幕坐标的 `CPoint` 对象。 这些坐标始终是相对于屏幕左上角的坐标。

### <a name="remarks"></a>备注

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onncmbuttondown"></a>CWnd：： OnNcMButtonDown

当光标位于非工作区中时，框架会调用此成员函数。

```
afx_msg void OnNcMButtonDown(
    UINT nHitTest,
    CPoint point);
```

### <a name="parameters"></a>parameters

*nHitTest*<br/>
指定[命中测试代码](#onnchittest)。 命中测试是确定游标位置的测试。

*情况*<br/>
指定包含光标位置的 x 和 y 屏幕坐标的 `CPoint` 对象。 这些坐标始终是相对于屏幕左上角的坐标。

### <a name="remarks"></a>备注

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onncmbuttonup"></a>CWnd：： OnNcMButtonUp

当光标位于非工作区时，框架会调用此成员函数。

```
afx_msg void OnNcMButtonUp(
    UINT nHitTest,
    CPoint point);
```

### <a name="parameters"></a>parameters

*nHitTest*<br/>
指定[命中测试代码](#onnchittest)。 命中测试是确定游标位置的测试。

*情况*<br/>
指定包含光标位置的 x 和 y 屏幕坐标的 `CPoint` 对象。 这些坐标始终是相对于屏幕左上角的坐标。

### <a name="remarks"></a>备注

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onncmousehover"></a>CWnd：： OnNcMouseHover

当光标悬停在窗口的非工作区时，如果在之前调用[TrackMouseEvent](/windows/win32/api/winuser/nf-winuser-trackmouseevent)时指定的时间段，框架将调用此成员函数。

```
afx_msg void OnNcMouseHover(
    UINT nHitTest,
    CPoint point);
```

### <a name="parameters"></a>parameters

|参数|说明|
|---------------|-----------------|
|*nHitTest*|中由[CWnd：:D efwindowproc](#defwindowproc)函数返回的命中测试值作为处理[WM_NCHITTEST](/windows/win32/inputdev/wm-nchittest)消息的结果。|
|*情况*|中一个[CPoint](../../atl-mfc-shared/reference/cpoint-class.md)对象，该对象指定光标相对于屏幕左上角的*x*和*y*坐标。|

### <a name="remarks"></a>备注

此方法接收 Windows SDK 中描述的[WM_NCMOUSEHOVER](/windows/win32/inputdev/wm-ncmousehover)通知。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onncmouseleave"></a>CWnd：： OnNcMouseLeave

当光标离开在先前对[TrackMouseEvent](/windows/win32/api/winuser/nf-winuser-trackmouseevent)的调用中指定的窗口非工作区时，框架将调用此成员函数。

```
afx_msg void OnNcMouseLeave();
```

### <a name="remarks"></a>备注

此方法接收 Windows SDK 中描述的[WM_NCMOUSELEAVE](/windows/win32/inputdev/wm-ncmouseleave)通知。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onncmousemove"></a>CWnd：： OnNcMouseMove

当游标在非工作区中移动时，框架会调用此成员函数。

```
afx_msg void OnNcMouseMove(
    UINT nHitTest,
    CPoint point);
```

### <a name="parameters"></a>parameters

*nHitTest*<br/>
指定[命中测试代码](#onnchittest)。 命中测试是确定游标位置的测试。

*情况*<br/>
指定包含光标位置的 x 和 y 屏幕坐标的 `CPoint` 对象。 这些坐标始终是相对于屏幕左上角的坐标。

### <a name="remarks"></a>备注

如果需要，则发送[WM_SYSCOMMAND](#onsyscommand)消息。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onncpaint"></a>CWnd：： OnNcPaint

当需要绘制非工作区时，框架会调用此成员函数。

```
afx_msg void OnNcPaint();
```

### <a name="remarks"></a>备注

默认实现将绘制窗口框架。

应用程序可以重写此调用并绘制其自己的自定义窗口框架。 即使更改了框架的形状，剪辑区域也始终是矩形。

##  <a name="onncrbuttondblclk"></a>CWnd：： OnNcRButtonDblClk

当光标位于 `CWnd`的非工作区中时，框架会调用此成员函数。

```
afx_msg void OnNcRButtonDblClk(
    UINT nHitTest,
    CPoint point);
```

### <a name="parameters"></a>parameters

*nHitTest*<br/>
指定[命中测试代码](#onnchittest)。 命中测试是确定游标位置的测试。

*情况*<br/>
指定包含光标位置的 x 和 y 屏幕坐标的 `CPoint` 对象。 这些坐标始终是相对于屏幕左上角的坐标。

### <a name="remarks"></a>备注

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onncrbuttondown"></a>CWnd：： OnNcRButtonDown

当光标位于非工作区中时，框架会调用此成员函数。

```
afx_msg void OnNcRButtonDown(
    UINT nHitTest,
    CPoint point);
```

### <a name="parameters"></a>parameters

*nHitTest*<br/>
指定[命中测试代码](#onnchittest)。 命中测试是确定游标位置的测试。

*情况*<br/>
指定包含光标位置的 x 和 y 屏幕坐标的 `CPoint` 对象。 这些坐标始终是相对于屏幕左上角的坐标。

### <a name="remarks"></a>备注

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onncrbuttonup"></a>CWnd：： OnNcRButtonUp

当光标位于非工作区中并且用户释放鼠标右键时，框架将调用此成员函数。

```
afx_msg void OnNcRButtonUp(
    UINT nHitTest,
    CPoint point);
```

### <a name="parameters"></a>parameters

*nHitTest*<br/>
指定[命中测试代码](#onnchittest)。 命中测试是确定游标位置的测试。

*情况*<br/>
指定包含光标位置的 x 和 y 屏幕坐标的 `CPoint` 对象。 这些坐标始终是相对于屏幕左上角的坐标。

### <a name="remarks"></a>备注

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onncrenderingchanged"></a>CWnd：： OnNcRenderingChanged

当非工作区的呈现策略发生更改时，框架会调用此成员。

```
afx_msg void OnNcRenderingChanged(BOOL bIsRendering);
```

### <a name="parameters"></a>parameters

|参数|说明|
|---------------|-----------------|
|*bIsRendering*|中如果为窗口的非工作区启用桌面窗口管理器（DWM）呈现，则为 TRUE;如果禁用呈现，则为 FALSE。|

### <a name="remarks"></a>备注

此方法接收 Windows SDK 中描述的[WM_DWMNCRENDERINGCHANGED](/windows/win32/dwm/wm-dwmncrenderingchanged)通知。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onncxbuttondblclk"></a>CWnd：： OnNcXButtonDblClk

当光标位于窗口非工作区中并且用户双击 XBUTTON1 或 XBUTTON2 时，框架将调用此成员函数。

```
void OnNcXButtonDblClk(
    short nHitTest,
    UINT nButton,
    CPoint point);
```

### <a name="parameters"></a>parameters

|参数|说明|
|---------------|-----------------|
|*nHitTest*|中由[CWnd：:D efwindowproc](#defwindowproc)函数返回的命中测试值作为处理[WM_NCHITTEST](/windows/win32/inputdev/wm-nchittest)消息的结果。|
|*nButton*|中如果双击第一个 Microsoft 智能鼠标 X 按钮，则该值为 XBUTTON1; 如果双击第二个 X 按钮，则为 XBUTTON2。|
|*情况*|中一个[CPoint](../../atl-mfc-shared/reference/cpoint-class.md)对象，该对象指定光标相对于工作区左上角的*x*和*y*坐标。|

### <a name="remarks"></a>备注

此方法接收 Windows SDK 中描述的[WM_XBUTTONDBLCLK](/windows/win32/inputdev/wm-xbuttondblclk)通知。 此消息将发送到包含光标的窗口。 如果某个窗口已捕获鼠标，则不会发布此消息。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onncxbuttondown"></a>CWnd：： OnNcXButtonDown

当光标位于窗口非工作区中并且用户按下鼠标 XBUTTON1 或 XBUTTON2 时，框架将调用此成员函数。

```
afx_msg void OnNcXButtonDown(
    short nHitTest,
    UINT nButton,
    CPoint point);
```

### <a name="parameters"></a>parameters

|参数|说明|
|---------------|-----------------|
|*nHitTest*|中由[CWnd：:D efwindowproc](#defwindowproc)函数返回的命中测试值作为处理[WM_NCHITTEST](/windows/win32/inputdev/wm-nchittest)消息的结果。|
|*nButton*|中如果按下鼠标 X 按钮，则值为 XBUTTON1; 如果按下第二个 X 按钮，则为 XBUTTON2。|
|*情况*|中一个[CPoint](../../atl-mfc-shared/reference/cpoint-class.md)对象，该对象指定光标相对于屏幕左上角的*x*和*y*坐标。|

### <a name="remarks"></a>备注

此方法接收 Windows SDK 中描述的[WM_NCXBUTTONDOWN](/windows/win32/inputdev/wm-ncxbuttondown)通知。 此消息将发送到包含光标的窗口。 如果某个窗口已捕获鼠标，则不会发布此消息。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onncxbuttonup"></a>CWnd：： OnNcXButtonUp

当光标位于窗口非工作区中并且用户释放鼠标的 XBUTTON1 或 XBUTTON2 时，框架将调用此成员函数。

```
afx_msg void OnNcXButtonUp(
    short nHitTest,
    UINT nButton,
    CPoint point);
```

### <a name="parameters"></a>parameters

|参数|说明|
|---------------|-----------------|
|*nHitTest*|中由[CWnd：:D efwindowproc](#defwindowproc)函数返回的命中测试值作为处理[WM_NCHITTEST](/windows/win32/inputdev/wm-nchittest)消息的结果。|
|*nButton*|中如果释放第一个鼠标 X 按钮，则该值为 XBUTTON1; 如果第二个 X 按钮释放，则为 XBUTTON2。|
|*情况*|中一个[CPoint](../../atl-mfc-shared/reference/cpoint-class.md)对象，该对象指定光标相对于屏幕左上角的*x*和*y*坐标。|

### <a name="remarks"></a>备注

此方法接收 Windows SDK 中描述的[WM_NCXBUTTONUP](/windows/win32/inputdev/wm-ncxbuttonup)通知。 此消息将发送到包含光标的窗口。 如果某个窗口已捕获鼠标，则不会发布此消息。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onnextmenu"></a>CWnd：： OnNextMenu

当使用向右或向左箭头键在菜单栏和系统菜单之间切换时，框架将调用此成员函数。

```
afx_msg void OnNextMenu(
    UINT nKey,
    LPMDINEXTMENU lpMdiNextMenu);
```

### <a name="parameters"></a>parameters

|参数|说明|
|---------------|-----------------|
|*nKey*|中标志的按位组合（OR），指示按下的修改键。 例如，MK_CONTROL 标志指示按下了 CTRL 键。<br /><br /> 有关标志的列表，请参阅[关于鼠标输入](/windows/win32/inputdev/about-mouse-input)中的 "消息参数" 小标题。|
|*lpMdiNextMenu*|中指向[MDINEXTMENU](/windows/win32/api/winuser/ns-winuser-mdinextmenu)结构的指针，该结构包含要激活的菜单的相关信息。|

### <a name="remarks"></a>备注

此方法接收 Windows SDK 中描述的[WM_UNINITMENUPOPUP](/windows/win32/menurc/wm-uninitmenupopup)通知。 为了响应此消息，您的应用程序可以将[MDINEXTMENU](/windows/win32/api/winuser/ns-winuser-mdinextmenu)结构的 `hmenuNext` 成员设置为指定要切换到的菜单，并将 `hwndNext` 成员设置为指定接收菜单通知消息的窗口。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onnotify"></a>CWnd：： OnNotify

框架调用此成员函数来通知控件的父窗口事件已发生在控件中，或者控件需要某种类型的信息。

```
virtual BOOL OnNotify(
    WPARAM wParam,
    LPARAM lParam,
    LRESULT* pResult);
```

### <a name="parameters"></a>parameters

*wParam*<br/>
标识当消息来自控件时发送消息的控件。 否则， *wParam*为0。

*lParam*<br/>
指向通知消息（`NMHDR`）结构的指针，该结构包含通知代码和其他信息。 对于某些通知消息，此参数指向更大的结构，该结构将 `NMHDR` 结构作为其第一个成员。

*pResult*<br/>
一个指针，指向在处理消息时要在其中存储结果代码的 LRESULT 变量。

### <a name="return-value"></a>返回值

如果应用程序处理此消息，则它将返回非零值;否则为0。

### <a name="remarks"></a>备注

`OnNotify` 处理用于控制通知的消息映射。

在派生类中重写此成员函数可处理 WM_NOTIFY 消息。 除非调用了基类 `OnNotify`，否则重写不会处理消息映射。

有关 WM_NOTIFY 消息的详细信息，请参阅技术说明61（TN061）、 [ON_NOTIFY 和 WM_NOTIFY 消息](../../mfc/tn061-on-notify-and-wm-notify-messages.md)。 你可能还会对[控件主题](../../mfc/controls-mfc.md)和 TN062 （ [Windows 控件的消息反射](../../mfc/tn062-message-reflection-for-windows-controls.md)）中所述的相关主题感兴趣。

##  <a name="onnotifyformat"></a>CWnd：： OnNotifyFormat

框架调用此成员函数来确定当前窗口是否接受 WM_NOTIFY 通知消息中的 ANSI 或 Unicode 结构。

```
afx_msg UINT OnNotifyFormat(
    CWnd* pWnd,
    UINT nCommand);
```

### <a name="parameters"></a>parameters

|参数|说明|
|---------------|-----------------|
|*pWnd*|中指向表示发送[WM_NOTIFY](/windows/win32/controls/wm-notify)消息的窗口的 `CWnd` 对象的指针。<br /><br /> 如果*n 命令*参数 NF_QUERY，则此参数是指向控件的指针; 如果*n 命令*NF_REQUERY，则为指向控件的父窗口的指针。|
|*N 命令*|中专用化 WM_NOTIFY 消息的命令值。 可能的值包括：<br /><br /> -NF_QUERY-<br />     消息是一个查询，用于确定是否应在 WM_NOTIFY 消息中使用 ANSI 或 Unicode 结构。 此消息将在创建控件期间从控件发送到其父窗口，并响应此消息的 NF_REQUERY 形式。<br />-NF_REQUERY-<br />     消息是对控件的请求，该请求将此消息的 NF_QUERY 形式发送到其父窗口。 将从父窗口发送此请求，并要求控件在 WM_NOTIFY 消息中查询要使用的结构类型的父级。 如果 NF_REQUERY *n 命令*参数，则返回值为 REQUERY 操作的结果。|

### <a name="return-value"></a>返回值

|返回值|含义|
|------------------|-------------|
|NFR_ANSI|ANSI 结构应在由控件发送 WM_NOTIFY 消息中使用。|
|NFR_UNICODE|Unicode 结构应在由控件发送 WM_NOTIFY 消息中使用。|
|0|出现了错误。|

### <a name="remarks"></a>备注

此方法接收 Windows SDK 中描述的[WM_NOTIFYFORMAT](/windows/win32/Controls/wm-notifyformat)通知。 WM_NOTIFY 消息将从公共控件发送到其父窗口，并从父窗口发送到公共控件。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onpaint"></a>CWnd：： OnPaint

当 Windows 或应用程序发出请求来重绘部分应用程序窗口时，框架会调用此成员函数。

```
afx_msg void OnPaint();
```

### <a name="remarks"></a>备注

调用[UpdateWindow](#updatewindow)或[RedrawWindow](#redrawwindow)成员函数时，将发送[WM_PAINT](/windows/win32/gdi/the-wm-paint-message)消息。

当使用 RDW_INTERNALPAINT 标志集调用 `RedrawWindow` 成员函数时，窗口可能会收到内部绘制消息。 在这种情况下，该窗口可能没有更新区域。 应用程序应调用[GetUpdateRect](#getupdaterect)成员函数来确定窗口是否有更新区域。 如果 `GetUpdateRect` 返回0，则应用程序不应调用[BeginPaint](#beginpaint)和[EndPaint](#endpaint)成员函数。

应用程序通过查看每个 WM_PAINT 消息的内部数据结构来检查是否有必要的内部重画或更新，因为 WM_PAINT 消息可能是由无效区域和对 `RedrawWindow` 成员函数的调用（设置了 RDW_INTERNALPAINT 标志）引起的。

内部 WM_PAINT 消息仅由 Windows 发送一次。 当 `UpdateWindow` 成员函数向窗口发送内部 WM_PAINT 消息后，将不再发送或发布任何 WM_PAINT 消息，直到该窗口失效或在使用 RDW_INTERNALPAINT 标志设置再次调用 `RedrawWindow` 成员函数之前。

有关在文档/视图应用程序中呈现图像的信息，请参阅[CView：： OnDraw](../../mfc/reference/cview-class.md#ondraw)。

有关使用 `WM_Paint`的详细信息，请参阅 Windows SDK 中的以下主题：

- [WM_PAINT 消息](/windows/win32/gdi/the-wm-paint-message)

- [使用 WM_PAINT 消息](/windows/win32/gdi/using-the-wm-paint-message)

##  <a name="onpaintclipboard"></a>CWnd：： OnPaintClipboard

当剪贴板所有者已将数据以 CF_OWNERDISPLAY 格式放置在剪贴板上，而剪贴板查看器的工作区需要重新绘制时，剪贴板查看器将调用剪贴板所有者的 `OnPaintClipboard` 成员函数。

```
afx_msg void OnPaintClipboard(
    CWnd* pClipAppWnd,
    HGLOBAL hPaintStruct);
```

### <a name="parameters"></a>parameters

*pClipAppWnd*<br/>
指定指向剪贴板应用程序窗口的指针。 该指针可能是暂时的，不应存储起来供将来使用。

*hPaintStruct*<br/>
标识一个 [PAINTSTRUCT](/windows/win32/api/winuser/ns-winuser-paintstruct) 数据结构，该数据结构可定义要绘制的工作区部分。

### <a name="remarks"></a>备注

若要确定整个客户端区域或部分 it 是否需要重新绘制，剪贴板所有者必须将 `PAINTSTRUCT` 结构的 `rcpaint` 成员中提供的绘图区域的尺寸与最近[OnSizeClipboard](#onsizeclipboard)成员函数调用中给定的维度进行比较。

`OnPaintClipboard` 应使用[GlobalLock](/windows/win32/api/winbase/nf-winbase-globallock) windows 函数来锁定包含 `PAINTSTRUCT` 数据结构的内存，并使用[GlobalUnlock](/windows/win32/api/winbase/nf-winbase-globalunlock) Windows 函数在该内存退出之前对其解锁。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onpalettechanged"></a>CWnd：： OnPaletteChanged

当具有输入焦点的窗口已实现其逻辑调色板，从而更改系统调色板后，框架将为所有顶级窗口调用此成员函数。

```
afx_msg void OnPaletteChanged(CWnd* pFocusWnd);
```

### <a name="parameters"></a>parameters

*pFocusWnd*<br/>
指定一个指向窗口的指针，该窗口导致系统调色板发生更改。 指针可能是暂时的，不应存储。

### <a name="remarks"></a>备注

此调用允许没有输入焦点的窗口使用调色板来实现其逻辑调色板，并更新其工作区。

为所有顶级和重叠窗口调用 `OnPaletteChanged` 成员函数，包括更改系统调色板并导致发送 WM_PALETTECHANGED 消息的所有顶级窗口。 如果任何子窗口使用调色板，则必须将此消息传递给它。

若要避免无限循环，则窗口不应实现其调色板，除非它确定*pFocusWnd*不包含指向自身的指针。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onpaletteischanging"></a>CWnd：： OnPaletteIsChanging

框架调用此成员函数来通知应用程序应用程序要实现其逻辑调色板。

```
afx_msg void OnPaletteIsChanging(CWnd* pRealizeWnd);
```

### <a name="parameters"></a>parameters

*pRealizeWnd*<br/>
指定要实现其逻辑调色板的窗口。

### <a name="remarks"></a>备注

框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onparentnotify"></a>CWnd：： OnParentNotify

当父窗口被创建或销毁时，或当用户在光标位于子窗口上并且用户单击鼠标按钮时，由框架调用父级的 `OnParentNotify` 成员函数。

```
afx_msg void OnParentNotify(
    UINT message,
    LPARAM lParam);
```

### <a name="parameters"></a>parameters

message<br/>
指定为其通知父窗口的事件和子窗口的标识符。 事件是*消息*的低序位字。 如果事件 WM_CREATE 或 WM_DESTROY，则*消息*的高顺序字为子窗口的标识符;否则，高位字是不确定的。 事件（*消息*的低序位字）可以是以下值之一：

- WM_CREATE 正在创建子窗口。

- WM_DESTROY 正在销毁子窗口。

- WM_LBUTTONDOWN 用户将鼠标光标置于子窗口上并单击了鼠标左键。

- WM_MBUTTONDOWN 用户将鼠标光标置于子窗口上并单击了鼠标中键。

- WM_RBUTTONDOWN 用户将鼠标光标置于子窗口上，并单击鼠标右键。

*lParam*<br/>
如果*消息*的事件（低序位字） WM_CREATE 或 WM_DESTROY，则*lParam*指定子窗口的窗口句柄;否则， *lParam*将包含光标的 x 坐标和 y 坐标。 X 坐标采用低序位字，y 坐标位于高序位字中。

### <a name="remarks"></a>备注

创建子窗口后，系统就会在创建该窗口的[Create](#create)成员函数返回之前 `OnParentNotify`。 销毁子窗口后，系统会在进行任何处理之前调用 `OnParentNotify`，以销毁窗口。

为子窗口的所有上级窗口（包括顶级窗口）调用 `OnParentNotify`。

除具有[WS_EX_NOPARENTNOTIFY](../../mfc/reference/styles-used-by-mfc.md#extended-window-styles)样式的子窗口外，所有子窗口都将此消息发送到其父窗口。 默认情况下，对话框中的子窗口具有 WS_EX_NOPARENTNOTIFY 样式，除非通过调用[CreateEx](#createex)成员函数创建了没有此样式的子窗口。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onpowerbroadcast"></a>CWnd：： Onpowerbroadcast 签名

当发生电源管理事件时，框架会调用此成员函数。

```
afx_msg UINT OnPowerBroadcast(
    UINT nPowerEvent,
    UINT nEventData);
```

### <a name="parameters"></a>parameters

|参数|说明|
|---------------|-----------------|
|*nPowerEvent*|中电源管理事件。|
|*nEventData*|中特定于事件的数据。|

### <a name="return-value"></a>返回值

如果事件是请求，则返回 TRUE 以授予请求，或返回 BROADCAST_QUERY_DENY 以拒绝请求。

### <a name="remarks"></a>备注

此方法接收 Windows SDK 中描述的[WM_POWERBROADCAST](/windows/win32/Power/wm-powerbroadcast)消息。

*NPowerEvent*参数指定了事件，例如电池电量不足、电源状态已更改、请求或拒绝挂起操作的权限、在发生事件后自动恢复操作、系统挂起操作或在挂起后恢复操作。 通常不使用*nEventData*参数。 有关详细信息，请参阅[WM_POWERBROADCAST](/windows/win32/Power/wm-powerbroadcast)消息的*wParam*和*lParam*参数。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onquerydragicon"></a>CWnd：： OnQueryDragIcon

框架通过不具有为其类定义的图标的最小化（图标）窗口来调用此成员函数。

```
afx_msg HCURSOR OnQueryDragIcon();
```

### <a name="return-value"></a>返回值

一个双字值，其中包含低序位字中的光标或图标句柄。 光标或图标必须与显示器驱动程序的分辨率兼容。 如果应用程序返回 NULL，系统会显示默认游标。 默认的返回值为 NULL。

### <a name="remarks"></a>备注

当用户拖动最小化窗口时，系统进行此调用以获取要显示的光标。 如果应用程序返回图标或光标的句柄，系统会将其转换为黑色和白色。 如果应用程序返回一个句柄，则该句柄必须标识与显示器驱动程序的分辨率兼容的单色光标或图标。 应用程序可以调用[CWinApp：： LoadCursor](../../mfc/reference/cwinapp-class.md#loadcursor)或[CWinApp：： LoadIcon](../../mfc/reference/cwinapp-class.md#loadicon)成员函数从其可执行文件中的资源加载游标或图标，并获取此句柄。

##  <a name="onqueryendsession"></a>CWnd：： OnQueryEndSession

当用户选择结束 Windows 会话或应用程序调用[ExitWindows](/windows/win32/api/winuser/nf-winuser-exitwindows) windows 函数时，框架将调用此成员函数。

```
afx_msg BOOL OnQueryEndSession();
```

### <a name="return-value"></a>返回值

如果可以轻松关闭应用程序，则为非零值;否则为0。

### <a name="remarks"></a>备注

如果任何应用程序返回0，则不会结束 Windows 会话。 如果一个应用程序返回0，Windows 将停止调用 `OnQueryEndSession`，并为任何已返回非零值的应用程序发送参数值为 FALSE 的[WM_ENDSESSION](#onendsession)消息。

##  <a name="onquerynewpalette"></a>CWnd：： OnQueryNewPalette

当 `CWnd` 对象即将接收输入焦点时，框架会调用此成员函数，使 `CWnd` 在收到焦点时获得其逻辑调色板的机会。

```
afx_msg BOOL OnQueryNewPalette();
```

### <a name="return-value"></a>返回值

如果 `CWnd` 认识到其逻辑调色板，则为非零;否则为0。

##  <a name="onqueryopen"></a>CWnd：： OnQueryOpen

当最大程度地减小 `CWnd` 对象并且用户请求 `CWnd` 还原到 preminimized 大小和位置时，框架会调用此成员函数。

```
afx_msg BOOL OnQueryOpen();
```

### <a name="return-value"></a>返回值

如果可打开图标，则为非零值; 如果为0，则阻止打开图标。

### <a name="remarks"></a>备注

在 `OnQueryOpen`中，`CWnd` 不应执行会导致激活或焦点更改的任何操作（例如，创建一个对话框）。

##  <a name="onqueryuistate"></a>CWnd：： OnQueryUIState

调用以检索窗口的用户界面 (UI) 状态。

```
afx_msg UINT OnQueryUIState();
```

### <a name="return-value"></a>返回值

如果焦点指示器和键盘快捷键可见，则返回值为 NULL。 否则，返回值可以是以下一个或多个值：

- 隐藏 UISF_HIDEFOCUS 焦点指示器。

- UISF_HIDEACCEL 的键盘快捷键处于隐藏状态。

- UISF_ACTIVE Windows XP：应以用于活动控件的样式绘制控件。

### <a name="remarks"></a>备注

此成员函数模拟[WM_QUERYUISTATE](/windows/win32/menurc/wm-queryuistate)消息的功能，如 Windows SDK 中所述。

##  <a name="onrawinput"></a>CWnd：： OnRawInput

当前窗口获取原始输入时，框架会调用此成员函数。

```
afx_msg void OnRawInput(
    UINT nInputCode,
    HRAWINPUT hRawInput);
```

### <a name="parameters"></a>parameters

|参数|说明|
|---------------|-----------------|
|*nInputCode*|中指示在应用程序处于前台时是否发生了输入的输入代码。 在这两种情况下，应用程序必须调用[CWnd：:D efwindowproc](#defwindowproc) ，以便系统可以执行清理操作。<br /><br /> 此参数可以是下列值之一：<br /><br /> -RIM_INPUT 在应用程序处于前台时输入。<br />-RIM_INPUTSINK-在应用程序不在前台时输入。|
|*hRawInput*|中包含来自设备的原始输入的[RAWINPUT](/windows/win32/api/winuser/ns-winuser-rawinput)结构的句柄。|

### <a name="remarks"></a>备注

此方法接收 Windows SDK 中描述的[WM_INPUT](/windows/win32/inputdev/wm-appcommand)通知。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onrbuttondblclk"></a>CWnd：： OnRButtonDblClk

当用户双击鼠标右键时，框架会调用此成员函数。

```
afx_msg void OnRButtonDblClk(
    UINT nFlags,
    CPoint point);
```

### <a name="parameters"></a>parameters

*nFlags*<br/>
指示各种虚拟键是否已关闭。 此参数可以是下列值的任意组合：

- 如果按下 CTRL 键，则 MK_CONTROL 设置。

- 如果鼠标左键处于关闭状态，则 MK_LBUTTON 设置。

- 如果按下鼠标按钮，则 MK_MBUTTON 设置。

- 如果鼠标右键处于关闭状态，则 MK_RBUTTON 设置。

- 如果 SHIFT 键已关闭，则 MK_SHIFT 设置。

*情况*<br/>
指定光标的 x 和 y 坐标。 这些坐标始终相对于窗口的左上角。

### <a name="remarks"></a>备注

只有具有 CS_DBLCLKS [WNDCLASS](/windows/win32/api/winuser/ns-winuser-wndclassw)样式的窗口才能接收 `OnRButtonDblClk` 调用。 这是 Microsoft 基础类库中窗口的默认值。 当用户按下并释放，然后在系统的双击时间限制内再次按鼠标右键时，Windows 将调用 `OnRButtonDblClk`。 双击鼠标右键后，实际会生成四个事件： [WM_RBUTTONDOWN](#onrbuttondown)和[WM_RBUTTONUP](#onrbuttonup)消息、`OnRButtonDblClk` 调用，以及在按钮释放时另一 WM_RBUTTONUP 消息。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onrbuttondown"></a>CWnd：： OnRButtonDown

当用户按下鼠标右键时，框架将调用此成员函数。

```
afx_msg void OnRButtonDown(
    UINT nFlags,
    CPoint point);
```

### <a name="parameters"></a>parameters

*nFlags*<br/>
指示各种虚拟键是否已关闭。 此参数可以是下列值的任意组合：

- 如果按下 CTRL 键，则 MK_CONTROL 设置。

- 如果鼠标左键处于关闭状态，则 MK_LBUTTON 设置。

- 如果按下鼠标按钮，则 MK_MBUTTON 设置。

- 如果鼠标右键处于关闭状态，则 MK_RBUTTON 设置。

- 如果 SHIFT 键已关闭，则 MK_SHIFT 设置。

*情况*<br/>
指定光标的 x 和 y 坐标。 这些坐标始终相对于窗口的左上角。

### <a name="remarks"></a>备注

框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onrbuttonup"></a>CWnd：： OnRButtonUp

当用户释放鼠标右键时，框架会调用此成员函数。

```
afx_msg void OnRButtonUp(
    UINT nFlags,
    CPoint point);
```

### <a name="parameters"></a>parameters

*nFlags*<br/>
指示各种虚拟键是否已关闭。 此参数可以是下列值的任意组合：

- 如果按下 CTRL 键，则 MK_CONTROL 设置。

- 如果鼠标左键处于关闭状态，则 MK_LBUTTON 设置。

- 如果按下鼠标按钮，则 MK_MBUTTON 设置。

- 如果 SHIFT 键已关闭，则 MK_SHIFT 设置。

*情况*<br/>
指定光标的 x 和 y 坐标。 这些坐标始终相对于窗口的左上角。

### <a name="remarks"></a>备注

框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onregisteredmousewheel"></a>CWnd：： OnRegisteredMouseWheel

框架将调用此成员函数，因为用户会旋转鼠标滚轮并遇到滚轮的下一个凹槽。

```
afx_msg LRESULT OnRegisteredMouseWheel(
    WPARAM wParam,
    LPARAM lParam);
```

### <a name="parameters"></a>parameters

*wParam*<br/>
指针的水平位置。

*lParam*<br/>
指针的垂直位置。

### <a name="return-value"></a>返回值

目前没有意义。 总是为零。

### <a name="remarks"></a>备注

除非重写，否则 `OnRegisteredMouseWheel` 会将消息路由到适当的窗口（具有焦点的父窗口），并调用该窗口的[WM_MOUSEWHEEL](/windows/win32/inputdev/wm-mousewheel)处理程序。

重写此成员函数以提供您自己的消息路由或更改鼠标滚轮的滚动行为。

> [!NOTE]
> `OnRegisteredMouseWheel` 处理 Windows 95/98 和 Windows NT 3.51 的消息。 对于 Windows NT 4.0 消息处理，请使用[OnMouseWheel](#onmousewheel)。

##  <a name="onrenderallformats"></a>CWnd：： OnRenderAllFormats

当销毁所有者应用程序时，框架将调用剪贴板所有者的 `OnRenderAllFormats` 成员函数。

```
afx_msg void OnRenderAllFormats();
```

### <a name="remarks"></a>备注

剪贴板所有者应以它能够生成的所有格式呈现数据，并通过调用[SetClipboardData](/windows/win32/api/winuser/nf-winuser-setclipboarddata) Windows 函数将每种格式的数据句柄传递到剪贴板。 这可以确保剪贴板包含有效数据，即使呈现数据的应用程序被销毁。 在调用[SetClipboardData](/windows/win32/api/winuser/nf-winuser-setclipboarddata) Windows 函数之前，应用程序应调用[OpenClipboard](#openclipboard)成员函数并随后调用[CloseClipboard](/windows/win32/api/winuser/nf-winuser-closeclipboard) windows 函数。

##  <a name="onrenderformat"></a>CWnd：： OnRenderFormat

当需要呈现具有延迟呈现的特定格式时，框架将调用剪贴板所有者的 `OnRenderFormat` 成员函数。

```
afx_msg void OnRenderFormat(UINT nFormat);
```

### <a name="parameters"></a>parameters

*nFormat*<br/>
指定剪贴板格式。

### <a name="remarks"></a>备注

接收方应呈现该格式的数据，并通过调用[SetClipboardData](/windows/win32/api/winuser/nf-winuser-setclipboarddata) Windows 函数将其传递到剪贴板。

不要从 `OnRenderFormat`内调用 `OpenClipboard` 成员函数或 `CloseClipboard` Windows 函数。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onsessionchange"></a>CWnd：： OnSessionChange

框架调用此成员函数来通知应用程序会话状态发生的更改。

```
afx_msg void OnSessionChange(
    UINT nSessionState,
    UINT nId);
```

### <a name="parameters"></a>parameters

|参数|说明|
|---------------|-----------------|
|*nSessionState*|中状态代码描述会话状态更改。|
|*nId*|中会话标识符。|

### <a name="remarks"></a>备注

此方法接收 Windows SDK 中描述的[WM_WTSSESSION_CHANGE](/windows/win32/TermServ/wm-wtssession-change)通知。

*NSessionState*参数指定会话连接或断开连接到控制台或远程终端、登录或注销的用户、会话被锁定或解除锁定，或会话已更改为远程控制的状态。 有关详细信息，请参阅[WM_WTSSESSION_CHANGE](/windows/win32/TermServ/wm-wtssession-change)消息的*wParam*参数。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onsetcursor"></a>CWnd：： OnSetCursor

如果未捕获鼠标输入，则框架将调用此成员函数，并且鼠标将导致光标在 `CWnd` 对象内移动。

```
afx_msg BOOL OnSetCursor(
    CWnd* pWnd,
    UINT nHitTest,
    UINT message);
```

### <a name="parameters"></a>parameters

*pWnd*<br/>
指定指向包含光标的窗口的指针。 该指针可能是暂时的，不应存储起来供将来使用。

*nHitTest*<br/>
指定[命中测试](#onnchittest)区域代码。 命中测试确定光标的位置。

message<br/>
指定鼠标消息号。

### <a name="return-value"></a>返回值

若要停止进一步的处理，则为非零; 否则为0。

### <a name="remarks"></a>备注

默认实现在处理前调用父窗口的 `OnSetCursor`。 如果父窗口返回 TRUE，则将停止进一步处理。 调用父窗口会使父窗口控制光标在子窗口中的设置。

如果光标不在工作区中，则默认实现将光标设置为箭头，如果为，则将光标设置为。

如果*nHitTest*为 HTERROR，*消息*为鼠标按钮向下消息，则调用 `MessageBeep` 成员函数。

`CWnd` 进入菜单模式时，*消息*参数为0。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onsetfocus"></a>CWnd：： OnSetFocus

在获取输入焦点后，框架将调用此成员函数。

```
afx_msg void OnSetFocus(CWnd* pOldWnd);
```

### <a name="parameters"></a>parameters

*pOldWnd*<br/>
包含失去输入焦点的 `CWnd` 对象（可能为 NULL）。 该指针可能是暂时的，不应存储起来供将来使用。

### <a name="remarks"></a>备注

若要显示插入符号，`CWnd` 应在此时调用适当的插入符号函数。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onsettingchange"></a>CWnd：： OnSettingChange

当 Win32 SystemParametersInfo 函数更改系统范围的设置时，框架会调用所有顶级窗口 `OnSettingChange`。

```
afx_msg void OnSettingChange(
    UINT uFlags,
    LPCTSTR lpszSection);
```

### <a name="parameters"></a>parameters

*uFlags*<br/>
当系统作为 `SystemParametersInfo` 调用的结果发送消息时，此参数是一个标志，用于指示已更改的系统参数。 有关值的列表，请参阅 Windows SDK 中的[SystemParametersInfo](/windows/win32/api/winuser/nf-winuser-systemparametersinfow) 。 当应用程序发送消息时，此参数必须为0。

*lpszSection*<br/>
指向一个字符串，该字符串指定已更改的节的名称。 （该字符串不包含用方括号括起节名称。）

### <a name="remarks"></a>备注

当应用程序对系统参数进行更改时，应用程序应将消息发送到所有顶级窗口，如果用户通过控制面板更改设置，则 Windows 将发送消息。

ON_WM_SETTINGCHANGE 消息类似于 ON_WM_WININICHANGE 消息，具有以下差异：

- 在运行 Windows NT 4.0 或更高版本时，或在 Windows 95/98 下，使用 ON_WM_SETTINGCHANGE。

- 运行 Windows NT 3.51 或更低版本时，使用 ON_WININICHANGE。 此消息现已过时。

消息映射中应只有其中一个宏。 若要编写适用于 Windows 95/98 和 Windows NT 4.0 的程序，请为 ON_WM_SETTINGCHANGE 编写处理程序。 在 Windows NT 3.51 下，处理程序将由 `OnSettingChange` 和*uFlags*调用，并且将始终为零。

##  <a name="onshowwindow"></a>CWnd：： OnShowWindow

当要隐藏或显示 `CWnd` 对象时，框架会调用此成员函数。

```
afx_msg void OnShowWindow(
    BOOL bShow,
    UINT nStatus);
```

### <a name="parameters"></a>parameters

*bShow*<br/>
指定是否显示窗口。 如果正在显示窗口，则为 TRUE;如果该窗口处于隐藏状态，则为 FALSE。

*nStatus*<br/>
指定正在显示的窗口的状态。 如果由于 `ShowWindow` 成员函数调用而发送消息，则为 0; 否则为0。否则， *nStatus*是以下项之一：

- SW_PARENTCLOSING 父窗口正在关闭（正在进行图标），或者弹出窗口处于隐藏状态。

- 正在打开（正在显示） SW_PARENTOPENING 父窗口，或者正在显示弹出窗口。

### <a name="remarks"></a>备注

当调用 `ShowWindow` 成员函数、最大化或还原重叠窗口、关闭重叠或弹出窗口（使图标）或打开（在屏幕上显示）时，将隐藏或显示窗口。 重叠窗口关闭时，与该窗口关联的所有弹出窗口都将隐藏。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onsize"></a>CWnd：： OnSize

在窗口大小更改后，框架将调用此成员函数。

```
afx_msg void OnSize(
    UINT nType,
    int cx,
    int cy);
```

### <a name="parameters"></a>parameters

nType<br/>
指定所请求的调整大小类型。 此参数可以是下列值之一：

- SIZE_MAXIMIZED 窗口已最大化。

- SIZE_MINIMIZED 窗口已最小化。

- 已调整 SIZE_RESTORED 窗口的大小，但不会应用 SIZE_MINIMIZED 和 SIZE_MAXIMIZED。

- 当某个其他窗口最大化时，SIZE_MAXHIDE 消息将发送到所有弹出窗口。

- 当某个其他窗口还原为以前的大小时，将 SIZE_MAXSHOW 消息发送到所有弹出窗口。

*cx*<br/>
指定工作区的新宽度。

*cy*<br/>
指定工作区的新高度。

### <a name="remarks"></a>备注

如果为 `OnSize`的子窗口调用了[SetScrollPos](#setscrollpos)或[MoveWindow](#movewindow)成员函数，`SetScrollPos` 或 `MoveWindow` 的 `bRedraw` 参数应为非零值才能导致重绘 `CWnd`。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#109](../../mfc/reference/codesnippet/cpp/cwnd-class_50.cpp)]

##  <a name="onsizeclipboard"></a>CWnd：： OnSizeClipboard

当剪贴板包含具有 `CF_OWNERDISPLAY` 属性的数据且剪贴板查看器窗口的工作区大小发生更改时，剪贴板查看器将调用剪贴板所有者的 `OnSizeClipboard` 成员函数。

```
afx_msg void OnSizeClipboard(
    CWnd* pClipAppWnd,
    HGLOBAL hRect);
```

### <a name="parameters"></a>parameters

*pClipAppWnd*<br/>
标识剪贴板-应用程序窗口。 指针可能是暂时的，不应存储。

*hRect*<br/>
标识全局内存对象。 内存对象包含一个 RECT 数据结构，该结构指定剪贴板所有者要绘制的区域。

### <a name="remarks"></a>备注

使用 null 矩形（0，0，0，0）作为新大小调用 `OnSizeClipboard` 成员函数，以使剪贴板应用程序被销毁或最小化。 这允许剪贴板所有者释放其显示资源。

在 `OnSizeClipboard`中，应用程序必须使用[GlobalLock](/windows/win32/api/winbase/nf-winbase-globallock) Windows 函数来锁定包含 RECT 数据结构的内存。 让应用程序使用[GlobalUnlock](/windows/win32/api/winbase/nf-winbase-globalunlock) Windows 函数对内存进行解锁，然后生成或返回 control。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onsizing"></a>CWnd：： OnSizing

框架调用此成员函数以指示用户正在调整矩形的大小。

```
afx_msg void OnSizing(
    UINT nSide,
    LPRECT lpRect);
```

### <a name="parameters"></a>parameters

*nSide*<br/>
要移动的窗口的边缘。

*lpRect*<br/>
将包含项坐标的[CRect](../../atl-mfc-shared/reference/crect-class.md)或[RECT 结构](/windows/win32/api/windef/ns-windef-rect)的地址。

### <a name="remarks"></a>备注

通过处理此消息，应用程序可以监视拖动矩形的大小和位置，如果需要，还可以更改其大小或位置。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#110](../../mfc/reference/codesnippet/cpp/cwnd-class_51.cpp)]

##  <a name="onspoolerstatus"></a>CWnd：： OnSpoolerStatus

每当在打印管理器队列中添加或删除作业时，框架都会从打印管理器调用此成员函数。

```
afx_msg void OnSpoolerStatus(
    UINT nStatus,
    UINT nJobs);
```

### <a name="parameters"></a>parameters

*nStatus*<br/>
指定 SP_JOBSTATUS 标志。

*nJobs*<br/>
指定打印管理器队列中剩余的作业数。

### <a name="remarks"></a>备注

此调用仅用于提供信息。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onstylechanged"></a>CWnd：： OnStyleChanged

当[SetWindowLong](/windows/win32/api/winuser/nf-winuser-setwindowlongw)函数更改了一个或多个窗口样式后，框架将调用此成员函数。

```
afx_msg void OnStyleChanged(
    int nStyleType,
    LPSTYLESTRUCT lpStyleStruct);
```

### <a name="parameters"></a>parameters

*nStyleType*<br/>
指定窗口的扩展样式或 nonextended 样式是否已更改。 此参数可以是下列值的组合：

- GWL_EXSTYLE 窗口的扩展样式发生了更改。

- GWL_STYLE 窗口的 nonextended 样式已更改。

*lpStyleStruct*<br/>
指向包含窗口新样式的[STYLESTRUCT](/windows/win32/api/winuser/ns-winuser-stylestruct)结构。 应用程序可以检查样式，但是不能对其进行更改。

### <a name="remarks"></a>备注

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onstylechanging"></a>CWnd：： OnStyleChanging

当[SetWindowLong](/windows/win32/api/winuser/nf-winuser-setwindowlongw)函数将要更改一个或多个窗口样式时，框架会调用此成员函数。

```
afx_msg void OnStyleChanging(
    int nStyleType,
    LPSTYLESTRUCT lpStyleStruct);
```

### <a name="parameters"></a>parameters

*nStyleType*<br/>
指定窗口的扩展样式或 nonextended 样式是否已更改。 此参数可以是下列值的组合：

- GWL_EXSTYLE 窗口的扩展样式发生了更改。

- GWL_STYLE 窗口的 nonextended 样式已更改。

*lpStyleStruct*<br/>
指向包含窗口新样式的[STYLESTRUCT](/windows/win32/api/winuser/ns-winuser-stylestruct)结构。 应用程序可以检查样式并对其进行更改。

### <a name="remarks"></a>备注

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onsyschar"></a>CWnd：： OnSysChar

如果 `CWnd` 具有输入焦点并且翻译了[WM_SYSKEYUP](#onsyskeyup)和[WM_SYSKEYDOWN](#onsyskeydown)消息，框架将调用此成员函数。

```
afx_msg void OnSysChar(
    UINT nChar,
    UINT nRepCnt,
    UINT nFlags);
```

### <a name="parameters"></a>parameters

*nChar*<br/>
指定控件菜单键的 ASCII 字符键代码。

*nRepCnt*<br/>
指定重复次数（击键次数为按下键的用户的重复次数）。

*nFlags*<br/>
*NFlags*参数可具有以下值：

|值|含义|
|-----------|-------------|
|0-15|指定重复计数。 值是用户按下键的结果，重复击键的次数。|
|16-23|指定扫描代码。 此值取决于原始设备制造商（OEM）|
|24|指定该密钥是否是扩展密钥，如在增强的101或102键盘上显示的右 ALT 和 CTRL 键。 如果是扩展键，则值为 1; 否则为。否则，为0。|
|25-28|由 Windows 在内部使用。|
|29|指定上下文代码。 如果按下了该键，则值为 1; 否则，值为 1;否则，该值为0。|
|30|指定上一个密钥状态。 如果在发送消息前键关闭，则值为 1; 如果键已启动，则该值为0。|
|31|指定转换状态。 如果释放密钥，则值为 1; 如果按下该键，则值为0。|

### <a name="remarks"></a>备注

它指定控制菜单键的虚拟键代码。 （有关标准虚拟键代码的列表，请参阅 Winuser.h）

当上下文代码为0时，WM_SYSCHAR 可以将[WM_SYSCHAR](/windows/win32/menurc/wm-syschar)消息传递给[TranslateAccelerator](/windows/win32/api/winuser/nf-winuser-translateacceleratorw) Windows 函数，该函数将处理它，就像它是普通的键消息而不是系统字符键一样。 即使活动窗口没有输入焦点，也允许将快捷键与活动窗口一起使用。

对于 IBM 增强的101和102键盘，增强型密钥是右 ALT，键盘主要部分的右 CTRL 键;数字键盘左侧分类中的 INS、DEL、HOME、END、PAGE UP、PAGE DOWN 和箭头键;和斜线（/），然后在数字键盘中输入键。 其他一些键盘可能支持*nFlags*中的扩展密钥位。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onsyscolorchange"></a>CWnd：： OnSysColorChange

在系统颜色设置中进行更改时，框架将为所有顶级窗口调用此成员函数。

```
afx_msg void OnSysColorChange();
```

### <a name="remarks"></a>备注

对于受系统颜色更改影响的任何窗口，Windows 调用 `OnSysColorChange`。

具有使用现有系统颜色的画笔的应用程序应删除这些画笔，并使用新的系统颜色重新创建它们。

##  <a name="onsyscommand"></a>CWnd：： OnSysCommand

当用户从 "控件" 菜单中选择一个命令时，或当用户选择 "最大化" 或 "最小化" 按钮时，框架将调用此成员函数。

```
afx_msg void OnSysCommand(
    UINT nID,
    LPARAM lParam);
```

### <a name="parameters"></a>parameters

*nID*<br/>
指定所请求的系统命令的类型。 此参数可以是下列值之一：

- SC_CLOSE 关闭 `CWnd` 对象。

- SC_HOTKEY 激活与应用程序指定的热键关联的 `CWnd` 对象。 *LParam*的低序位字标识要激活的窗口的 HWND。

- SC_HSCROLL 水平滚动。

- SC_KEYMENU 通过击键检索菜单。

- SC_MAXIMIZE （或 SC_ZOOM）最大化 `CWnd` 对象。

- SC_MINIMIZE （或 SC_ICON）最小化 `CWnd` 对象。

- SC_MOUSEMENU 通过鼠标单击检索菜单。

- SC_MOVE 移动 `CWnd` 对象。

- SC_NEXTWINDOW 移到下一个窗口。

- SC_PREVWINDOW 移到上一个窗口。

- SC_RESTORE 将窗口还原到正常位置和大小。

- SC_SCREENSAVE 执行在系统的 [boot] 部分指定的屏幕保护程序应用程序。INI 文件。

- SC_SIZE `CWnd` 对象的大小。

- SC_TASKLIST 执行或激活 Windows 任务管理器应用程序。

- SC_VSCROLL 垂直滚动。

*lParam*<br/>
如果使用鼠标选择了控制菜单命令，则*lParam*将包含光标坐标。 低序位字包含 x 坐标，高位字包含 y 坐标。 否则，不使用此参数。

- SC_HOTKEY 激活与应用程序指定的热键关联的窗口。 *LParam*的低序位字标识要激活的窗口。

- SC_SCREENSAVE 执行 "控制面板" 的 "桌面" 部分中指定的屏幕保存应用程序。

### <a name="remarks"></a>备注

默认情况下，`OnSysCommand` 执行上表中指定的预定义操作的控制菜单请求。

在 WM_SYSCOMMAND 消息中， *nID*参数的四个低序位由 Windows 在内部使用。 当应用程序测试*nid*的值时，它必须将值0XFFF0 与*nID*值结合使用来获取正确的结果。

可以使用 `GetSystemMenu`、`AppendMenu`、`InsertMenu`和 `ModifyMenu` 成员函数修改控件菜单中的菜单项。 修改控制菜单的应用程序必须处理 WM_SYSCOMMAND 的消息，而不是由应用程序处理的任何 WM_SYSCOMMAND 消息都必须传递到 `OnSysCommand`。 应用程序添加的任何命令值必须由应用程序进行处理，并且不能传递到 `OnSysCommand`。

应用程序可以通过将 WM_SYSCOMMAND 消息传递到 `OnSysCommand`来随时执行任何系统命令。

定义为从 "控制" 菜单中选择项的快捷键（快捷方式）将转换为 `OnSysCommand` 调用;所有其他快捷键按键都转换为[WM_COMMAND](#oncommand)消息。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onsysdeadchar"></a>CWnd：： OnSysDeadChar

如果在调用[OnSysKeyUp](#onsyskeyup)或[OnSysKeyDown](#onsyskeydown)成员函数时，`CWnd` 对象具有输入焦点，则框架将调用此成员函数。

```
afx_msg void OnSysDeadChar(
    UINT nChar,
    UINT nRepCnt,
    UINT nFlags);
```

### <a name="parameters"></a>parameters

*nChar*<br/>
指定死键字符值。

*nRepCnt*<br/>
指定重复计数。

*nFlags*<br/>
指定扫描代码、键转换代码、上一个密钥状态和上下文代码，如下面的列表所示：

|值|含义|
|-----------|-------------|
|0-7|扫描代码（与 OEM 相关的值）。 高序位字的低字节。|
|8|扩展键，如数字键盘上的函数键或键（如果是扩展键，则为 1; 否则为0）。|
|9-10|未使用。|
|11-12|由 Windows 在内部使用。|
|13|上下文代码（如果按下了键，则为 1; 否则为0）。|
|14|上一个键状态（如果键在调用之前关闭，则为 1; 如果键已启动，则为0）。|
|15|转换状态（如果正在释放密钥，则为 1; 如果按下该键，则为0）。|

### <a name="remarks"></a>备注

它指定了死键的字符值。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onsyskeydown"></a>CWnd：： OnSysKeyDown

如果 `CWnd` 对象具有输入焦点，则当用户按住 ALT 键，然后按下另一个键时，框架将调用 `OnSysKeyDown` 成员函数。

```
afx_msg void OnSysKeyDown(
    UINT nChar,
    UINT nRepCnt,
    UINT nFlags);
```

### <a name="parameters"></a>parameters

*nChar*<br/>
指定所按下的键的虚拟键代码。 有关标准虚拟键代码的列表，请参阅 Winuser。h

*nRepCnt*<br/>
指定重复计数。

*nFlags*<br/>
指定扫描代码、键转换代码、上一个密钥状态和上下文代码，如下面的列表所示：

|值|含义|
|-----------|-------------|
|0-7|扫描代码（与 OEM 相关的值）。 高序位字的低字节。|
|8|扩展键，如数字键盘上的函数键或键（如果是扩展键，则为 1; 否则为0）。|
|9-10|未使用。|
|11-12|由 Windows 在内部使用。|
|13|上下文代码（如果按下了 ALT 键，则为 1; 否则为0）。|
|14|上一个密钥状态（如果在发送消息前关闭密钥，则为 1; 如果密钥为 up，则为0）。|
|15|转换状态（如果正在释放密钥，则为 1; 如果按下该键，则为0）。|

对于 `OnSysKeyDown` 调用，键转换位（位15）为0。 如果按下了键，则上下文代码位（第13位）为 1;如果将消息发送到活动窗口，则为 0; 如果窗口没有输入焦点，则为0。

### <a name="remarks"></a>备注

如果任何窗口当前都没有输入焦点，则调用活动窗口的 `OnSysKeyDown` 成员函数。 接收消息的 `CWnd` 对象可以通过检查 `nFlags`中的上下文代码来区分这两种上下文。

当上下文代码为0时，可将 `OnSysKeyDown` 接收的 WM_SYSKEYDOWN 消息传递给[TranslateAccelerator](/windows/win32/api/winuser/nf-winuser-translateacceleratorw) Windows 函数，该函数将处理它，就像它是普通的键消息而不是系统键消息一样。 即使活动窗口没有输入焦点，也允许将快捷键与活动窗口一起使用。

由于自动重复，在接收[WM_SYSKEYUP](#onsyskeyup)消息之前，可能会发生多个 `OnSysKeyDown` 调用。 之前的密钥状态（第14个）可用于确定 `OnSysKeyDown` 调用是否指示第一次向下转换或重复向下转换。

对于 IBM 增强的101和102键盘，增强型密钥是右 ALT，键盘主要部分的右 CTRL 键;数字键盘左侧分类中的 INS、DEL、HOME、END、PAGE UP、PAGE DOWN 和箭头键;和斜线（/），然后在数字键盘中输入键。 其他一些键盘可能支持*nFlags*中的扩展密钥位。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onsyskeyup"></a>CWnd：： OnSysKeyUp

如果 `CWnd` 对象具有焦点，则当用户释放在按住 ALT 键的同时按下的键时，框架将调用 `OnSysKeyUp` 成员函数。

```
afx_msg void OnSysKeyUp(
    UINT nChar,
    UINT nRepCnt,
    UINT nFlags);
```

### <a name="parameters"></a>parameters

*nChar*<br/>
指定所按下的键的虚拟键代码。 有关标准虚拟键代码的列表，请参阅 Winuser。h

*nRepCnt*<br/>
指定重复计数。

*nFlags*<br/>
指定扫描代码、键转换代码、上一个密钥状态和上下文代码，如下面的列表所示：

|值|含义|
|-----------|-------------|
|0-7|扫描代码（与 OEM 相关的值）。 高序位字的低字节。|
|8|扩展键，如数字键盘上的函数键或键（如果是扩展键，则为 1; 否则为0）。|
|9-10|未使用。|
|11-12|由 Windows 在内部使用。|
|13|上下文代码（如果按下了 ALT 键，则为 1; 否则为0）。|
|14|上一个密钥状态（如果在发送消息前关闭密钥，则为 1; 如果密钥为 up，则为0）。|
|15|转换状态（如果正在释放密钥，则为 1; 如果按下该键，则为0）。|

对于 `OnSysKeyUp` 调用，键转换位（位15）为1。 如果按下了键，则上下文代码位（第13位）为 1;如果将消息发送到活动窗口，则为 0; 如果窗口没有输入焦点，则为0。

### <a name="remarks"></a>备注

如果任何窗口当前都没有输入焦点，则调用活动窗口的 `OnSysKeyUp` 成员函数。 接收调用的 `CWnd` 对象可以通过检查*nFlags*中的上下文代码来区分这两种上下文。

当上下文代码为0时，可将 `OnSysKeyUp` 接收的 WM_SYSKEYUP 消息传递给[TranslateAccelerator](/windows/win32/api/winuser/nf-winuser-translateacceleratorw) Windows 函数，该函数将处理它，就像它是普通的键消息而不是系统键消息一样。 即使活动窗口没有输入焦点，也允许将快捷键与活动窗口一起使用。

对于 IBM 增强的101和102键盘，增强型密钥是右 ALT，键盘主要部分的右 CTRL 键;数字键盘左侧分类中的 INS、DEL、HOME、END、PAGE UP、PAGE DOWN 和箭头键;和斜线（/），然后在数字键盘中输入键。 其他一些键盘可能支持*nFlags*中的扩展密钥位。

对于非美国增强型102键键盘，右 ALT 键将作为 CTRL + ALT 组合键进行处理。 下面显示了当用户按下并释放此密钥时产生的消息和调用的顺序：

|序列|已访问函数|消息已传递|
|--------------|-----------------------|--------------------|
|1.|[WM_KEYDOWN](#onkeydown)|VK_CONTROL|
|2.|[WM_KEYDOWN](#onkeydown)|VK_MENU|
|3.|[WM_KEYUP](#onkeyup)|VK_CONTROL|
|4.|[WM_SYSKEYUP](/windows/win32/inputdev/wm-syskeyup)|VK_MENU|

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="ontcard"></a>CWnd：： OnTCard

当用户单击 "可创作" 按钮时，框架将调用此成员函数。

```
afx_msg void OnTCard(
    UINT idAction,
    DWORD dwActionData);
```

### <a name="parameters"></a>parameters

*idAction*<br/>
指示用户已执行的操作。 此参数可以是下列值之一：

- IDABORT 用户单击了可创作 "中止" 按钮。

- IDCANCEL 用户单击了可创作 "取消" 按钮。

- IDCLOSE 用户关闭了训练卡。

- IDHELP 用户单击了可创作 Windows "帮助" 按钮。

- IDIGNORE 用户单击了可创作的 "忽略" 按钮。

- IDOK 用户单击了可创作 "确定" 按钮。

- IDNO 用户单击了 "可创作" 按钮。

- IDRETRY 用户单击了可创作 "重试" 按钮。

- HELP_TCARD_DATA 用户单击可创作按钮。 *DwActionData*参数包含由帮助作者指定的长整数。

- HELP_TCARD_NEXT 用户单击可创作的 "下一步" 按钮。

- HELP_TCARD_OTHER_CALLER 另一应用程序已请求定型卡。

- IDYES 用户单击了可创作 "是" 按钮。

*dwActionData*<br/>
如果*idAction*指定 HELP_TCARD_DATA，则此参数是由帮助作者指定的长整数。 否则，此参数为零。

### <a name="remarks"></a>备注

仅当应用程序使用 Windows 帮助启动了定型卡时，才会调用此函数。 应用程序通过在对[WinHelp](../../mfc/reference/cwinapp-class.md#winhelp)函数的调用中指定 HELP_TCARD 命令来启动定型卡。

##  <a name="ontimechange"></a>CWnd：： OnTimeChange

更改系统时间后，框架将调用此成员函数。

```
afx_msg void OnTimeChange();
```

### <a name="remarks"></a>备注

具有更改系统时间的任何应用程序将此消息发送到所有顶级窗口。 若要将 WM_TIMECHANGE 消息发送到所有顶级窗口，应用程序可以使用[SendMessage](/windows/win32/api/winuser/nf-winuser-sendmessage) windows 函数，并将其*hwnd*参数设置为 HWND_BROADCAST。

##  <a name="ontimer"></a>CWnd：： OnTimer

在[SetTimer](#settimer)成员函数中指定的每个间隔后，框架将调用此成员函数来安装计时器。

```
afx_msg void OnTimer(UINT_PTR nIDEvent);
```

### <a name="parameters"></a>parameters

*nIDEvent*<br/>
指定计时器的标识符。

### <a name="remarks"></a>备注

当应用程序的消息队列中没有任何其他消息时， [DispatchMessage](/windows/win32/api/winuser/nf-winuser-dispatchmessage) Windows 函数将发送[WM_TIMER](/windows/win32/winmsg/wm-timer)消息。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

### <a name="example"></a>示例

  请参阅[CWnd：： SetTimer](#settimer)中的示例。

##  <a name="ontoolhittest"></a>CWnd：： OnToolHitTest

框架调用此成员函数来确定某个点是否在指定工具的边框中。

```
virtual INT_PTR OnToolHitTest(
    CPoint point,
    TOOLINFO* pTI) const;
```

### <a name="parameters"></a>parameters

*情况*<br/>
指定光标的 x 坐标和 y 坐标。 这些坐标始终相对于窗口的左上角

*pTI*<br/>
指向[TOOLINFO](/windows/win32/api/commctrl/ns-commctrl-tttoolinfoa)结构的指针。 默认情况下，将设置以下结构值：

- *hwnd* = 窗口 `m_hWnd` 句柄

- 子窗口 `(UINT)hWndChild` 句柄 = *uId*

- *uFlags* &#124;= 工具的 TTF_IDISHWND 句柄

- *lpszText* = 将显示在指定窗口中的字符串 LPSTR_TEXTCALLBACK 指针

### <a name="return-value"></a>返回值

如果找到 tooltip 控件，则为窗口控件 ID。 如果找不到 tooltip 控件，则为-1。

### <a name="remarks"></a>备注

如果点在矩形中，它将检索有关该工具的信息。

如果与工具提示相关联的区域不是按钮，`OnToolHitTest` 会将结构标志设置为 TTF_NOTBUTTON 和 TTF_CENTERTIP。

重写 `OnToolHitTest` 以提供不同于默认提供的信息。

有关结构的详细信息，请参阅 "Windows SDK 中的[TOOLINFO](/windows/win32/api/commctrl/ns-commctrl-tttoolinfoa)。

##  <a name="ontouchinput"></a>CWnd：： OnTouchInput

处理来自 Windows 触摸屏的单个输入。

```
virtual BOOL OnTouchInput(
    CPoint pt,
    int nInputNumber,
    int nInputsCount,
    PTOUCHINPUT pInput);
```

### <a name="parameters"></a>parameters

*pt*<br/>
触摸屏幕的位置（在工作区坐标中）。

*nInputNumber*<br/>
触摸输入的数目。

*nInputsCount*<br/>
触摸输入的总次数。

*pInput*<br/>
指向 TOUCHINPUT 结构的指针。

### <a name="return-value"></a>返回值

如果应用程序处理 Windows touch 输入，则为 TRUE;否则为 FALSE。

### <a name="remarks"></a>备注

##  <a name="ontouchinputs"></a>CWnd：： OnTouchInputs

处理来自 Windows touch 的输入。

```
virtual BOOL OnTouchInputs(
    UINT nInputsCount,
    PTOUCHINPUT pInputs);
```

### <a name="parameters"></a>parameters

*nInputsCount*<br/>
Windows touch 输入的总数。

*pInputs*<br/>
TOUCHINPUT 的数组。

### <a name="return-value"></a>返回值

如果应用程序处理 Windows touch 输入，则为 TRUE;否则为 FALSE。

### <a name="remarks"></a>备注

##  <a name="onunichar"></a>CWnd：： OnUniChar

按下某个键时，框架会调用此成员函数。 也就是说，当前窗口具有键盘焦点，并通过[TranslateMessage](/windows/win32/api/winuser/nf-winuser-translatemessage)函数来转换[WM_KEYDOWN](/windows/win32/inputdev/wm-keydown)消息。

```
afx_msg void OnUniChar(
    UINT nChar,
    UINT nRepCnt,
    UINT nFlags);
```

### <a name="parameters"></a>parameters

|参数|说明|
|---------------|-----------------|
|*nChar*|中指定按下的键的字符代码。|
|*nRepCnt*|中指定当前消息的重复次数。 值是用户按下键时，击键 autorepeated 的次数。 如果击键时间足够长，则发送多条消息。 但是，重复计数不是累积计数。|
|*nFlags*|中指定扫描代码、扩展密钥、上下文代码、上一个密钥状态和转换状态的标志，如下表所示：<br /><br /> **0-7：** 指定扫描代码。 此值取决于原始设备制造商（OEM）。<br /><br /> **8：** 指定扩展的密钥，例如显示在增强101或102键键盘上的右 ALT 和 CTRL 键。 如果密钥是扩展密钥，标志为 1;否则，为0。<br /><br /> **9-12：** 由 Windows 在内部使用。<br /><br /> **13：** 指定上下文代码。 如果按下了该键，则该标志为 1;否则，该值为0。<br /><br /> **14：** 指定上一个密钥状态。 如果在发送消息前键关闭，则标志为 1; 如果键已启动，则为0。<br /><br /> **15：** 指定转换状态。 如果释放密钥，标志为 1; 如果按下该键，则为0。|

### <a name="remarks"></a>备注

此方法接收 Windows SDK 中描述的[WM_UNICHAR](/windows/win32/inputdev/wm-unichar)通知。 [WM_UNICHAR](/windows/win32/inputdev/wm-unichar)消息用于将 Unicode 字符发送到 ANSI 窗口或将其发布到 ANSI 窗口。 它与[WM_CHAR](/windows/win32/inputdev/wm-char)消息等效，但使用 Unicode 转换格式32编码（32 utf-8），而[WM_CHAR](/windows/win32/inputdev/wm-char)消息使用 utf-16。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onuninitmenupopup"></a>CWnd：： OnUnInitMenuPopup

当下拉菜单或子菜单已销毁时，框架会调用此成员函数。

```
afx_msg void OnUnInitMenuPopup(
    CMenu* pPopupMenu,
    UINT nFlags);
```

### <a name="parameters"></a>parameters

|参数|说明|
|---------------|-----------------|
|*pMenu*|中指向[CMenu](../../mfc/reference/cmenu-class.md)对象的指针，该对象表示菜单或子菜单。|
|*nFlags*|中已销毁的菜单。 目前，它只能是窗口菜单 MF_SYSMENU。|

### <a name="remarks"></a>备注

此方法接收 Windows SDK 中描述的[WM_UNINITMENUPOPUP](/windows/win32/menurc/wm-uninitmenupopup)通知。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onupdateuistate"></a>CWnd：： OnUpdateUIState

调用以更改指定窗口及其所有子窗口的用户界面 (UI) 状态。

```
afx_msg void OnUpdateUIState(
    UINT nAction,
    UINT nUIElement);
```

### <a name="parameters"></a>parameters

*N 操作*<br/>
指定要执行的操作。 可以是以下值之一：

- UIS_CLEAR 应隐藏 UI state 元素（由*nUIElement*指定）。

- UIS_INITIALIZE 应根据最后一个输入事件更改 UI state 元素（由*nUIElement*指定）。 有关详细信息，请参阅[WM_UPDATEISTATE](/windows/win32/menurc/wm-updateuistate)的 "**备注**" 部分。

- UIS_SET UI state 元素（由*nUIElement*指定）应可见。

*nUIElement*<br/>
指定受影响的 UI 状态元素或控件的样式。 可以是以下值之一：

- UISF_HIDEACCEL 键盘快捷键。

- UISF_HIDEFOCUS 焦点指示器。

- UISF_ACTIVE Windows XP：应以用于活动控件的样式绘制控件。

### <a name="remarks"></a>备注

此成员函数模拟[WM_UPDATEUISTATE](/windows/win32/menurc/wm-updateuistate)消息的功能，如 Windows SDK 中所述。

##  <a name="onuserchanged"></a>CWnd：： OnUserChanged

在用户登录或注销后，框架将为所有窗口调用此成员。

```
afx_msg void OnUserChanged();
```

### <a name="remarks"></a>备注

此方法接收 Windows SDK 中描述的[WM_USERCHANGED](/windows/win32/winmsg/wm-userchanged)通知消息。 当用户登录或注销时，操作系统将更新用户特定的设置。 更新设置后，系统立即发送此消息。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onvkeytoitem"></a>CWnd：： OnVKeyToItem

如果 `CWnd` 对象拥有[LBS_WANTKEYBOARDINPUT](../../mfc/reference/styles-used-by-mfc.md#list-box-styles)样式的列表框，则列表框将发送 WM_VKEYTOITEM 消息以响应 WM_KEYDOWN 消息。

```
afx_msg int OnVKeyToItem(
    UINT nKey,
    CListBox* pListBox,
    UINT nIndex);
```

### <a name="parameters"></a>parameters

*nKey*<br/>
指定用户按下的键的虚拟键代码。 有关标准虚拟键代码的列表，请参阅 Winuser。h

*pListBox*<br/>
指定指向列表框的指针。 该指针可能是暂时的，不应存储起来供将来使用。

*nIndex*<br/>
指定当前的插入符号位置。

### <a name="return-value"></a>返回值

指定应用程序为响应消息而执行的操作。 如果返回值为-2，则表示应用程序处理了选择该项的所有方面，并且列表框不需要执行任何其他操作。 返回值-1 指示列表框应执行默认操作以响应击键。 如果返回值为0或更大，则指定列表框中项的从零开始的索引，指示列表框应为给定项的键击执行默认操作。

### <a name="remarks"></a>备注

此成员函数仅适用于具有[LBS_HASSTRINGS](../../mfc/reference/styles-used-by-mfc.md#list-box-styles)样式的列表框。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onvscroll"></a>CWnd：： OnVScroll

用户单击窗口的垂直滚动条时，框架会调用此成员函数。

```
afx_msg void OnVScroll(
    UINT nSBCode,
    UINT nPos,
    CScrollBar* pScrollBar);
```

### <a name="parameters"></a>parameters

*nSBCode*<br/>
指定一个指示用户滚动请求的滚动条代码。 此参数可以是以下项之一：

- SB_BOTTOM 向下滚动。

- SB_ENDSCROLL 结束滚动。

- SB_LINEDOWN 向下滚动一行。

- SB_LINEUP 向上滚动一行。

- SB_PAGEDOWN 向下滚动一页。

- SB_PAGEUP 向上滚动一页。

- SB_THUMBPOSITION 滚动到绝对位置。 当前位置是在*nPos*中提供的。

- SB_THUMBTRACK 将滚动框拖到指定位置。 当前位置是在*nPos*中提供的。

- SB_TOP 滚动到顶部。

*nPos*<br/>
如果滚动条代码是 SB_THUMBPOSITION 或 SB_THUMBTRACK，则包含当前滚动框位置;否则，不使用。 根据初始滚动范围， *nPos*可能为负数，并且应在必要时强制转换为**int** 。

*pScrollBar*<br/>
如果滚动消息来自滚动条控件，则包含指向控件的指针。 如果用户单击了窗口的滚动条，则此参数为 NULL。 该指针可能是暂时的，不应存储起来供将来使用。

### <a name="remarks"></a>备注

`OnVScroll` 通常由在拖动滚动框时提供一些反馈的应用程序使用。

如果 `OnVScroll` 滚动 `CWnd` 对象的内容，则它还必须重置[SetScrollPos](#setscrollpos)成员函数的滚动框的位置。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onvscrollclipboard"></a>CWnd：： OnVScrollClipboard

当剪贴板数据具有 CF_OWNERDISPLAY 格式且剪贴板查看器的垂直滚动条中存在事件时，剪贴板查看器将调用剪贴板所有者的 `OnVScrollClipboard` 成员函数。

```
afx_msg void OnVScrollClipboard(
    CWnd* pClipAppWnd,
    UINT nSBCode,
    UINT nPos);
```

### <a name="parameters"></a>parameters

*pClipAppWnd*<br/>
指定指向剪贴板查看器窗口的指针。 该指针可能是暂时的，不应存储起来供将来使用。

*nSBCode*<br/>
指定以下滚动条值之一：

- SB_BOTTOM 向下滚动。

- SB_ENDSCROLL 结束滚动。

- SB_LINEDOWN 向下滚动一行。

- SB_LINEUP 向上滚动一行。

- SB_PAGEDOWN 向下滚动一页。

- SB_PAGEUP 向上滚动一页。

- SB_THUMBPOSITION 滚动到绝对位置。 当前位置是在*nPos*中提供的。

- SB_TOP 滚动到顶部。

*nPos*<br/>
如果滚动条代码是 SB_THUMBPOSITION，则包含滚动框位置;否则，不使用*nPos* 。

### <a name="remarks"></a>备注

所有者应滚动剪贴板图像、使相应部分失效以及更新滚动条值。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onwindowmaximizedchanged"></a>CWnd：： OnWindowMaximizedChanged

当当前窗口处于最大化状态，并且该窗口由桌面窗口管理器（DWM）组成时，框架会调用此成员。

```
afx_msg void OnWindowMaximizedChanged(BOOL bIsMaximized);
```

### <a name="parameters"></a>parameters

|参数|说明|
|---------------|-----------------|
|*bIsMaximized*|中如果当前窗口已最大化，则为 TRUE; 否则为 FALSE。|

### <a name="remarks"></a>备注

此方法接收 Windows SDK 中描述的[WM_DWMWINDOWMAXIMIZEDCHANGE](/windows/win32/dwm/wm-dwmwindowmaximizedchange)通知消息。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onwindowposchanged"></a>CWnd：： OnWindowPosChanged

当由于调用[SetWindowPos](/windows/win32/api/winuser/nf-winuser-setwindowpos)成员函数或其他窗口管理函数而更改了大小、位置或 Z 顺序时，框架会调用此成员函数。

```
afx_msg void OnWindowPosChanged(WINDOWPOS* lpwndpos);
```

### <a name="parameters"></a>parameters

*lpwndpos*<br/>
指向[WINDOWPOS](/windows/win32/api/winuser/ns-winuser-windowpos)数据结构，该结构包含有关窗口新大小和位置的信息。

### <a name="remarks"></a>备注

默认实现会将[WM_SIZE](/windows/win32/winmsg/wm-size)和[WM_MOVE](/windows/win32/winmsg/wm-move)消息发送到窗口。 如果应用程序在未调用其基类的情况下处理 `OnWindowPosChanged` 调用，则不会发送这些消息。 在调用 `OnWindowPosChanged` 期间，如果不调用其基类，则执行任何移动或大小更改处理更为有效。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onwindowposchanging"></a>CWnd：： OnWindowPosChanging

当由于调用[SetWindowPos](/windows/win32/api/winuser/nf-winuser-setwindowpos)成员函数或其他窗口管理函数而要更改大小、位置或 Z 顺序时，框架将调用此成员函数。

```
afx_msg void OnWindowPosChanging(WINDOWPOS* lpwndpos);
```

### <a name="parameters"></a>parameters

*lpwndpos*<br/>
指向一个 `WINDOWPOS` 数据结构，该结构包含有关窗口新大小和位置的信息。

### <a name="remarks"></a>备注

应用程序可以通过在[WINDOWPOS](/windows/win32/api/winuser/ns-winuser-windowpos)结构的**flags**成员中设置或清除相应的位来阻止对窗口进行更改。

对于具有[WS_OVERLAPPED](styles-used-by-mfc.md#window-styles)或[WS_THICKFRAME](styles-used-by-mfc.md#window-styles)样式的窗口，默认实现会向窗口发送[WM_GETMINMAXINFO](/windows/win32/winmsg/wm-getminmaxinfo)消息。 这样做是为了验证窗口的新大小和位置，并强制实施 CS_BYTEALIGNCLIENT 和 CS_BYTEALIGN 客户端样式。 应用程序可以通过不调用其基类来重写此功能。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onwininichange"></a>CWnd：： OnWinIniChange

在对 Windows 初始化文件进行更改后，框架将调用此成员函数.INI.

```
afx_msg void OnWinIniChange(LPCTSTR lpszSection);
```

### <a name="parameters"></a>parameters

*lpszSection*<br/>
指向一个字符串，该字符串指定已更改的节的名称。 （该字符串不包含用方括号括起节名称。）

### <a name="remarks"></a>备注

当应用程序使用函数更改 WIN 中的设置后， [SystemParametersInfo](/windows/win32/api/winuser/nf-winuser-systemparametersinfow) Windows 函数将调用 `OnWinIniChange`。INI 文件。

若要将 WM_WININICHANGE 消息发送到所有顶级窗口，应用程序可以使用[SendMessage](/windows/win32/api/winuser/nf-winuser-sendmessage) windows 函数，并将其*hwnd*参数设置为 HWND_BROADCAST。

如果应用程序在 WIN 中更改了许多不同的部分。INI 时，应用程序应发送一个 WM_WININICHANGE 消息，并将*lpszSection*设置为 NULL。 否则，每次应用程序进行更改时，应用程序都应发送 WM_WININICHANGE.INI.

如果应用程序接收到*lpszSection*设置为 NULL 的 `OnWinIniChange` 调用，则应用程序应检查 WIN 中的所有部分。影响应用程序的 INI。

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onwndmsg"></a>CWnd：： OnWndMsg

此成员函数由 `WindowProc`调用，或在消息反射过程中调用。

```
virtual BOOL OnWndMsg(
    UINT message,
    WPARAM wParam,
    LPARAM lParam,
    LRESULT* pResult);
```

### <a name="parameters"></a>parameters

message<br/>
指定要发送的消息。

*wParam*<br/>
指定其他消息相关的信息。

*lParam*<br/>
指定其他消息相关的信息。

*pResult*<br/>
[WindowProc](#windowproc)的返回值。 取决于消息;可以为 NULL。

### <a name="return-value"></a>返回值

如果已处理消息，则为 TRUE;否则为 FALSE。

### <a name="remarks"></a>备注

`OnWndMsg` 确定消息类型，并调用适当的框架函数（例如，用于 WM_COMMAND 的[OnCommand](#oncommand) ）或在消息映射中查找相应的消息。

有关消息反射的详细信息，请参阅[处理反射的消息](../../mfc/handling-reflected-messages.md)。

##  <a name="onxbuttondblclk"></a>CWnd：： OnXButtonDblClk

当光标位于窗口工作区中并且用户双击 XBUTTON1 或 XBUTTON2 时，框架将调用此成员函数。

```
afx_msg void OnXButtonDblClk(
    UINT nFlags,
    UINT nButton,
    CPoint point);
```

### <a name="parameters"></a>parameters

|参数|说明|
|---------------|-----------------|
|*nFlags*|中标志的按位组合（OR），指示按下的修改键。 例如，MK_CONTROL 标志指示按下了 CTRL 键。|
|*nButton*|中如果双击第一个 Microsoft 智能鼠标 X 按钮，则该值为 XBUTTON1; 如果双击第二个 X 按钮，则为 XBUTTON2。|
|*情况*|中一个[CPoint](../../atl-mfc-shared/reference/cpoint-class.md)对象，该对象指定光标相对于工作区左上角的*x*和*y*坐标。|

### <a name="remarks"></a>备注

此方法接收 Windows SDK 中描述的[WM_XBUTTONDBLCLK](/windows/win32/inputdev/wm-xbuttondblclk)通知。 如果未捕获鼠标，则会将消息发布到光标下的窗口。 否则，会将消息发送到捕获了鼠标的窗口。

*NFlags*参数可以是下表中列出的修改键的组合。 有关详细信息，请参阅[关于鼠标输入](/windows/win32/inputdev/about-mouse-input)。

|修改键|说明|
|------------------|-----------------|
|MK_CONTROL|按下了 CTRL 键。|
|MK_LBUTTON|鼠标左键已按下。|
|MK_MBUTTON|鼠标中键已按下。|
|MK_RBUTTON|鼠标右键已按下。|
|MK_SHIFT|按下 SHIFT 键。|
|MK_XBUTTON1|按下了 Microsoft 智能鼠标的 XBUTTON1 鼠标按钮。|
|MK_XBUTTON2|按下了 Microsoft 智能鼠标的 XBUTTON2 鼠标按钮。|

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onxbuttondown"></a>CWnd：： OnXButtonDown

当光标位于窗口工作区中并且用户按 XBUTTON1 或 XBUTTON2 时，框架将调用此成员函数。

```
afx_msg void OnXButtonDown(
    UINT nFlags,
    UINT nButton,
    CPoint point);
```

### <a name="parameters"></a>parameters

|参数|说明|
|---------------|-----------------|
|*nFlags*|中标志的按位组合（OR），指示按下的修改键。 例如，MK_CONTROL 标志指示按下了 CTRL 键。|
|*nButton*|中如果单击第一个 Microsoft 智能鼠标 X 按钮，则该值为 XBUTTON1; 如果单击第二个 X 按钮，则为 XBUTTON2。|
|*情况*|中一个[CPoint](../../atl-mfc-shared/reference/cpoint-class.md)对象，该对象指定光标相对于工作区左上角的*x*和*y*坐标。|

### <a name="remarks"></a>备注

此方法接收 Windows SDK 中描述的[WM_XBUTTONDOWN](/windows/win32/inputdev/wm-xbuttondown)通知。 如果未捕获鼠标，则会将消息发布到光标下的窗口。 否则，会将消息发送到捕获了鼠标的窗口。

*NFlags*参数可以是下表中列出的修改键的组合。 有关详细信息，请参阅[关于鼠标输入](/windows/win32/inputdev/about-mouse-input)。

|修改键|说明|
|------------------|-----------------|
|MK_CONTROL|按下了 CTRL 键。|
|MK_LBUTTON|鼠标左键已按下。|
|MK_MBUTTON|鼠标中键已按下。|
|MK_RBUTTON|鼠标右键已按下。|
|MK_SHIFT|按下 SHIFT 键。|
|MK_XBUTTON1|按下了 Microsoft 智能鼠标的 XBUTTON1 鼠标按钮。|
|MK_XBUTTON2|按下了 Microsoft 智能鼠标的 XBUTTON2 鼠标按钮。|

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="onxbuttonup"></a>CWnd：： OnXButtonUp

当光标位于窗口工作区中时，框架会调用此成员函数。

```
afx_msg void OnXButtonUp(
    UINT nFlags,
    UINT nButton,
    CPoint point);
```

### <a name="parameters"></a>parameters

|参数|说明|
|---------------|-----------------|
|*nFlags*|中标志的按位组合（OR），指示按下的修改键。 例如，MK_CONTROL 标志指示按下了 CTRL 键。|
|*nButton*|中如果双击第一个 Microsoft 智能鼠标 X 按钮，则该值为 XBUTTON1; 如果双击第二个 X 按钮，则为 XBUTTON2。|
|*情况*|中一个[CPoint](../../atl-mfc-shared/reference/cpoint-class.md)对象，该对象指定光标相对于工作区左上角的*x*和*y*坐标。|

### <a name="remarks"></a>备注

此方法接收 Windows SDK 中描述的[WM_XBUTTONUP](/windows/win32/inputdev/wm-xbuttonup)通知。 如果未捕获鼠标，则会将消息发布到光标下的窗口。 否则，会将消息发送到捕获了鼠标的窗口。

*NFlags*参数可以是下表中列出的修改键的组合。 有关详细信息，请参阅[关于鼠标输入](/windows/win32/inputdev/about-mouse-input)。

|修改键|说明|
|------------------|-----------------|
|MK_CONTROL|按下了 CTRL 键。|
|MK_LBUTTON|鼠标左键已按下。|
|MK_MBUTTON|鼠标中键已按下。|
|MK_RBUTTON|鼠标右键已按下。|
|MK_SHIFT|按下 SHIFT 键。|
|MK_XBUTTON1|按下了 Microsoft 智能鼠标的 XBUTTON1 鼠标按钮。|
|MK_XBUTTON2|按下了 Microsoft 智能鼠标的 XBUTTON2 鼠标按钮。|

> [!NOTE]
> 框架调用此成员函数来支持你的应用程序处理 Windows 消息。 传递到函数的参数反映了收到消息时框架所接收的参数。 如果调用此函数的基类实现，该实现将使用最初随消息传递的参数，而不是你提供给该函数的参数。

##  <a name="openclipboard"></a>CWnd：： OpenClipboard

打开剪贴板。

```
BOOL OpenClipboard();
```

### <a name="return-value"></a>返回值

如果通过 `CWnd`打开剪贴板，则为非零; 如果其他应用程序或窗口打开剪贴板，则为0。

### <a name="remarks"></a>备注

直到调用[CloseClipboard](/windows/win32/api/winuser/nf-winuser-closeclipboard) Windows 函数后，其他应用程序才能修改剪贴板。

当前 `CWnd` 对象将不会成为剪贴板的所有者，直到调用[EmptyClipboard](/windows/win32/api/winuser/nf-winuser-emptyclipboard) Windows 函数。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#111](../../mfc/reference/codesnippet/cpp/cwnd-class_52.cpp)]

##  <a name="operator_hwnd"></a>CWnd：： operator HWND

使用此运算符可获取 `CWnd` 对象的句柄。

```
operator HWND() const;
```

##  <a name="operator_neq"></a>CWnd：： operator！ =

比较两个 `CWnd` 对象，以确定它们是否具有相同的[m_hWnd](#m_hwnd)。

```
BOOL operator!=(const CWnd& wnd) const;
```

### <a name="parameters"></a>parameters

*wnd*<br/>
对 `CWnd` 对象的引用。

### <a name="return-value"></a>返回值

如果相等，则为非零值;否则为0。

##  <a name="operator_eq_eq"></a>CWnd：： operator = =

比较两个 `CWnd` 对象以确定它们是否具有相同的[m_hWnd](#m_hwnd)。

```
BOOL operator==(const CWnd& wnd) const;
```

### <a name="parameters"></a>parameters

*wnd*<br/>
对 `CWnd` 对象的引用。

### <a name="return-value"></a>返回值

如果相等，则为非零值;否则为0。

##  <a name="paintwindowlesscontrols"></a>CWnd：:P aintWindowlessControls

在控件容器上绘制无窗口控件。

```
BOOL PaintWindowlessControls(CDC* pDC);
```

### <a name="parameters"></a>parameters

*pDC*<br/>
要在其上绘制无窗口控件的设备上下文。

### <a name="return-value"></a>返回值

如果有控件容器并且无窗口控件已成功绘制，则返回 TRUE，否则返回 FALSE。

##  <a name="postmessage"></a>CWnd：:P ostMessage

在窗口的消息队列中放置一条消息，然后返回而不等待相应的窗口处理该消息。

```
BOOL PostMessage(
    UINT message,
    WPARAM wParam = 0,
    LPARAM lParam = 0);
```

### <a name="parameters"></a>parameters

message<br/>
指定要发布的消息。

*wParam*<br/>
指定其他消息信息。 此参数的内容取决于所发布的消息。

*lParam*<br/>
指定其他消息信息。 此参数的内容取决于所发布的消息。

### <a name="return-value"></a>返回值

如果发送消息，则为非零值;否则为0。

### <a name="remarks"></a>备注

消息队列中的消息通过调用[GetMessage](/windows/win32/api/winuser/nf-winuser-getmessage)或[PeekMessage](/windows/win32/api/winuser/nf-winuser-peekmessagew) Windows 函数来检索。

Windows [PostMessage](/windows/win32/api/winuser/nf-winuser-postmessagew)函数可用于访问其他应用程序。

### <a name="example"></a>示例

  请参阅[AfxGetMainWnd](../../mfc/reference/application-information-and-management.md#afxgetmainwnd)的示例。

##  <a name="postncdestroy"></a>CWnd：:P ostNcDestroy

在窗口销毁后由默认的[OnNcDestroy](#onncdestroy)成员函数调用。

```
virtual void PostNcDestroy();
```

### <a name="remarks"></a>备注

派生类可以将此函数用于自定义清理，如删除**this**指针。

##  <a name="precreatewindow"></a>CWnd：:P reCreateWindow

在创建附加到此 `CWnd` 对象的 Windows 窗口之前由框架调用。

```
virtual BOOL PreCreateWindow(CREATESTRUCT& cs);
```

### <a name="parameters"></a>parameters

*站*<br/>
[CREATESTRUCT](/windows/win32/api/winuser/ns-winuser-createstructw)结构。

### <a name="return-value"></a>返回值

如果应继续创建窗口，则为非零值;0表示创建失败。

### <a name="remarks"></a>备注

> [!WARNING]
> 如果菜单为 NULL，并且样式包含 WS_CHILD，`CWnd::PreCreateWindow` 现在会将*cs*的 hMenu 成员分配给**this**指针。 要获得正确的功能，请确保对话框控件的 ID 不是 NULL。
>
> 此更改修复了托管/本机互操作方案中的崩溃。 `CWnd::Create` 中的跟踪语句会对问题的开发人员发出警报。

切勿直接调用此函数。

此函数的默认实现将检查 NULL 窗口类名称并替换为适当的默认值。 重写此成员函数以在创建窗口之前修改 `CREATESTRUCT` 结构。

派生自 `CWnd` 的每个类都将其自己的功能添加到其重写 `PreCreateWindow`中。 按照设计，不会记录这些 `PreCreateWindow` 派生。 若要确定适用于每个类和样式之间相互依赖关系的样式，可以检查应用程序的基类的 MFC 源代码。 如果选择重写 `PreCreateWindow,` 可以确定应用程序的基类中使用的样式是否通过使用从 MFC 源代码收集的信息提供所需的功能。

有关更改窗口样式的详细信息，请参阅[更改 MFC 创建的窗口的样式](../../mfc/changing-the-styles-of-a-window-created-by-mfc.md)。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#112](../../mfc/reference/codesnippet/cpp/cwnd-class_53.cpp)]

##  <a name="presubclasswindow"></a>CWnd：:P reSubclassWindow

此成员函数由框架调用，以允许在将该窗口细分为子类之前执行其他必要的子类。

```
virtual void PreSubclassWindow();
```

### <a name="remarks"></a>备注

重写此成员函数可允许控件的动态子类化。 这是一种高级的可重写。

##  <a name="pretranslatemessage"></a>CWnd：:P reTranslateMessage

在将窗口消息发送到 [TranslateMessage](../../mfc/reference/cwinapp-class.md) 和 [DispatchMessage](/windows/win32/api/winuser/nf-winuser-translatemessage) Windows 函数之前，由 [CWinApp](/windows/win32/api/winuser/nf-winuser-dispatchmessage) 类用于对此消息进行转换。

```
virtual BOOL PreTranslateMessage(MSG* pMsg);
```

### <a name="parameters"></a>parameters

*pMsg*<br/>
指向包含要处理的[消息的消息结构。](/windows/win32/api/winuser/ns-winuser-msg)

### <a name="return-value"></a>返回值

如果消息已转换且不应被调度，则为非零值;如果消息未翻译并且应被调度，则为0。

##  <a name="print"></a>CWnd：:P rint

调用此成员函数以在指定的设备上下文中绘制当前窗口，最常见的情况是打印机设备上下文。

```
void Print(
    CDC* pDC,
    DWORD dwFlags) const;
```

### <a name="parameters"></a>parameters

*pDC*<br/>
一个指向设备上下文的指针。

dwFlags<br/>
指定绘图选项。 此参数可以是以下一个或多个标志：

- PRF_CHECKVISIBLE 仅当窗口可见时才绘制它。

- PRF_CHILDREN 绘制所有可见的子窗口。

- PRF_CLIENT 绘制窗口的工作区。

- PRF_ERASEBKGND 在绘制窗口之前擦除背景。

- PRF_NONCLIENT 绘制窗口的非工作区。

- PRF_OWNED 绘制所有拥有的窗口。

### <a name="remarks"></a>备注

[CWnd：:D efwindowproc](#defwindowproc)函数根据指定的绘制选项处理此消息：

- 如果指定 PRF_CHECKVISIBLE 并且窗口不可见，则不执行任何操作。

- 如果指定了 PRF_NONCLIENT，请在给定的设备上下文中绘制非工作区。

- 如果指定了 PRF_ERASEBKGND，请向窗口发送[WM_ERASEBKGND](/windows/win32/winmsg/wm-erasebkgnd)消息。

- 如果指定了 PRF_CLIENT，请向窗口发送[WM_PRINTCLIENT](/windows/win32/gdi/wm-printclient)消息。

- 如果设置 PRF_CHILDREN，则发送每个可见的子窗口[WM_PRINT](/windows/win32/gdi/wm-print)消息。

- 如果设置 PRF_OWNED，则向每个可见的窗口发送 WM_PRINT 消息。

##  <a name="printclient"></a>CWnd：:P rintClient

调用此成员函数以在指定的设备上下文（通常是打印机设备上下文）中绘制任何窗口。

```
void PrintClient(
    CDC* pDC,
    DWORD dwFlags) const;
```

### <a name="parameters"></a>parameters

*pDC*<br/>
一个指向设备上下文的指针。

dwFlags<br/>
指定绘图选项。 此参数可以是以下一个或多个标志：

- PRF_CHECKVISIBLE 仅当窗口可见时才绘制它。

- PRF_CHILDREN 绘制所有可见的子窗口。

- PRF_CLIENT 绘制窗口的工作区。

- PRF_ERASEBKGND 在绘制窗口之前擦除背景。

- PRF_NONCLIENT 绘制窗口的非工作区。

- PRF_OWNED 绘制所有拥有的窗口。

##  <a name="printwindow"></a>CWnd：:P rintWindow

将可视窗口复制到指定设备上下文（通常是打印机设备上下文）。

```
BOOL PrintWindow(
    CDC* pDC,
    UINT nFlags) const;
```

### <a name="parameters"></a>parameters

*pDC*<br/>
指向要打印到的设备上下文的指针。

*nFlags*<br/>
指定绘图选项。 有关可能值的列表，请参阅[PrintWindow](/windows/win32/api/winuser/nf-winuser-printwindow)。

### <a name="return-value"></a>返回值

如果函数成功，则为非零值；否则为

### <a name="remarks"></a>备注

此成员函数模拟函数[PrintWindow](/windows/win32/api/winuser/nf-winuser-printwindow)的功能，如 Windows SDK 中所述。

##  <a name="redrawwindow"></a>CWnd：： RedrawWindow

更新给定窗口的工作区中指定的矩形或区域。

```
BOOL RedrawWindow(
    LPCRECT lpRectUpdate = NULL,
    CRgn* prgnUpdate = NULL,
    UINT flags = RDW_INVALIDATE | RDW_UPDATENOW | RDW_ERASE);
```

### <a name="parameters"></a>parameters

*lpRectUpdate*<br/>
指向包含更新矩形坐标的[RECT 结构](/windows/win32/api/windef/ns-windef-rect)。 如果*prgnUpdate*包含有效的区域句柄，则忽略此参数。

*prgnUpdate*<br/>
标识更新区域。 如果*prgnUpdate*和*LPRECTUPDATE*都为 NULL，则会将整个工作区添加到更新区域。

*flag*<br/>
以下标志用于使窗口无效：

- RDW_ERASE 导致窗口在重画时接收[WM_ERASEBKGND](/windows/win32/winmsg/wm-erasebkgnd)消息。 还必须指定 RDW_INVALIDATE 标志;否则 RDW_ERASE 不起作用。

- RDW_FRAME 导致窗口的非工作区的任何部分与更新区域相交以接收[WM_NCPAINT](/windows/win32/gdi/wm-ncpaint)消息。 还必须指定 RDW_INVALIDATE 标志;否则 RDW_FRAME 不起作用。

- RDW_INTERNALPAINT 导致[WM_PAINT](/windows/win32/gdi/wm-paint)消息发布到窗口，而不考虑窗口是否包含无效区域。

- RDW_INVALIDATE 使*lpRectUpdate*或*prgnUpdate*无效（只有一个可能不为 NULL）。 如果两者都为 NULL，则整个窗口均无效。

以下标志用于验证窗口：

- RDW_NOERASE 会取消任何挂起的 WM_ERASEBKGND 消息。

- RDW_NOFRAME 会取消任何挂起的 WM_NCPAINT 消息。 此标志必须与 RDW_VALIDATE 一起使用，并且通常与 RDW_NOCHILDREN 一起使用。 应谨慎使用此选项，因为它可以防止窗口的各个部分正确绘制。

- RDW_NOINTERNALPAINT 会取消任何挂起的内部 WM_PAINT 消息。 此标志不会影响由无效区域产生 WM_PAINT 消息。

- RDW_VALIDATE 验证*lpRectUpdate*或*prgnUpdate* （只有一个可以为 NULL）。 如果两者都为 NULL，则验证整个窗口。 此标志不会影响内部 WM_PAINT 消息。

当发生重画时，下列标志控件。 除非指定了其中一位，否则 `RedrawWindow` 函数不会执行绘制。

- RDW_ERASENOW 会导致受影响的窗口（如 RDW_ALLCHILDREN 和 RDW_NOCHILDREN 标志所指定）在函数返回之前接收 WM_NCPAINT 和 WM_ERASEBKGND 消息（如有必要）。 WM_PAINT 消息将被延迟。

- RDW_UPDATENOW 会导致受影响的窗口（如 RDW_ALLCHILDREN 和 RDW_NOCHILDREN 标志所指定）在函数返回之前接收 WM_NCPAINT、WM_ERASEBKGND 和 WM_PAINT 消息。

默认情况下，受 `RedrawWindow` 函数影响的窗口取决于指定的窗口是否具有 WS_CLIPCHILDREN 样式。 WS_CLIPCHILDREN 窗口的子窗口不受影响。 但是，在遇到 WS_CLIPCHILDREN 窗口之前，不 WS_CLIPCHILDREN windows 的窗口将以递归方式进行验证或无效。 以下标志控制哪些窗口受 `RedrawWindow` 函数影响：

- RDW_ALLCHILDREN 包括重画操作中的子窗口（如果有）。

- RDW_NOCHILDREN 从重画操作中排除子窗口（如果有）。

### <a name="return-value"></a>返回值

如果成功重绘窗口，则为非零值;否则为0。

### <a name="remarks"></a>备注

当使用 `RedrawWindow` 成员函数使部分桌面窗口无效时，该窗口不会收到[WM_PAINT](/windows/win32/gdi/wm-paint)消息。 若要重绘桌面，应用程序应使用[CWnd：： ValidateRgn](#validatergn)、 [Cwnd：： InvalidateRgn](#invalidatergn)、 [CWnd：： UpdateWindow](#updatewindow)或[RedrawWindow](/windows/win32/api/winuser/nf-winuser-redrawwindow)

##  <a name="reflectchildnotify"></a>CWnd：： ReflectChildNotify

此消息函数由[OnChildNotify](#onchildnotify)中的框架调用。

```
BOOL ReflectChildNotify(
    UINT message,
    WPARAM wParam,
    LPARAM lParam,
    LRESULT* pResult);
```

### <a name="parameters"></a>parameters

message<br/>
指定要反射的消息。

*wParam*<br/>
指定其他消息相关的信息。

*lParam*<br/>
指定其他消息相关的信息。

*pResult*<br/>
子窗口由父窗口返回的结果。 可以为 NULL。

### <a name="return-value"></a>返回值

如果已反映消息，则为 TRUE;否则为 FALSE。

### <a name="remarks"></a>备注

它是一个帮助器函数，它将*消息*反射到其源。

反射消息直接发送到[CWnd：： OnWndMsg](#onwndmsg)或[CCmdTarget：： OnCmdMsg](../../mfc/reference/ccmdtarget-class.md#oncmdmsg)。

有关消息反射的详细信息，请参阅[处理反射的消息](../../mfc/handling-reflected-messages.md)。

##  <a name="reflectlastmsg"></a>CWnd：： ReflectLastMsg

框架调用此成员函数以反映到子窗口的最后一条消息。

```
static BOOL PASCAL ReflectLastMsg(
    HWND hWndChild,
    LRESULT* pResult = NULL);
```

### <a name="parameters"></a>parameters

*hWndChild*<br/>
子窗口的句柄。

*pResult*<br/>
子窗口由父窗口返回的结果。 可以为 NULL。

### <a name="return-value"></a>返回值

如果消息已处理，则为非零值;否则为0。

### <a name="remarks"></a>备注

如果*hWndChild*标识的窗口是 OLE 控件或永久映射中的窗口，此成员函数将调用[SendChildNotifyLastMsg](#sendchildnotifylastmsg) 。

有关消息反射的详细信息，请参阅[处理反射的消息](../../mfc/handling-reflected-messages.md)。

##  <a name="releasedc"></a>CWnd：： ReleaseDC

释放设备上下文，使其释放供其他应用程序使用。

```
int ReleaseDC(CDC* pDC);
```

### <a name="parameters"></a>parameters

*pDC*<br/>
标识要释放的设备上下文。

### <a name="return-value"></a>返回值

如果成功，则不为 0；否则为 0。

### <a name="remarks"></a>备注

`ReleaseDC` 成员函数的影响取决于设备上下文类型。

应用程序必须调用[GetWindowDC](#getwindowdc)成员函数的每个调用的 `ReleaseDC` 成员函数以及对[GetDC](#getdc)成员函数的每个调用。

##  <a name="repositionbars"></a>CWnd：： RepositionBars

调用以在窗口的工作区中重新定位控件条并调整其大小。

```
void RepositionBars(UINT nIDFirst,
    UINT nIDLast,
    UINT nIDLeftOver,
    UINT nFlag = reposDefault,
    LPRECT lpRectParam = NULL,
    LPCRECT lpRectClient = NULL,
    BOOL bStretch = TRUE) ;
```

### <a name="parameters"></a>parameters

*nIDFirst*<br/>
要重新定位和调整大小的控件条范围中第一个的 ID。

*nIDLast*<br/>
要重新定位和调整大小的控件条范围中最后一个的 ID。

*nIDLeftOver*<br/>
指定填充工作区剩余部分的窗格 ID。

*nFlag*<br/>
可以是下列值之一：

- `CWnd::reposDefault` 执行控件条的布局。 *lpRectParam*未被使用，并且可以为 NULL。

- 不 `CWnd::reposQuery` 控件条的布局。相反， *lpRectParam*已用工作区的大小进行初始化，就好像布局确实已经完成一样。

- `CWnd::reposExtra` 将*lpRectParam*的值添加到*nIDLast*的工作区，并同时执行布局。

*lpRectParam*<br/>
指向[RECT 结构](/windows/win32/api/windef/ns-windef-rect);的使用取决于*nFlag*的值。

*lpRectClient*<br/>
指向包含可用客户端区域的[RECT 结构](/windows/win32/api/windef/ns-windef-rect)。 如果为 NULL，则将使用该窗口的工作区。

*bStretch*<br/>
指示是否应将栏拉伸到帧的大小。

### <a name="remarks"></a>备注

*NIDFirst*和*nIDLast*参数定义要在工作区中重新定位的一系列控件条 id。 *NIDLeftOver*参数指定子窗口（通常为视图）的 ID，该 ID 重新定位并调整大小以填充不是由控件条填充的工作区的其余部分。

##  <a name="runmodalloop"></a>CWnd：： Runmodalloop 调用

调用此成员函数以检索、转换或调度消息，直到[ContinueModal](#continuemodal)返回 FALSE。

```
int RunModalLoop(DWORD dwFlags = 0);
```

### <a name="parameters"></a>parameters

dwFlags<br/>
指定要发送的 Windows 消息。 可以是以下值之一：

- MLF_NOIDLEMSG 不要向父级发送[WM_ENTERIDLE](/windows/win32/dlgbox/wm-enteridle)消息。

- MLF_NOKICKIDLE 不要向窗口发送 WM_KICKIDLE 消息。

- MLF_SHOWONIDLE 在消息队列进入空闲状态时显示窗口。

### <a name="return-value"></a>返回值

指定传递给[EndModalLoop](#endmodalloop)成员函数的*n 结果*参数的值，该参数将用于结束模式循环。

### <a name="remarks"></a>备注

默认情况下，在调用 `EndModalLoop` 后 `ContinueModal` 返回 FALSE。 返回作为*n 结果*提供给 `EndModalLoop`的值。

##  <a name="screentoclient"></a>CWnd：： ScreenToClient

将显示中的给定点或矩形的屏幕坐标转换为客户端坐标。

```
void ScreenToClient(LPPOINT lpPoint) const;  void ScreenToClient(LPRECT lpRect) const;
```

### <a name="parameters"></a>parameters

*lpPoint*<br/>
指向包含要转换的屏幕坐标的[CPoint](../../atl-mfc-shared/reference/cpoint-class.md)对象或[点结构](/windows/win32/api/windef/ns-windef-point)。

*lpRect*<br/>
指向包含要转换的屏幕坐标的[CRect](../../atl-mfc-shared/reference/crect-class.md)对象或[RECT 结构](/windows/win32/api/windef/ns-windef-rect)。

### <a name="remarks"></a>备注

`ScreenToClient` 成员函数将在*lpPoint*或*lpRect*中指定的屏幕坐标替换为客户端坐标。 新坐标相对于 `CWnd` 工作区的左上角。

### <a name="example"></a>示例

  请参阅[CListCtrl：： GetItemRect](../../mfc/reference/clistctrl-class.md#getitemrect)的示例。

##  <a name="scrollwindow"></a>CWnd：： ScrollWindow

滚动当前 `CWnd` 对象的工作区的内容。

```
void ScrollWindow(
    int xAmount,
    int yAmount,
    LPCRECT lpRect = NULL,
    LPCRECT lpClipRect = NULL);
```

### <a name="parameters"></a>parameters

*xAmount*<br/>
指定水平滚动的量（以设备单位为单位）。 此参数必须是负值才能滚动到左侧。

*yAmount*<br/>
指定垂直滚动的量（以设备单位为单位）。 此参数必须为负值才能向上滚动。

*lpRect*<br/>
指向指定要滚动的工作区部分的[CRect](../../atl-mfc-shared/reference/crect-class.md)对象或[RECT 结构](/windows/win32/api/windef/ns-windef-rect)。 如果*lpRect*为 NULL，则滚动整个工作区。 如果光标矩形与滚动矩形相交，则插入符号。

*lpClipRect*<br/>
指向 `CRect` 对象或 `RECT` 结构，它指定要滚动的剪辑矩形。 仅滚动此矩形内的位。 即使在*lpRect*矩形中，也不会影响此矩形以外的位。 如果*lpClipRect*为 NULL，则不会对滚动矩形执行任何剪切。

### <a name="remarks"></a>备注

如果要滚动的 `CWnd` 中插入符号，则 `ScrollWindow` 会自动隐藏插入符号，以防止在滚动完成后将其删除，然后再恢复脱字号。 插入符号位置进行相应调整。

`ScrollWindow` 成员函数所覆盖的区域不会重新绘制，而是组合到当前的 `CWnd` 对象的更新区域中。 应用程序最终将收到一条[WM_PAINT](/windows/win32/gdi/wm-paint)消息，通知其区域需要重新绘制。 若要在滚动完成时重绘未覆盖区域，请在调用 `ScrollWindow`后立即调用[UpdateWindow](#updatewindow)成员函数。

如果*lpRect*为 NULL，则窗口中任何子窗口的位置都将偏移由*xAmount*和*yAmount*指定的量，并且 `CWnd` 中的所有无效（未上色）区域也会偏移。 *lpRect*为 NULL 时，`ScrollWindow` 的速度更快。

如果*lpRect*不为 NULL，则不会更改子窗口的位置，`CWnd` 中的无效区域不会偏移。 若要防止在*lpRect*不为 NULL 时更新问题，请调用 `UpdateWindow` 成员函数以在调用 `ScrollWindow`之前重绘 `CWnd`。

##  <a name="scrollwindowex"></a>CWnd：： ScrollWindowEx

滚动窗口的工作区的内容。

```
int ScrollWindowEx(
    int dx,
    int dy,
    LPCRECT lpRectScroll,
    LPCRECT lpRectClip,
    CRgn* prgnUpdate,
    LPRECT lpRectUpdate,
    UINT flags);
```

### <a name="parameters"></a>parameters

*dx*<br/>
指定水平滚动的量（以设备单位为单位）。 此参数的值必须为负值才能滚动到左侧。

*dy*<br/>
指定垂直滚动的量（以设备单位为单位）。 此参数的值必须为负值才能向上滚动。

*lpRectScroll*<br/>
指向一个[RECT 结构](/windows/win32/api/windef/ns-windef-rect)，它指定要滚动的工作区部分。 如果此参数为 NULL，则滚动整个工作区。

*lpRectClip*<br/>
指向 `RECT` 结构，它指定要滚动的剪辑矩形。 此结构优先于*lpRectScroll*指向的矩形。 仅滚动此矩形内的位。 即使在*lpRectScroll*矩形中，也不会影响此矩形以外的位。 如果此参数为 NULL，则不会对滚动矩形执行剪切。

*prgnUpdate*<br/>
标识修改以保存通过滚动使区域无效的区域。 此参数可以为 NULL。

*lpRectUpdate*<br/>
指向一个 `RECT` 结构，该结构将接收通过滚动而无效的矩形边界。 此参数可以为 NULL。

*flag*<br/>
可以是下列值之一：

- 使用 SW_INVALIDATE 指定 SW_ERASE 时，会通过向窗口发送[WM_ERASEBKGND](/windows/win32/winmsg/wm-erasebkgnd)消息来清除新的无效区域。

- SW_INVALIDATE 使滚动后*prgnUpdate*标识的区域失效。

- SW_SCROLLCHILDREN 将*lpRectScroll*所指向的矩形的所有子窗口滚动到*dx*和*dy*中指定的像素数。 Windows 会将[WM_MOVE](/windows/win32/winmsg/wm-move)消息发送到与*lpRectScroll*相交的所有子窗口，即使它们不移动也是如此。 当滚动子窗口并且光标矩形与滚动矩形相交时，插入符号会重新定位。

### <a name="return-value"></a>返回值

如果函数成功，则返回值为 SIMPLEREGION （矩形无效区域）、COMPLEXREGION （非矩形失效区域; 重叠矩形）或 NULLREGION （无无效区域）;否则，返回值为 ERROR。

### <a name="remarks"></a>备注

此函数类似于[ScrollWindow](/windows/win32/api/winuser/nf-winuser-scrollwindow)函数，还有一些其他功能。

如果未指定[SW_INVALIDATE](/windows/win32/api/winuser/nf-winuser-scrollwindowex)和[SW_ERASE](/windows/win32/api/winuser/nf-winuser-scrollwindowex) ，则 `ScrollWindowEx` 成员函数不会使从中滚动的区域无效。 如果设置了这些标志中的任何一个，`ScrollWindowEx` 会使此区域无效。 在应用程序调用[UpdateWindow](/windows/win32/api/winuser/nf-winuser-updatewindow)成员函数之前，不会更新该区域，调用[RedrawWindow](/windows/win32/api/winuser/nf-winuser-redrawwindow)成员函数（指定[RDW_UPDATENOW](/windows/win32/api/winuser/nf-winuser-redrawwindow)或[RDW_ERASENOW](/windows/win32/api/winuser/nf-winuser-redrawwindow)），或从应用程序队列中检索[WM_PAINT](/windows/win32/gdi/wm-paint)消息。

如果窗口具有[WS_CLIPCHILDREN](/windows/win32/api/winuser/nf-winuser-createwindoww)样式，则*prgnUpdate*和*lpRectUpdate*指定的返回区域表示必须更新的滚动窗口的总区域，其中包括需要更新的子窗口中的所有区域。

如果指定了[SW_SCROLLCHILDREN](/windows/win32/api/winuser/nf-winuser-scrollwindowex)标志，则当滚动部分子窗口时，Windows 将不会正确更新屏幕。 位于源矩形外部的滚动子窗口的一部分将不会被清除，并且不会在其新目标中正确重绘。 使用[DeferWindowPos](/windows/win32/api/winuser/nf-winuser-deferwindowpos) Windows 函数可移动不完全在*lpRectScroll*矩形内的子窗口。 如果设置了 SW_SCROLLCHILDREN 标志并且脱字号矩形与滚动矩形相交，则光标将重新定位。

所有输入和输出坐标（适用于*lpRectScroll*、 *lpRectClip*、 *lpRectUpdate*和*prgnUpdate*）都假设为位于工作区坐标中，无论该窗口是具有 CS_OWNDC 类样式还是 CS_CLASSDC 类样式。 如有必要，请使用[LPtoDP](/windows/win32/api/wingdi/nf-wingdi-lptodp)和[DPtoLP](/windows/win32/api/wingdi/nf-wingdi-dptolp) Windows 函数来转换逻辑坐标和从逻辑坐标转换。

##  <a name="sendchildnotifylastmsg"></a>CWnd：： SendChildNotifyLastMsg

框架调用此成员函数向子窗口提供通知消息，从父窗口，因此子窗口可以处理任务。

```
BOOL SendChildNotifyLastMsg(LRESULT* pResult = NULL);
```

### <a name="parameters"></a>parameters

*pResult*<br/>
子窗口由父窗口返回的结果。

### <a name="return-value"></a>返回值

如果子窗口已处理发送到其父窗口的消息，则为非零值;否则为0。

### <a name="remarks"></a>备注

如果消息是反映的消息，`SendChildNotifyLastMsg` 将当前消息发送到源。

有关消息反射的详细信息，请参阅[处理反射的消息](../../mfc/handling-reflected-messages.md)。

##  <a name="senddlgitemmessage"></a>CWnd：： SendDlgItemMessage

将消息发送到控件。

```
LRESULT SendDlgItemMessage(
    int nID,
    UINT message,
    WPARAM wParam = 0,
    LPARAM lParam = 0);
```

### <a name="parameters"></a>parameters

*nID*<br/>
指定将接收消息的对话框控件的标识符。

message<br/>
指定要发送的消息。

*wParam*<br/>
指定其他消息相关的信息。

*lParam*<br/>
指定其他消息相关的信息。

### <a name="return-value"></a>返回值

指定由控件的窗口过程返回的值; 如果未找到该控件，则为0。

### <a name="remarks"></a>备注

在处理消息前，`SendDlgItemMessage` 成员函数不会返回。

使用 `SendDlgItemMessage` 等同于获取给定控件的 `CWnd`* 并调用[SendMessage](#sendmessage)成员函数。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#113](../../mfc/reference/codesnippet/cpp/cwnd-class_54.cpp)]

##  <a name="sendmessage"></a>CWnd：： SendMessage

将指定的消息发送到此窗口。

```
LRESULT SendMessage(
    UINT message,
    WPARAM wParam = 0,
    LPARAM lParam = 0);
```

### <a name="parameters"></a>parameters

message<br/>
指定要发送的消息。

*wParam*<br/>
指定其他消息相关的信息。

*lParam*<br/>
指定其他消息相关的信息。

### <a name="return-value"></a>返回值

消息处理的结果;其值取决于所发送的消息。

### <a name="remarks"></a>备注

`SendMessage` 成员函数将直接调用窗口过程，并且在该窗口过程处理该消息之前，不会返回。 这与[PostMessage](#postmessage)成员函数不同，后者将消息放入窗口的消息队列，并立即返回。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#101](../../mfc/reference/codesnippet/cpp/cwnd-class_41.cpp)]

##  <a name="sendmessagetodescendants"></a>CWnd：： SendMessageToDescendants

调用此成员函数以将指定的 Windows 消息发送到所有子代窗口。

```
void SendMessageToDescendants(
    UINT message,
    WPARAM wParam = 0,
    LPARAM lParam = 0,
    BOOL bDeep = TRUE,
    BOOL bOnlyPerm = FALSE);
```

### <a name="parameters"></a>parameters

message<br/>
指定要发送的消息。

*wParam*<br/>
指定其他消息相关的信息。

*lParam*<br/>
指定其他消息相关的信息。

*bDeep*<br/>
指定要搜索的级别。 如果为 TRUE，则递归搜索所有子级;如果为 FALSE，则仅搜索直接子级。

*bOnlyPerm*<br/>
指定是否将由临时窗口接收消息。 如果为 TRUE，则临时窗口可以接收消息;如果为 FALSE，则只会收到消息。 有关临时窗口的详细信息，请参阅[技术说明 3](../../mfc/tn003-mapping-of-windows-handles-to-objects.md)。

### <a name="remarks"></a>备注

如果*bDeep*为 FALSE，则仅将消息发送到窗口的直接子级;否则，会将消息发送到所有子代窗口。

如果*bDeep*和*bOnlyPerm*为 TRUE，则搜索将在临时窗口下面继续。 在这种情况下，只会在搜索过程中收到消息。 如果*bDeep*为 FALSE，则仅将消息发送到窗口的直接子项。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#114](../../mfc/reference/codesnippet/cpp/cwnd-class_55.cpp)]

##  <a name="sendnotifymessage"></a>CWnd：： SendNotifyMessage

向窗口发送指定的消息。

```
BOOL SendNotifyMessage(
    UINT message,
    WPARAM wParam,
    LPARAM lParam);
```

### <a name="parameters"></a>parameters

message<br/>
指定要发送的消息。

*wParam*<br/>
指定其他消息相关的信息。

*lParam*<br/>
指定其他消息相关的信息。

### <a name="return-value"></a>返回值

如果该函数成功，则为非 0；否则为 0。

### <a name="remarks"></a>备注

如果窗口是通过调用线程创建的，`SendNotifyMessage` 将调用窗口的窗口过程，并且直到窗口过程处理消息后才返回。 如果窗口是由另一个线程创建的，`SendNotifyMessage` 会将消息传递给窗口过程并立即返回;它不会等待窗口过程完成对消息的处理。

##  <a name="setactivewindow"></a>CWnd：： SetActiveWindow

使 `CWnd` 处于活动状态。

```
CWnd* SetActiveWindow();
```

### <a name="return-value"></a>返回值

之前处于活动状态的窗口。

返回的指针可能是暂时的，不应存储以供以后使用。

### <a name="remarks"></a>备注

`SetActiveWindow` 成员函数应谨慎使用，因为它允许应用程序任意接管活动窗口和输入焦点。 通常，Windows 将负责所有激活。

##  <a name="setcapture"></a>CWnd：： SetCapture

使所有后续的鼠标输入都发送到当前 `CWnd` 对象，而不考虑光标的位置。

```
CWnd* SetCapture();
```

### <a name="return-value"></a>返回值

一个指针，指向先前接收到的所有鼠标输入的窗口对象。 如果没有此类窗口，则为 NULL。 返回的指针可能是暂时的，不应存储以供以后使用。

### <a name="remarks"></a>备注

当 `CWnd` 不再需要所有鼠标输入时，应用程序应调用[ReleaseCapture](/windows/win32/api/winuser/nf-winuser-releasecapture)函数，以便其他窗口可以接收鼠标输入。

捕获鼠标输入时，不会向活动窗口发送 WM_NCHITTEST 或 WM_SETCURSOR 消息。

##  <a name="setcaretpos"></a>CWnd：： SetCaretPos

设置插入符号的位置。

```
static void PASCAL SetCaretPos(POINT point);
```

### <a name="parameters"></a>parameters

*情况*<br/>
指定插入符号的新 x 和 y 坐标（在工作区坐标中）。

### <a name="remarks"></a>备注

仅当当前任务中有一个窗口拥有该 `SetCaretPos` 成员函数时，才会移动该脱字号。 `SetCaretPos` 移动插入符号，无论是否隐藏脱字号。

脱字号是共享资源。 如果不拥有插入符号，则窗口不应移动插入符号。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#115](../../mfc/reference/codesnippet/cpp/cwnd-class_56.cpp)]

##  <a name="setclipboardviewer"></a>CWnd：： SetClipboardViewer

每当更改剪贴板内容时，将此窗口添加到收到通知的窗口链（通过 WM_DRAWCLIPBOARD 消息）。

```
HWND SetClipboardViewer();
```

### <a name="return-value"></a>返回值

如果成功，则为剪贴板查看器链中下一个窗口的句柄。 应用程序应保存此句柄（它可以存储为成员变量），并在响应剪贴板查看器链消息时使用。

### <a name="remarks"></a>备注

作为剪贴板查看器链一部分的窗口必须对[WM_DRAWCLIPBOARD](#ondrawclipboard)、 [WM_CHANGECBCHAIN](#onchangecbchain)和[WM_DESTROY](#ondestroy)消息做出响应，并将消息传递到链中的下一个窗口。

此成员函数向窗口发送 WM_DRAWCLIPBOARD 消息。 由于尚未返回剪贴板查看器链中下一个窗口的句柄，因此应用程序不应传递到 `SetClipboardViewer`的调用期间收到的 WM_DRAWCLIPBOARD 消息。

若要从剪贴板查看器链中移除自身，应用程序必须调用[ChangeClipboardChain](#changeclipboardchain)成员函数。

##  <a name="setdlgctrlid"></a>CWnd：： SetDlgCtrlID

将窗口的窗口 ID 或控件 ID 设置为新值。

```
int SetDlgCtrlID(int nID);
```

### <a name="parameters"></a>parameters

*nID*<br/>
要为控件的标识符设置的新值。

### <a name="return-value"></a>返回值

窗口的以前标识符（如果成功）;否则为0。

### <a name="remarks"></a>备注

窗口可以是任何子窗口，而不是对话框中的控件。 该窗口不能是顶级窗口。

##  <a name="setdlgitemint"></a>CWnd：： SetDlgItemInt

将对话框中给定控件的文本设置为指定整数值的字符串表示形式。

```
void SetDlgItemInt(
    int nID,
    UINT nValue,
    BOOL bSigned = TRUE);
```

### <a name="parameters"></a>parameters

*nID*<br/>
指定要更改的控件的整数 ID。

*N 值*<br/>
指定用于生成项文本的整数值。

*bSigned*<br/>
指定整数值是否已签名或未签名。 如果此参数为 TRUE，则对*n 值*进行签名。 如果此参数为 TRUE 且*n 值*小于0，则在字符串中的第一个数字前面放置一个负号。 如果此参数为 FALSE，则*n 值*为无符号。

### <a name="remarks"></a>备注

`SetDlgItemInt` 将[WM_SETTEXT](/windows/win32/winmsg/wm-settext)消息发送到给定的控件。

### <a name="example"></a>示例

  请参阅[CWnd：： SetDlgItemText](#setdlgitemtext)的示例。

##  <a name="setdlgitemtext"></a>CWnd：： SetDlgItemText

设置窗口或对话框所拥有控件的标题或文本。

```
void SetDlgItemText(
    int nID,
    LPCTSTR lpszString);
```

### <a name="parameters"></a>parameters

*nID*<br/>
标识要设置其文本的控件。

*lpszString*<br/>
指向[CString](../../atl-mfc-shared/reference/cstringt-class.md)对象或以 null 结尾的字符串，其中包含要复制到控件的文本。

### <a name="remarks"></a>备注

`SetDlgItemText` 将[WM_SETTEXT](/windows/win32/winmsg/wm-settext)消息发送到给定的控件。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#116](../../mfc/reference/codesnippet/cpp/cwnd-class_57.cpp)]

##  <a name="setforegroundwindow"></a>CWnd：： SetForegroundWindow

将创建窗口的线程置于前台，并激活窗口。

```
BOOL SetForegroundWindow();
```

### <a name="return-value"></a>返回值

如果该函数成功，则为非 0；否则为 0。

### <a name="remarks"></a>备注

键盘输入将定向到窗口，并为用户更改各种视觉提示。 前景窗口是用户当前正在使用的窗口。 前景窗口仅适用于顶级窗口（框架窗口或对话框）。

### <a name="example"></a>示例

  请参阅[CWnd：： FindWindow](#findwindow)的示例。

##  <a name="setfocus"></a>CWnd：： SetFocus

声明输入焦点。

```
CWnd* SetFocus();
```

### <a name="return-value"></a>返回值

指向以前具有输入焦点的窗口对象的指针。 如果没有此类窗口，则为 NULL。 返回的指针可能是暂时的，不应存储。

### <a name="remarks"></a>备注

输入焦点将所有后续键盘输入定向到此窗口。 之前有输入焦点的任何窗口都将丢失它。

`SetFocus` 成员函数将[WM_KILLFOCUS](/windows/win32/inputdev/wm-killfocus)消息发送到失去输入焦点的窗口，并向接收输入焦点的窗口发送[WM_SETFOCUS](/windows/win32/inputdev/wm-setfocus)消息。 它还激活窗口或其父级。

如果当前窗口处于活动状态，但没有焦点（即，没有窗口具有焦点），按下的任何键都将生成消息[WM_SYSCHAR](#onsyschar)、 [WM_SYSKEYDOWN](#onsyskeydown)或[WM_SYSKEYUP](#onsyskeyup)。

##  <a name="setfont"></a>CWnd：： SetFont

将 WM_SETFONT 消息发送到窗口以使用指定的字体。

```
void SetFont(
    CFont* pFont,
    BOOL bRedraw = TRUE);
```

### <a name="parameters"></a>parameters

*pFont*<br/>
指向 `CFont` 对象的指针。

*bRedraw*<br/>
如果该窗口在处理 WM_SETFONT 消息后立即重绘，则为 TRUE;否则为 FALSE。

### <a name="remarks"></a>备注

此方法不起作用，除非窗口处理 WM_SETFONT 消息。 派生自的许多 MFC 类 `CWnd` 处理此消息，因为它们附加到包含 WM_SETFONT 消息的消息处理程序的预定义窗口类中。 若要使用此方法，从 `CWnd` 派生的类必须为 WM_SETFONT 消息定义方法处理程序。

##  <a name="seticon"></a>CWnd：： SetIcon

调用此成员函数以将句柄设置为特定图标，由*hIcon*标识。

```
HICON SetIcon(
    HICON hIcon,
    BOOL bBigIcon);
```

### <a name="parameters"></a>parameters

*hIcon*<br/>
上一个图标的句柄。

*bBigIcon*<br/>
如果为 TRUE，则指定32像素 x 32 像素图标;如果为 FALSE，则指定 16 x 16 像素图标。

### <a name="return-value"></a>返回值

图标的图柄。

### <a name="remarks"></a>备注

当注册窗口类时，它会选择一个图标。

### <a name="example"></a>示例

  请参阅[CWnd：： GetSystemMenu](#getsystemmenu)的示例。

##  <a name="setlayeredwindowattributes"></a>CWnd：： SetLayeredWindowAttributes

设置分层窗口的不透明度和透明度颜色键。

```
BOOL SetLayeredWindowAttributes(
    COLORREF crKey,
    BYTE bAlpha,
    DWORD dwFlags);
```

### <a name="parameters"></a>parameters

*crKey*<br/>
指向 COLORREF 值的指针，该值指定在编写分层窗口时要使用的透明度颜色键。 此颜色的窗口绘制的所有像素都将是透明的。 若要生成 COLORREF，请使用 RGB 宏。

*bAlpha*<br/>
用于描述分层窗口的不透明度的 Alpha 值。 有关详细信息，请参阅[BLENDFUNCTION](/windows/win32/api/wingdi/ns-wingdi-blendfunction)结构的 `SourceConstantAlpha` 成员。 当*bAlpha*为0时，窗口是完全透明的。 当*bAlpha*为255时，窗口是不透明的。

dwFlags<br/>
指定要执行的操作。 此参数可以是下列值中的一个或多个。 有关可能值的列表，请参阅[SetLayeredWindowAttributes](/windows/win32/api/winuser/nf-winuser-setlayeredwindowattributes)。

### <a name="return-value"></a>返回值

如果函数成功，则为非零值；否则为

### <a name="remarks"></a>备注

此成员函数模拟函数[SetLayeredWindowAttributes](/windows/win32/api/winuser/nf-winuser-setlayeredwindowattributes)的功能，如 Windows SDK 中所述。

##  <a name="setmenu"></a>CWnd：： SetMenu

将当前菜单设置为指定的菜单。

```
BOOL SetMenu(CMenu* pMenu);
```

### <a name="parameters"></a>parameters

*pMenu*<br/>
标识新菜单。 如果此参数为 NULL，则将删除当前菜单。

### <a name="return-value"></a>返回值

如果菜单发生了更改，则为非零值;否则为0。

### <a name="remarks"></a>备注

导致重绘窗口以反映菜单更改。

`SetMenu` 不会销毁上一个菜单。 应用程序应调用[CMenu：:D estroymenu](../../mfc/reference/cmenu-class.md#destroymenu)成员函数来完成此任务。

### <a name="example"></a>示例

  请参阅[CMenu：： LoadMenu](../../mfc/reference/cmenu-class.md#loadmenu)的示例。

##  <a name="setowner"></a>CWnd：： SetOwner

将当前窗口的所有者设置为指定的窗口对象。

```
void SetOwner(CWnd* pOwnerWnd);
```

### <a name="parameters"></a>parameters

*pOwnerWnd*<br/>
标识 window 对象的新所有者。 如果此参数为 NULL，则窗口对象没有所有者。

### <a name="remarks"></a>备注

然后，此所有者可以接收来自当前窗口对象的命令消息。 默认情况下，当前窗口的父级为其所有者。

通常，可以在与窗口层次结构无关的窗口对象之间建立连接。 例如， [CToolBar](../../mfc/reference/ctoolbar-class.md)向其所有者（而不是其父代）发送通知。 这允许工具栏在向另一个窗口（如就地框架窗口）发送通知时成为一个窗口（如 OLE 容器应用程序窗口）的子级。 此外，当在就地编辑过程中停用或激活服务器窗口时，框架窗口拥有的任何窗口都将隐藏或显示。 使用对 `SetOwner`的调用来显式设置此所有权。

此功能的所有权概念与[GetWindow](/windows/win32/api/winuser/nf-winuser-getwindow)的所有权概念不同。

##  <a name="setparent"></a>CWnd：： SetParent

更改子窗口的父窗口。

```
CWnd* SetParent(CWnd* pWndNewParent);
```

### <a name="parameters"></a>parameters

*pWndNewParent*<br/>
标识新的父窗口。

### <a name="return-value"></a>返回值

如果成功，则为指向上一个父窗口对象的指针。 返回的指针可能是暂时的，不应存储以供以后使用。

### <a name="remarks"></a>备注

如果子窗口可见，则 Windows 将执行相应的重绘和重绘。

##  <a name="setproperty"></a>CWnd：： SetProperty

调用此成员函数可设置由*dwDispID*指定的 OLE 控件属性。

```
void AFX_CDECL SetProperty(
    DISPID dwDispID,
    VARTYPE vtProp, ...);
```

### <a name="parameters"></a>parameters

*dwDispID*<br/>
标识要设置的属性。

*vtProp*<br/>
指定要设置的属性的类型。 有关可能的值，请参阅备注部分 [COleDispatchDriver::InvokeHelper](../../mfc/reference/coledispatchdriver-class.md#invokehelper)。

*...*<br/>
由*vtProp*指定的类型的单个参数。

### <a name="remarks"></a>备注

> [!NOTE]
> 只应在表示 OLE 控件的 `CWnd` 对象上调用此函数。

有关将此成员函数与 OLE 控件容器一起使用的详细信息，请参阅文章[Activex 控件容器：对 Activex 控件容器中的 Activex 控件编程](../../mfc/programming-activex-controls-in-a-activex-control-container.md)。

##  <a name="setredraw"></a>CWnd：： SetRedraw

应用程序调用 `SetRedraw` 以允许重绘更改或防止重绘更改。

```
void SetRedraw(BOOL bRedraw = TRUE);
```

### <a name="parameters"></a>parameters

*bRedraw*<br/>
指定重绘标志的状态。 如果此参数为 TRUE，则设置重绘标志;如果为 FALSE，则清除标志。

### <a name="remarks"></a>备注

此成员函数设置或清除重绘标志。 清除重绘标志后，将不会在每次更改后更新内容，并且在设置重绘标志之前，不会重新绘制内容。 例如，需要向列表框添加几个项的应用程序可以清除重绘标志，添加项，然后设置重绘标志。 最后，应用程序可以调用[无效](#invalidate)或[InvalidateRect](#invalidaterect)成员函数，以使列表框重新绘制。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#117](../../mfc/reference/codesnippet/cpp/cwnd-class_58.cpp)]

##  <a name="setscrollinfo"></a>CWnd：： SetScrollInfo

调用此成员函数可设置 `SCROLLINFO` 结构对滚动条所维护的信息。

```
BOOL SetScrollInfo(
    int nBar,
    LPSCROLLINFO lpScrollInfo,
    BOOL bRedraw = TRUE);
```

### <a name="parameters"></a>parameters

*nBar*<br/>
指定滚动条是控件还是窗口的非工作区的一部分。 如果它是非工作区的一部分，nBar 还指示是水平还是垂直定位滚动条。 它必须是以下各项之一：

- SB_CTL 包含滚动条控件的参数。 `m_hWnd` 数据成员必须是滚动条控件的句柄。

- SB_HORZ 指定窗口是水平滚动条。

- SB_VERT 指定窗口是垂直滚动条。

*lpScrollInfo*<br/>
指向[SCROLLINFO](/windows/win32/api/winuser/ns-winuser-scrollinfo)结构的指针。 有关此结构的详细信息，请参阅 Windows SDK。

*bRedraw*<br/>
指定是否应重绘滚动条以反映新位置。 如果*bRedraw*为 TRUE，则将重绘滚动条。 如果该值为 FALSE，则不会重新绘制。 默认情况下，将重新绘制滚动条。

### <a name="return-value"></a>返回值

如果成功，则返回 TRUE。 否则为 FALSE。

### <a name="remarks"></a>备注

[SCROLLINFO](/windows/win32/api/winuser/ns-winuser-scrollinfo)结构包含滚动条的相关信息，包括最小和最大滚动位置、页面大小和滚动框（滚动块）的位置。 有关更改结构默认值的详细信息，请参阅 Windows SDK 中的 `SCROLLINFO` 结构主题。

MFC Windows 消息处理程序（指示滚动条位置， [CWnd：： OnHScroll](#onhscroll)和[CWnd：： OnVScroll](#onvscroll)）仅提供16位的位置数据。 [GetScrollInfo](#getscrollinfo)和 `SetScrollInfo` 提供32位的滚动条位置数据。 因此，应用程序在处理 `CWnd::OnHScroll` 或 `CWnd::OnVScroll` 以获取32位滚动条位置数据时，可以调用 `GetScrollInfo`。

> [!NOTE]
> [CWnd：： GetScrollInfo](#getscrollinfo)使应用程序能够使用32位滚动条位置。

##  <a name="setscrollpos"></a>CWnd：： SetScrollPos

设置滚动框的当前位置，并在需要时重绘滚动条以反映滚动框的新位置。

```
int SetScrollPos(
    int nBar,
    int nPos,
    BOOL bRedraw = TRUE);
```

### <a name="parameters"></a>parameters

*nBar*<br/>
指定要设置的滚动条。 此参数可以是下列参数之一：

- SB_HORZ 将滚动框的位置设置为窗口的水平滚动条。

- SB_VERT 将滚动框的位置设置为窗口的垂直滚动条。

*nPos*<br/>
指定滚动框的新位置。 它必须在滚动范围内。

*bRedraw*<br/>
指定是否应重新绘制滚动条以反映新的滚动框位置。 如果此参数为 TRUE，则将重新绘制滚动条;如果为 FALSE，则不重新绘制滚动条。

### <a name="return-value"></a>返回值

滚动框的上一个位置。

### <a name="remarks"></a>备注

将*bRedraw*设置为 FALSE 时，会在后续调用另一个函数时重新绘制滚动条。

##  <a name="setscrollrange"></a>CWnd：： SetScrollRange

设置给定滚动条的最小和最大位置值。

```
void SetScrollRange(
    int nBar,
    int nMinPos,
    int nMaxPos,
    BOOL bRedraw = TRUE);
```

### <a name="parameters"></a>parameters

*nBar*<br/>
指定要设置的滚动条。 此参数可以是下列值之一：

- SB_HORZ 设置窗口的水平滚动条的范围。

- SB_VERT 设置窗口垂直滚动条的范围。

*nMinPos*<br/>
指定最小滚动位置。

*nMaxPos*<br/>
指定最大滚动位置。

*bRedraw*<br/>
指定是否应重绘滚动条以反映更改。 如果*bRedraw*为 TRUE，则将重绘滚动条;如果为 FALSE，则不重新绘制滚动条。

### <a name="remarks"></a>备注

它还可用于隐藏或显示标准滚动条。

在处理滚动条通知消息时，应用程序不应调用此函数隐藏滚动条。

如果 `SetScrollRange` 对的调用立即调用[SetScrollPos](#setscrollpos)成员函数，则 `SetScrollPos` 成员函数中的*bRedraw*参数应为0，以防止滚动条绘制两次。

标准滚动条的默认范围为0至100。 滚动条控件的默认范围为空（ *nMinPos*和*nMaxPos*值都为0）。 *NMinPos*和*nMaxPos*指定的值之间的差异不得大于 INT_MAX。

##  <a name="settimer"></a>CWnd：： SetTimer

安装系统计时器。

```
UINT_PTR SetTimer(
    UINT_PTR nIDEvent,
    UINT nElapse,
    void (CALLBACK* lpfnTimer)(HWND,
    UINT,
    UINT_PTR,
    DWORD));
```

### <a name="parameters"></a>parameters

*nIDEvent*<br/>
指定一个非零计时器标识符。 如果计时器标识符是唯一的，则 `SetTimer`返回此相同的值。 否则，`SetTimer` 会确定新的唯一值，并返回。 对于窗口计时器（具有 NULL 回调函数），该值必须仅对与当前窗口关联的其他 windows 计时器是唯一的。 对于回调计时器，此值对于所有进程中的所有计时器都必须是唯一的。 因此，当您创建回调计时器时，返回的值可能与您指定的值不同。

*nElapse*<br/>
指定超时值（以毫秒为单位）。

*lpfnTimer*<br/>
指定用于处理[WM_TIMER](/windows/win32/winmsg/wm-timer)消息的应用程序提供的 `TimerProc` 回调函数的地址。 如果此参数为 NULL，则 WM_TIMER 消息将置于应用程序的消息队列中，并由 `CWnd` 对象进行处理。

### <a name="return-value"></a>返回值

如果函数成功，则为新的计时器的计时器标识符。 此值可以是也可以不等于通过*nIDEvent*参数传入的值。 应用程序应始终向[KillTimer](#killtimer)成员函数传递返回值以终止计时器。 如果成功，则为非零值;否则为0。

### <a name="remarks"></a>备注

指定了间隔值，并且每次间隔结束时，系统会向安装应用程序的安装消息队列发送 WM_TIMER 消息，或将消息传递到应用程序定义的 `TimerProc` 回调函数。

*LpfnTimer*回调函数不需要 `TimerProc`命名，但必须将其声明为 static，并按如下所示定义。

```
void CALLBACK TimerProc(
    HWND hWnd,   // handle of CWnd that called SetTimer
    UINT nMsg,   // WM_TIMER
    UINT_PTR nIDEvent,   // timer identification
    DWORD dwTime    // system time);
```

### <a name="example"></a>示例

此示例使用 `CWnd::SetTimer`、`CWnd::OnTimer`和 `CWnd::KillTimer` 来处理 WM_TIMER 消息。 第一个计时器设置为每隔2秒向主框架窗口发送一条 WM_TIMER 消息 `OnStartTimer`。 `OnTimer` 事件处理程序处理主框架窗口 WM_TIMER 消息。 此方法导致 PC 扬声器每隔2秒发出嘟嘟声。 第二个计时器每3.75 秒向回调函数发送一条消息。 `OnStopTimer` 将通过为每个计时器 ID 调用 `CWnd::KillTimer` 来停止两个计时器。

[!code-cpp[NVC_MFCWindowing#118](../../mfc/reference/codesnippet/cpp/cwnd-class_59.cpp)]

##  <a name="setwindowcontexthelpid"></a>CWnd：： SetWindowContextHelpId

调用此成员函数可将帮助上下文标识符与指定窗口关联。

```
BOOL SetWindowContextHelpId(DWORD dwContextHelpId);
```

### <a name="parameters"></a>parameters

*dwContextHelpId*<br/>
帮助上下文标识符。

### <a name="return-value"></a>返回值

如果该函数成功，则为非 0；否则为 0。

### <a name="remarks"></a>备注

如果子窗口没有帮助上下文标识符，它将继承其父窗口的标识符。 同样，如果拥有的窗口不具有帮助上下文标识符，它将继承其所有者窗口的标识符。 此帮助上下文标识符的继承允许应用程序仅为对话框及其所有控件设置一个标识符。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#119](../../mfc/reference/codesnippet/cpp/cwnd-class_60.cpp)]

##  <a name="setwindowplacement"></a>CWnd：： SetWindowPlacement

设置窗口的显示状态以及正常（已还原）、最小化和最大化位置。

```
BOOL SetWindowPlacement(const WINDOWPLACEMENT* lpwndpl);
```

### <a name="parameters"></a>parameters

*lpwndpl*<br/>
指向指定新显示状态和位置的[WINDOWPLACEMENT](/windows/win32/api/winuser/ns-winuser-windowplacement)结构。

### <a name="return-value"></a>返回值

如果该函数成功，则为非 0；否则为 0。

##  <a name="setwindowpos"></a>CWnd：： SetWindowPos

更改子窗口、弹出窗口和顶级窗口的大小、位置和 Z 顺序。

```
BOOL SetWindowPos(
    const CWnd* pWndInsertAfter,
    int x,
    int y,
    int cx,
    int cy,
    UINT nFlags);
```

### <a name="parameters"></a>parameters

*pWndInsertAfter*<br/>
标识将在 Z 顺序中此 `CWnd` 对象之前（高于）的 `CWnd` 对象。 此参数可以是指向 `CWnd` 的指针，也可以是指向以下值之一的指针：

- `wndBottom` 将窗口置于 Z 顺序的底部。 如果此 `CWnd` 是最顶层窗口，则窗口将失去其最靠前的状态;系统将窗口放在所有其他窗口的底部。

- `wndTop` 将窗口置于 Z 顺序的顶部。

- `wndTopMost` 将窗口置于所有非最顶层窗口的上方。 即使停用窗口，该窗口仍保持其最顶部的位置。

- `wndNoTopMost` 将窗口重新定位到所有非最顶层窗口的顶部（即，在所有最顶层的窗口后面）。 如果窗口已经是不最顶端的窗口，则此标志不起作用。

有关如何使用此参数的规则，请参阅本主题的 "备注" 部分。

*x*<br/>
指定窗口左侧的新位置。

*y*<br/>
指定窗口顶部的新位置。

*cx*<br/>
指定窗口的新宽度。

*cy*<br/>
指定窗口的新高度。

*nFlags*<br/>
指定大小调整和定位选项。 此参数可以是以下标志的组合：

- SWP_DRAWFRAME 在窗口周围绘制一帧（在创建窗口时定义）。

- SWP_FRAMECHANGED 向窗口发送 WM_NCCALCSIZE 消息，即使未更改窗口的大小。 如果未指定此标志，则仅当更改窗口的大小时，才会发送 WM_NCCALCSIZE。

- SWP_HIDEWINDOW 隐藏窗口。

- SWP_NOACTIVATE 不会激活窗口。 如果未设置此标志，则将激活窗口并将其移动到最顶层或非最顶层的组（具体取决于*pWndInsertAfter*参数的设置）。

- SWP_NOCOPYBITS 放弃工作区的全部内容。 如果未指定此标志，则在调整窗口大小或重新定位窗口后，将保存工作区的有效内容，并将其复制回工作区。

- SWP_NOMOVE 保留当前位置（忽略*x*和*y*参数）。

- SWP_NOOWNERZORDER 不会更改所有者窗口在 Z 顺序中的位置。

- SWP_NOREDRAW 不重绘更改。 如果设置了此标志，则不会进行任何类型的重画。 这适用于工作区、非工作区（包括标题和滚动条）以及被移动窗口导致的父窗口的任何部分。 设置此标志后，应用程序必须显式失效或重绘必须重绘的窗口和父窗口的任何部分。

- SWP_NOREPOSITION 与 SWP_NOOWNERZORDER 相同。

- SWP_NOSENDCHANGING 阻止窗口接收 WM_WINDOWPOSCHANGING 消息。

- SWP_NOSIZE 保留当前大小（忽略*cx*和*cy*参数）。

- SWP_NOZORDER 保留当前排序（忽略*pWndInsertAfter*）。

- SWP_SHOWWINDOW 显示窗口。

### <a name="return-value"></a>返回值

如果函数成功，则为非零值;否则为0。

### <a name="remarks"></a>备注

Windows 根据其 Z 顺序在屏幕上进行排序;位于 Z 顺序顶部的窗口将显示在顺序中所有其他窗口的顶部。

子窗口的所有坐标都是工作区坐标（相对于父窗口的工作区的左上角）。

通过将*pWndInsertAfter*参数设置为 **& wndTopMost** ，并确保未设置 SWP_NOZORDER 标志，或者通过设置窗口的 Z 顺序使其高于任何现有的最顶层窗口，可以将窗口移动到 Z 顺序的顶部。 当非最顶部的窗口最顶层时，还会使其拥有的窗口最顶层。 不会更改其所有者。

如果最顶部的窗口重新定位到 Z 顺序的底部（ **& wndBottom**）或在任何非最顶端窗口之后，则该窗口将不再最顶层。 当最顶部的窗口不是最顶端时，其所有所有者及其拥有的窗口也会成为非最顶层的窗口。

如果 SWP_NOACTIVATE 和 SWP_NOZORDER 均未指定（即，当应用程序请求同时激活窗口并按指定 Z 顺序排列）时， *pWndInsertAfter*中指定的值仅在以下情况下使用：

- *PWndInsertAfter*参数中未指定 **& WndTopMost**和 **& wndNoTopMost** 。

- 此窗口不是活动窗口。

应用程序无法激活非活动窗口，也不会将其带到 Z 顺序的顶部。 应用程序可以不受限制地更改已激活窗口的 Z 顺序。

不最顶部的窗口可能拥有最顶层的窗口，但反之则不然。 由最顶层窗口拥有的任何窗口（例如，对话框）本身都是一种最顶部的窗口，以确保所有拥有的窗口保持在其所有者之上。

对于 Windows 版本3.1 及更高版本，可以将窗口移动到 Z 顺序的顶层并通过设置其 WS_EX_TOPMOST 样式进行锁定。 即使在停用后，这种最顶部的窗口仍保持最顶端的位置。 例如，选择 WinHelp Always On Top 命令会使 "帮助" 窗口最顶层，然后在返回到应用程序时保持可见。

若要创建最顶层窗口，请调用*pWndInsertAfter*参数等于 **& wndTopMost**的 `SetWindowPos`，或在创建窗口时设置 WS_EX_TOPMOST 样式。

如果 Z 顺序包含具有 WS_EX_TOPMOST 样式的任何窗口，则使用 **& wndTopMost**值移动的窗口将置于所有非最顶端窗口的顶部，但在所有最顶层窗口的下面。 当应用程序激活不具有 WS_EX_TOPMOST 位的非活动窗口时，该窗口将移动到所有非最顶层窗口之上，但在任何最顶层窗口的下面。

如果当*pWndInsertAfter*参数 **& wndBottom**并且 `CWnd` 是最顶层的窗口时调用 `SetWindowPos`，则窗口将失去其最上端状态（WS_EX_TOPMOST 已清除），系统会将该窗口放在 Z 顺序的底部。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#120](../../mfc/reference/codesnippet/cpp/cwnd-class_61.cpp)]

##  <a name="setwindowrgn"></a>CWnd：： SetWindowRgn

调用此成员函数设置窗口区域。

```
int SetWindowRgn(
    HRGN hRgn,
    BOOL bRedraw);
```

### <a name="parameters"></a>parameters

*hRgn*<br/>
区域的句柄。

*bRedraw*<br/>
如果为 TRUE，则操作系统在设置区域后重绘窗口;否则，它不会。 通常，如果窗口可见，请将*bRedraw*设置为 TRUE。 如果设置为 TRUE，系统将向窗口发送 WM_WINDOWPOSCHANGING 和 WM_WINDOWPOSCHANGED 消息。

### <a name="return-value"></a>返回值

如果该函数成功，则返回值为非零值。 如果函数失败，则返回值为零。

### <a name="remarks"></a>备注

窗口的窗口区域坐标相对于窗口的左上角，而不是窗口的工作区。

成功调用 `SetWindowRgn`后，操作系统将拥有区域句柄*hRgn*指定的区域。 操作系统不会创建区域的副本，因此不要再对此区域句柄进行任何函数调用，也不要关闭此区域句柄。

##  <a name="setwindowtext"></a>CWnd：： SetWindowText

将窗口的标题设置为指定的文本。

```
void SetWindowText(LPCTSTR lpszString);
```

### <a name="parameters"></a>parameters

*lpszString*<br/>
指向[CString](../../atl-mfc-shared/reference/cstringt-class.md)对象或以 null 结尾的字符串，将其用作新的标题或控件文本。

### <a name="remarks"></a>备注

如果窗口是控件，则会设置控件中的文本。

此函数将导致向此窗口发送[WM_SETTEXT](/windows/win32/winmsg/wm-settext)消息。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#121](../../mfc/reference/codesnippet/cpp/cwnd-class_62.cpp)]

##  <a name="showcaret"></a>CWnd：： ShowCaret

在光标所在位置的当前位置显示插入符号。

```
void ShowCaret();
```

### <a name="remarks"></a>备注

显示之后，插入符号开始自动闪烁。

仅当 `ShowCaret` 成员函数具有当前形状，并且该函数连续两次或多次被隐藏时，才显示脱字号。 如果此窗口不拥有插入符号，则不显示插入符号。

隐藏脱字号是累积的。 如果[HideCaret](#hidecaret)成员函数连续调用了五次，则必须调用 `ShowCaret` 五次以显示插入符号。

脱字号是共享资源。 仅当窗口具有输入焦点或处于活动状态时，才应显示脱字号。

### <a name="example"></a>示例

  请参阅[CWnd：： CreateCaret](#createcaret)的示例。

##  <a name="showownedpopups"></a>CWnd：： ShowOwnedPopups

显示或隐藏此窗口拥有的所有弹出窗口。

```
void ShowOwnedPopups(BOOL bShow = TRUE);
```

### <a name="parameters"></a>parameters

*bShow*<br/>
指定弹出窗口是显示还是隐藏。 如果此参数为 TRUE，则显示所有隐藏的弹出窗口。 如果此参数为 FALSE，则隐藏所有可见的弹出窗口。

### <a name="example"></a>示例

  请参阅[CWnd：： SetWindowPos](#setwindowpos)的示例。

##  <a name="showscrollbar"></a>CWnd：： ShowScrollBar

显示或隐藏滚动条。

```
void ShowScrollBar(
    UINT nBar,
    BOOL bShow = TRUE);
```

### <a name="parameters"></a>parameters

*nBar*<br/>
指定滚动条是控件还是窗口的非工作区的一部分。 如果它是非工作区的一部分， *nBar*还指示是水平还是垂直定位滚动条。 它必须是以下各项之一：

- SB_BOTH 指定窗口的水平滚动条和垂直滚动条。

- SB_HORZ 指定窗口是水平滚动条。

- SB_VERT 指定窗口是垂直滚动条。

*bShow*<br/>
指定 Windows 是显示还是隐藏滚动条。 如果此参数为 TRUE，则显示滚动条;否则，将隐藏滚动条。

### <a name="remarks"></a>备注

在处理滚动条通知消息时，应用程序不应调用 `ShowScrollBar` 隐藏滚动条。

##  <a name="showwindow"></a>CWnd：： ShowWindow

设置窗口的可见性状态。

```
BOOL ShowWindow(int nCmdShow);
```

### <a name="parameters"></a>parameters

*nCmdShow*<br/>
指定如何显示 `CWnd`。 它必须是下列值之一：

- SW_HIDE 隐藏此窗口，并将激活传递到另一个窗口。

- SW_MINIMIZE 最小化窗口并激活系统列表中的顶级窗口。

- SW_RESTORE 激活并显示窗口。 如果窗口已最小化或最大化，Windows 会将其还原为原始大小和位置。

- SW_SHOW 激活窗口并以其当前大小和位置显示窗口。

- SW_SHOWMAXIMIZED 激活窗口并将其显示为最大化窗口。

- SW_SHOWMINIMIZED 激活窗口并将其显示为图标。

- SW_SHOWMINNOACTIVE 将窗口显示为图标。 当前处于活动状态的窗口仍处于活动状态。

- SW_SHOWNA 将以当前状态显示窗口。 当前处于活动状态的窗口仍处于活动状态。

- SW_SHOWNOACTIVATE 按最新的大小和位置显示窗口。 当前处于活动状态的窗口仍处于活动状态。

- SW_SHOWNORMAL 激活并显示窗口。 如果窗口已最小化或最大化，Windows 会将其还原为原始大小和位置。

### <a name="return-value"></a>返回值

如果窗口之前可见，则为非零值;如果 `CWnd` 以前隐藏，则为0。

### <a name="remarks"></a>备注

对于[CWinApp：： m_nCmdShow](../../mfc/reference/cwinapp-class.md#m_ncmdshow)，每个应用程序只能为每个应用程序调用一次 `ShowWindow`。 对 `ShowWindow` 的后续调用必须使用上面列出的值之一，而不是 `CWinApp::m_nCmdShow`指定的值之一。

### <a name="example"></a>示例

  请参阅[CWnd：： CalcWindowRect](#calcwindowrect)的示例。

##  <a name="subclassdlgitem"></a>CWnd：： SubclassDlgItem

调用此成员函数以 "动态划分子控件" 控件从对话框模板创建，并将其附加到此 `CWnd` 对象。

```
BOOL SubclassDlgItem(
    UINT nID,
    CWnd* pParent);
```

### <a name="parameters"></a>parameters

*nID*<br/>
控件的 ID。

*pParent*<br/>
控件的父级（通常是一个对话框）。

### <a name="return-value"></a>返回值

如果该函数成功，则为非 0；否则为 0。

### <a name="remarks"></a>备注

当控件动态细分时，windows 消息将通过 `CWnd`的消息映射进行路由，并首先调用 `CWnd`的类中的消息处理程序。 传递给基类的消息将传递到控件中的默认消息处理程序。

此成员函数将 Windows 控件附加到 `CWnd` 对象并替换控件的 `WndProc` 和 `AfxWndProc` 函数。 函数将旧 `WndProc` 存储在 `GetSuperWndProcAddr` 成员函数返回的位置。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#122](../../mfc/reference/codesnippet/cpp/cwnd-class_63.cpp)]

##  <a name="subclasswindow"></a>CWnd：： SubclassWindow

调用此成员函数以 "动态划分子类" 窗口，并将其附加到此 `CWnd` 对象。

```
BOOL SubclassWindow(HWND hWnd);
```

### <a name="parameters"></a>parameters

*hWnd*<br/>
窗口的句柄。

### <a name="return-value"></a>返回值

如果该函数成功，则为非 0；否则为 0。

### <a name="remarks"></a>备注

当窗口动态产生子类时，windows 消息将通过 `CWnd`的消息映射来路由，并首先调用 `CWnd`的类中的消息处理程序。 传递给基类的消息将传递给窗口中的默认消息处理程序。

此成员函数将 Windows 控件附加到 `CWnd` 对象并替换窗口的 `WndProc` 和 `AfxWndProc` 函数。 函数存储指向 `CWnd` 对象中的旧 `WndProc` 的指针。

> [!NOTE]
> 调用此函数时，该窗口不得已附加到 MFC 对象。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#123](../../mfc/reference/codesnippet/cpp/cwnd-class_64.cpp)]

##  <a name="unlockwindowupdate"></a>CWnd：： UnlockWindowUpdate

调用此成员函数可对已通过 `CWnd::LockWindowUpdate`锁定的窗口解除锁定。

```
void UnlockWindowUpdate();
```

### <a name="remarks"></a>备注

一次只能使用 `LockWindowUpdate`锁定一个窗口。 有关锁定窗口的详细信息，请参阅[CWnd：： LockWindowUpdate](#lockwindowupdate)或 Win32 函数[LockWindowUpdate](/windows/win32/api/winuser/nf-winuser-lockwindowupdate) 。

##  <a name="unsubclasswindow"></a>CWnd：： UnsubclassWindow

调用此成员函数以将 `WndProc` 设置回其原始值，并从 `CWnd` 对象分离 HWND 标识的窗口。

```
HWND UnsubclassWindow();
```

### <a name="return-value"></a>返回值

Unsubclassed 窗口的句柄。

### <a name="example"></a>示例

  请参阅[CWnd：： SubclassWindow](#subclasswindow)的示例。

##  <a name="updatedata"></a>CWnd：： UpdateData

调用此成员函数以初始化对话框中的数据，或检索和验证对话框数据。

```
BOOL UpdateData(BOOL bSaveAndValidate = TRUE);
```

### <a name="parameters"></a>parameters

*bSaveAndValidate*<br/>
指示是否正在初始化对话框（FALSE）或正在检索数据的标志（TRUE）。

### <a name="return-value"></a>返回值

如果操作成功，则为非零值;否则为0。 如果*bSaveAndValidat*e 为 TRUE，则返回值为非零表示数据已成功验证。

### <a name="remarks"></a>备注

当在[CDialog：： OnInitDialog](../../mfc/reference/cdialog-class.md#oninitdialog)的默认实现中创建了模式对话框时，框架会自动调用*BSAVEANDVALIDATE*设置为 FALSE 的 `UpdateData`。 调用发生在对话框可见之前。 当*bSaveAndValidate*设置为 TRUE 时， [CDialog：： OnOK](../../mfc/reference/cdialog-class.md#onok)的默认实现将调用此成员函数以检索数据，如果成功，则将关闭对话框。 （如果在对话框中单击了 "取消" 按钮，则在没有检索到的数据的情况下关闭该对话框。）

##  <a name="updatedialogcontrols"></a>CWnd：： UpdateDialogControls

调用此成员函数可在使用[ON_UPDATE_COMMAND_UI](message-map-macros-mfc.md#on_update_command_ui)回调机制的对话框或窗口中更新对话框按钮和其他控件的状态。

```
void UpdateDialogControls(
    CCmdTarget* pTarget,
    BOOL bDisableIfNoHndler);
```

### <a name="parameters"></a>parameters

*pTarget*<br/>
指向应用程序的主框架窗口，并用于路由更新消息。

*bDisableIfNoHndler*<br/>
一个标志，该标志指示是否应自动将没有更新处理程序的控件显示为禁用。

### <a name="remarks"></a>备注

如果子控件没有处理程序并且*bDisableIfNoHndler*为 TRUE，则将禁用子控件。

框架为对话栏或工具栏中的控件调用此成员函数，作为应用程序的空闲处理的一部分。

##  <a name="updatelayeredwindow"></a>CWnd：： UpdateLayeredWindow

更新分层窗口的位置、大小、形状、内容和透明度。

```
BOOL UpdateLayeredWindow(
    CDC* pDCDst,
    POINT* pptDst,
    SIZE* psize,
    CDC* pDCSrc,
    POINT* pptSrc,
    COLORREF crKey,
    BLENDFUNCTION* pblend,
    DWORD dwFlags);
```

### <a name="parameters"></a>parameters

*pDCDst*<br/>
指向屏幕的设备上下文的指针。 它在窗口内容更新时用于调色板颜色匹配。 如果*pDCDst*为 NULL，则将使用默认调色板。

如果*pDCSrc*为 null，则*PDCDST*必须为 null。

*pptDst*<br/>
指向指定分层窗口的新屏幕位置的 `POINT` 结构的指针。 如果当前位置未更改，则*pptDst*可以为 NULL。

*psize*<br/>
指向 `SIZE` 结构的指针，该结构指定分层窗口的新大小。 如果窗口的大小未发生更改，则*psize*可以为 NULL。

如果*pDCSrc*为 null，则*PSIZE*必须为 null。

*pDCSrc*<br/>
一个指针，指向用于定义分层窗口的图面上的 DC。 如果窗口的形状和可视上下文未更改，则*pDCSrc*可以为 NULL。

*pptSrc*<br/>
指向 `POINT` 结构的指针，该结构指定了设备在设备上下文中的位置。

如果*pDCSrc*为 null，则*PPTSRC*应为 null。

*crKey*<br/>
指向 COLORREF 值的指针，该值指定在编写分层窗口时要使用的透明度颜色键。 此颜色的窗口绘制的所有像素都将是透明的。 若要生成 COLORREF，请使用 RGB 宏。

*pblend*<br/>
指向[BLENDFUNCTION](/windows/win32/api/wingdi/ns-wingdi-blendfunction)结构的指针，该结构指定组合分层窗口时要使用的透明度值。

dwFlags<br/>
指定要执行的操作。 此参数可以是下列值中的一个或多个。 有关可能值的列表，请参阅[UpdateLayeredWindow](/windows/win32/api/winuser/nf-winuser-updatelayeredwindow)。

### <a name="return-value"></a>返回值

如果函数成功，则为非零值；否则为

### <a name="remarks"></a>备注

此成员函数模拟函数[UpdateLayeredWindow](/windows/win32/api/winuser/nf-winuser-updatelayeredwindow)的功能，如 Windows SDK 中所述。

##  <a name="updatewindow"></a>CWnd：： UpdateWindow

如果更新区域不为空，则通过发送[WM_PAINT](/windows/win32/gdi/wm-paint)消息来更新工作区。

```
void UpdateWindow();
```

### <a name="remarks"></a>备注

`UpdateWindow` 成员函数直接发送 WM_PAINT 消息，绕过应用程序队列。 如果更新区域为空，则不发送 WM_PAINT。

### <a name="example"></a>示例

[!code-cpp[NVC_MFCWindowing#124](../../mfc/reference/codesnippet/cpp/cwnd-class_65.cpp)]

##  <a name="validaterect"></a>CWnd：： ValidateRect

通过从窗口的更新区域中删除矩形来验证给定矩形内的工作区。

```
void ValidateRect(LPCRECT lpRect);
```

### <a name="parameters"></a>parameters

*lpRect*<br/>
指向包含要从更新区域中删除的矩形的客户端坐标的[CRect](../../atl-mfc-shared/reference/crect-class.md)对象或[RECT 结构](/windows/win32/api/windef/ns-windef-rect)。 如果*lpRect*为 NULL，则验证整个窗口。

### <a name="remarks"></a>备注

[BeginPaint](#beginpaint)成员函数自动验证整个工作区。 如果在下一次生成[WM_PAINT](/windows/win32/gdi/wm-paint)之前需要验证更新区域的一部分，则不应调用 `ValidateRect` 和[ValidateRgn](#validatergn)成员函数。

在验证当前更新区域之前，Windows 将继续生成 WM_PAINT 消息。

##  <a name="validatergn"></a>CWnd：： ValidateRgn

通过从窗口的当前更新区域删除区域来验证给定区域内的工作区。

```
void ValidateRgn(CRgn* pRgn);
```

### <a name="parameters"></a>parameters

*pRgn*<br/>
指向[CRgn](../../mfc/reference/crgn-class.md)对象的指针，该对象标识定义要从更新区域中删除的区域的区域。 如果此参数为 NULL，则删除整个工作区。

### <a name="remarks"></a>备注

给定区域必须以前由 region 函数创建。 区域坐标假定为工作区坐标。

[BeginPaint](#beginpaint)成员函数自动验证整个工作区。 如果在生成下一个[WM_PAINT](/windows/win32/gdi/wm-paint)消息之前必须验证部分更新区域，则不应调用[ValidateRect](#validaterect)和 `ValidateRgn` 成员函数。

##  <a name="windowfrompoint"></a>CWnd：： WindowFromPoint

检索包含指定点的窗口;*point*必须指定屏幕上某个点的屏幕坐标。

```
static CWnd* PASCAL WindowFromPoint(POINT point);
```

### <a name="parameters"></a>parameters

*情况*<br/>
指定用于定义要检查的点的[CPoint](../../atl-mfc-shared/reference/cpoint-class.md)对象或[点](/windows/win32/api/windef/ns-windef-point)数据结构。

### <a name="return-value"></a>返回值

指向其所在的窗口对象的指针。 如果在给定点不存在窗口，则为 NULL。 返回的指针可能是暂时的，不应存储以供以后使用。

### <a name="remarks"></a>备注

`WindowFromPoint` 不会检索隐藏或禁用的窗口，即使点在窗口内也是如此。 应用程序应使用[ChildWindowFromPoint](#childwindowfrompoint)成员函数进行受限搜索。

##  <a name="windowproc"></a>CWnd：： WindowProc

为 `CWnd` 对象提供 Windows 过程（`WindowProc`）。

```
virtual LRESULT WindowProc(
    UINT message,
    WPARAM wParam,
    LPARAM lParam);
```

### <a name="parameters"></a>parameters

message<br/>
指定要处理的 Windows 消息。

*wParam*<br/>
提供处理消息时使用的其他信息。 参数值取决于消息。

*lParam*<br/>
提供处理消息时使用的其他信息。 参数值取决于消息。

### <a name="return-value"></a>返回值

返回值取决于消息。

### <a name="remarks"></a>备注

它通过窗口的消息映射调度消息。

##  <a name="winhelp"></a>CWnd：： WinHelp

调用以启动 WinHelp 应用程序。

```
virtual void WinHelp(
    DWORD_PTR dwData,
    UINT nCmd = HELP_CONTEXT);
```

### <a name="parameters"></a>parameters

*dwData*<br/>
指定其他数据。 使用的值取决于*nCmd*参数的值。

*nCmd*<br/>
指定请求的帮助的类型。 有关可能值的列表以及这些值如何影响*dwData*参数，请参阅 Windows SDK 中的[WinHelp](/windows/win32/api/winuser/nf-winuser-winhelpw) Windows 函数。

### <a name="remarks"></a>备注

有关详细信息，请参阅[CWinApp：： WinHelp](../../mfc/reference/cwinapp-class.md#winhelp) 。

##  <a name="registertouchwindow"></a>CWnd：： RegisterTouchWindow

注册或注销 Windows 触控支持。

```
BOOL RegisterTouchWindow(
    BOOL bRegister = TRUE,
    ULONG ulFlags = 0);
```

### <a name="parameters"></a>parameters

*bRegister*<br/>
TRUE 表示注册 Windows touch 支持;否则为 FALSE。

*ulFlags*<br/>
指定可选修改的一组位标志。 此字段可能包含0或以下值之一： TWF_FINETOUCH，TWF_WANTPALM。

### <a name="return-value"></a>返回值

若成功，则为 TRUE；否则为 FALSE。

### <a name="remarks"></a>备注

##  <a name="resizedynamiclayout"></a>CWnd：： ResizeDynamicLayout

如果对窗口启用了动态布局，则窗口大小更改以调整子窗口布局时会通过框架调用。

```
virtual void ResizeDynamicLayout();
```

### <a name="remarks"></a>备注

## <a name="see-also"></a>另请参阅

[CCmdTarget 类](../../mfc/reference/ccmdtarget-class.md)<br/>
[层次结构图](../../mfc/hierarchy-chart.md)<br/>
[CFrameWnd 类](../../mfc/reference/cframewnd-class.md)<br/>
[CView 类](../../mfc/reference/cview-class.md)
